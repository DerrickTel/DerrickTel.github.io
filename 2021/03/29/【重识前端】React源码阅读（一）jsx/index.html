<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>【重识前端】React源码阅读（一）jsx | Derrick</title><meta name="description" content="【重识前端】React源码阅读（一）jsx"><meta name="keywords" content="react"><meta name="author" content="Derrick"><meta name="copyright" content="Derrick"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="twitter:card" content="summary"><meta name="twitter:title" content="【重识前端】React源码阅读（一）jsx"><meta name="twitter:description" content="【重识前端】React源码阅读（一）jsx"><meta name="twitter:image" content="http://derricktel.github.io/image/cover/react.png"><meta property="og:type" content="article"><meta property="og:title" content="【重识前端】React源码阅读（一）jsx"><meta property="og:url" content="http://derricktel.github.io/2021/03/29/%E3%80%90%E9%87%8D%E8%AF%86%E5%89%8D%E7%AB%AF%E3%80%91React%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%EF%BC%88%E4%B8%80%EF%BC%89jsx/"><meta property="og:site_name" content="Derrick"><meta property="og:description" content="【重识前端】React源码阅读（一）jsx"><meta property="og:image" content="http://derricktel.github.io/image/cover/react.png"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>var autoChangeMode = '1'
var t = Cookies.get("theme")
if (autoChangeMode == '1'){
  var isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
  var isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
  var isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined){
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport){
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour < 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
  }
  } else if (t == 'light') activateLightMode()
  else activateDarkMode()

} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="canonical" href="http://derricktel.github.io/2021/03/29/%E3%80%90%E9%87%8D%E8%AF%86%E5%89%8D%E7%AB%AF%E3%80%91React%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%EF%BC%88%E4%B8%80%EF%BC%89jsx/"><link rel="prev" title="【重识前端】React源码阅读（二）2000字告诉你Fiber设计动机" href="http://derricktel.github.io/2021/04/05/%E3%80%90%E9%87%8D%E8%AF%86%E5%89%8D%E7%AB%AF%E3%80%91React%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%EF%BC%88%E4%BA%8C%EF%BC%892000%E5%AD%97%E5%91%8A%E8%AF%89%E4%BD%A0Fiber%E8%AE%BE%E8%AE%A1%E5%8A%A8%E6%9C%BA/"><link rel="next" title="「如何给开源库提一个PR」" href="http://derricktel.github.io/2021/01/22/%E3%80%8C%E5%A6%82%E4%BD%95%E7%BB%99github%E6%8F%90%E4%B8%80%E4%B8%AAPR%E3%80%8D/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  baiduPush: false,
  highlightCopy: true,
  highlightLang: true,
  highlightShrink: 'false',
  isFontAwesomeV5: false,
  isPhotoFigcaption: false
  
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isSidebar: true  
  }</script><noscript><style>
#page-header {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><meta name="generator" content="Hexo 4.2.0"></head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">36</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">43</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">18</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-about"></i><span> 关于我</span></a></div></div></div></div><i class="fa fa-arrow-right on" id="toggle-sidebar" aria-hidden="true">     </i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#前言"><span class="toc-number">1.</span> <span class="toc-text">前言</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#React的相关信息"><span class="toc-number">2.</span> <span class="toc-text">React的相关信息</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#功利的角度"><span class="toc-number">2.1.</span> <span class="toc-text">功利的角度</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#学习的角度"><span class="toc-number">2.2.</span> <span class="toc-text">学习的角度</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#为什么非要学习源码"><span class="toc-number">2.3.</span> <span class="toc-text">为什么非要学习源码</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#JSX"><span class="toc-number">3.</span> <span class="toc-text">JSX</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#什么是JSX"><span class="toc-number">3.1.</span> <span class="toc-text">什么是JSX</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#babel"><span class="toc-number">3.1.1.</span> <span class="toc-text">babel</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Babel-是一个-JavaScript-编译器"><span class="toc-number">3.2.</span> <span class="toc-text">Babel 是一个 JavaScript 编译器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#createElement"><span class="toc-number">3.3.</span> <span class="toc-text">createElement</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ReactElement"><span class="toc-number">3.4.</span> <span class="toc-text">ReactElement</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ReactDOM-render"><span class="toc-number">3.5.</span> <span class="toc-text">ReactDOM.render</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ReactDOM-hydrate"><span class="toc-number">3.6.</span> <span class="toc-text">ReactDOM.hydrate</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#为什么要使用JSX"><span class="toc-number">3.7.</span> <span class="toc-text">为什么要使用JSX</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#剩余的坑"><span class="toc-number">4.</span> <span class="toc-text">剩余的坑</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#索引"><span class="toc-number">5.</span> <span class="toc-text">索引</span></a></li></ol></div></div></div><div id="body-wrap"><div class="post-bg" id="nav" style="background-image: url(/image/cover/react.png)"><div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">Derrick</a></span><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-about"></i><span> 关于我</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span></span></div><div id="post-info"><div id="post-title"><div class="posttitle">【重识前端】React源码阅读（一）jsx</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="发表于 2021-03-29 10:08:31"><i class="fa fa-calendar" aria-hidden="true"></i> 发表于 2021-03-29</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="更新于 2021-06-17 19:21:16"><i class="fa fa-history" aria-hidden="true"></i> 更新于 2021-06-17</span></time><span class="post-meta__categories"><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/%E9%87%8D%E6%8B%BE%E5%89%8D%E7%AB%AF/">重拾前端</a></span></div><div class="meta-secondline"> </div><div class="meta-thirdline"><span class="post-meta-pv-cv"><i class="fa fa-eye post-meta__icon" aria-hidden="true"> </i><span>阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-commentcount"></span></div></div></div></div><main class="layout_post" id="content-inner"><article id="post"><div id="article-container"><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>一些废话和个人感悟，看干货的直接跳过….到<code>jsx</code></p>
<p>重识前端断断续续也写了大半年了。里面基本上都是个人技术栈的积累，以及面试题的回答。感兴趣的伙伴可以点到我的主页去看。</p>
<p>说说今天的主角-<code>React</code>吧。<code>React</code>的源码之前一直想要去阅读学习的，也确确实实在看了，但是经常看着看着就发困。然后就开始偷懒，从一些周边的开始阅读，比如<code>React-Router</code>，<code>React-Redux</code>之类的。之前都是看完之后再开始写文章。现在想一边看一边写，换个方式看看。如果有写错的地方欢迎大家讨论，如果觉得还可以的话可以点个赞，谢谢！</p>
<p>作为一名<code>React</code>的重度使用者和爱好者。我将会和大家一起从「使用者」到「了解者」进步！</p>
<h1 id="React的相关信息"><a href="#React的相关信息" class="headerlink" title="React的相关信息"></a>React的相关信息</h1><h2 id="功利的角度"><a href="#功利的角度" class="headerlink" title="功利的角度"></a>功利的角度</h2><p>打开招聘软件，现在基本上的大厂，甚至是外包公司都普遍要求你会<code>React</code>或者<code>Vue</code>。给出的薪资也是非常的诱人。</p>
<p>（图片来自Boss某聘）</p>
<p><img src="/" class="lazyload" data-src="/image/react1/offer.png"  alt="offer"></p>
<p>为了发财这个朴实的梦想也应该学习。</p>
<h2 id="学习的角度"><a href="#学习的角度" class="headerlink" title="学习的角度"></a>学习的角度</h2><p>如今前端御三家：<code>Angular</code>、<code>React</code>、<code>Vue</code>三分天下。国内更青睐<code>React</code>和<code>Vue</code>。所以，从学习的角度更应该学习<code>React</code>。</p>
<p><a href="https://www.npmtrends.com/react-vs-vue-vs-@angular/core" target="_blank" rel="noopener">https://www.npmtrends.com/react-vs-vue-vs-@angular/core</a></p>
<p><img src="/" class="lazyload" data-src="/image/react1/download.jpg"  alt="offer"></p>
<p><img src="/" class="lazyload" data-src="/image/react1/stats"  alt="offer"></p>
<h2 id="为什么非要学习源码"><a href="#为什么非要学习源码" class="headerlink" title="为什么非要学习源码"></a>为什么非要学习源码</h2><p>这个问题我之前也问过，几乎所有的面试都是造火箭，工作拧螺丝。</p>
<p>我认为从两个角度来看这个问题：</p>
<ol>
<li>应聘者<ol>
<li>吃透<code>React</code>的情况下，解决问题的上限肯定是提高了</li>
<li>一个优秀的框架是一位优秀的老师</li>
</ol>
</li>
<li>招聘者，既然都是能干活的，我就找一个懂得更多的人来干这个活</li>
</ol>
<h1 id="JSX"><a href="#JSX" class="headerlink" title="JSX"></a>JSX</h1><p>废话不多说，直接开始。</p>
<p>JSX，再熟悉不过了，日常使用React过程中肯定会用到的。给一个demo，帮大家回一下。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">import React from &quot;react&quot;;</span><br><span class="line">import ReactDOM from &quot;react-dom&quot;;</span><br><span class="line"></span><br><span class="line">class App extends React.Component &#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    const text &#x3D; &quot;哈哈哈&quot;</span><br><span class="line">    return (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;p&gt;&#123;text&#125;&lt;&#x2F;p&gt;</span><br><span class="line">      &lt;&#x2F;div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const rootElement &#x3D; document.getElementById(&quot;root&quot;);</span><br><span class="line">ReactDOM.render(&lt;App &#x2F;&gt;, rootElement);</span><br></pre></td></tr></table></figure>



<p>我先问几个问题，如果能够清晰的快速答出来，那么恭喜你，你的基础很扎实，如果不行，那就一起看看，看完之后可以把你的答案写在评论区，和大家讨论。</p>
<ul>
<li>什么是<code>JSX</code>？<code>JSX</code>和<code>JS</code>有什么关系？</li>
<li><code>JSX</code>的底层原理是什么？</li>
<li>为什么<code>React</code>要选择<code>JSX</code>？</li>
</ul>
<p>带着问题一起来看。</p>
<h2 id="什么是JSX"><a href="#什么是JSX" class="headerlink" title="什么是JSX"></a>什么是JSX</h2><p>先看看<code>React</code>官网的一句话。</p>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const element &#x3D; &lt;h1&gt;Hello, world!&lt;&#x2F;h1&gt;;</span><br></pre></td></tr></table></figure>

<p>它被称为 JSX，是一个 JavaScript 的语法扩展。</p>
</blockquote>
<p>语法扩展，意思就是<code>JS</code>有的他都有的情况下，还有一些别的功能。可是这货，明显在<code>JavaScript</code>学习过程中没见过他呀。他能运行在<code>JavaScript</code>的环境中吗？打开<code>Chrome</code>控制台。</p>
<p><img src="/" class="lazyload" data-src="/image/react/console.png"  alt="console"></p>
<p>上来就是劈头盖脸的语法错误，看样子这部分就是多出来的功能了呗。那咋运行啊？</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">        test: <span class="regexp">/\.(js|jsx)?$/</span>,</span><br><span class="line">        <span class="comment">// 开启缓存</span></span><br><span class="line">        options: &#123; <span class="attr">cacheDirectory</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">        loader: <span class="string">'babel-loader'</span>,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>怎么样，熟悉不，意思是告诉<code>webpack</code>，解析<code>jsx</code>结尾的代码，需要用到<code>babel</code>。ok，也就是说要想运行<code>jsx</code>，就必须用<code>babel</code>解析。那好，什么是babel？</p>
<h3 id="babel"><a href="#babel" class="headerlink" title="babel"></a>babel</h3><p>拉一段<code>babel</code>官网上的一句话</p>
<blockquote>
<h2 id="Babel-是一个-JavaScript-编译器"><a href="#Babel-是一个-JavaScript-编译器" class="headerlink" title="Babel 是一个 JavaScript 编译器"></a>Babel 是一个 JavaScript 编译器</h2><p>Babel 是一个工具链，主要用于将 ECMAScript 2015+ 版本的代码转换为向后兼容的 JavaScript 语法，以便能够运行在当前和旧版本的浏览器或其他环境中。</p>
</blockquote>
<p><code>babel</code>，其实就是帮我们解析我们写的代码，然后变成浏览器能够认识样式。比如<code>jsx</code>，比如新鲜的<code>es6</code>语法可以运行在老版本的浏览器上，让老版本的浏览器能够认识。</p>
<p>那问题又来了，jsx被babel变成什么样子了？</p>
<p>在线转换：<a href="https://babeljs.io/repl" target="_blank" rel="noopener">https://babeljs.io/repl</a></p>
<p>大家可以把上面的小demo，扔进去。</p>
<p><img src="/" class="lazyload" data-src="/image/react/bebel.png"  alt="bebel"></p>
<p>发现没有。我们<code>return</code>出去的东西变成了<code>React.createElement</code>。哈哈，这就是为什么我们即使没有用到<code>React</code>(解决了一到面试题！)，也需要在上面<code>import</code>，因为<code>jsx</code>最后是会被转化为<code>React.createElement</code>，会用到的！（不过现在最新的好像不需要引用也不会报错了，因为他自己识别了。</p>
<p>官网介绍：<a href="https://zh-hans.reactjs.org/blog/2020/09/22/introducing-the-new-jsx-transform.html" target="_blank" rel="noopener">https://zh-hans.reactjs.org/blog/2020/09/22/introducing-the-new-jsx-transform.html</a></p>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 由编译器引入（禁止自己引入！）</span><br><span class="line">import &#123;jsx as _jsx&#125; from &#39;react&#x2F;jsx-runtime&#39;;</span><br><span class="line"></span><br><span class="line">function App() &#123;</span><br><span class="line">  return _jsx(&#39;h1&#39;, &#123; children: &#39;Hello world&#39; &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注意，此时源代码<strong>无需引入 React</strong> 即可使用 JSX 了！（但仍需引入 React，以便使用 React 提供的 Hook 或其他导出。）</p>
</blockquote>
<p>回到之前<code>React</code>官网提到的</p>
<blockquote>
<p>它被称为 JSX，是一个 JavaScript 的语法扩展。</p>
</blockquote>
<p>有没有呼应起来了，确实<code>js</code>他都有，但是<code>js</code>没有的，他还有比如转化为<code>React.createElement</code>。</p>
<h2 id="createElement"><a href="#createElement" class="headerlink" title="createElement"></a>createElement</h2><p>我们是来读源码学习的，我们既然知道了<code>jsx</code>的底层是调用<code>react</code>的函数，我们就来看看这个函数是个什么情况。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">createElement</span>(<span class="params">type, config, children</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// propName 变量用于储存后面需要用到的元素属性</span></span><br><span class="line">  <span class="keyword">let</span> propName; </span><br><span class="line">  <span class="comment">// props 变量用于储存元素属性的键值对集合</span></span><br><span class="line">  <span class="keyword">const</span> props = &#123;&#125;; </span><br><span class="line">  <span class="comment">// key、ref、self、source 均为 React 元素的属性，此处不必深究</span></span><br><span class="line">  <span class="keyword">let</span> key = <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">let</span> ref = <span class="literal">null</span>; </span><br><span class="line">  <span class="keyword">let</span> self = <span class="literal">null</span>; </span><br><span class="line">  <span class="keyword">let</span> source = <span class="literal">null</span>; </span><br><span class="line"></span><br><span class="line">  <span class="comment">// config 对象中存储的是元素的属性</span></span><br><span class="line">  <span class="keyword">if</span> (config != <span class="literal">null</span>) &#123; </span><br><span class="line">    <span class="comment">// 进来之后做的第一件事，是依次对 ref、key、self 和 source 属性赋值</span></span><br><span class="line">    <span class="keyword">if</span> (hasValidRef(config)) &#123;</span><br><span class="line">      ref = config.ref;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 此处将 key 值字符串化</span></span><br><span class="line">    <span class="keyword">if</span> (hasValidKey(config)) &#123;</span><br><span class="line">      key = <span class="string">''</span> + config.key; </span><br><span class="line">    &#125;</span><br><span class="line">    self = config.__self === <span class="literal">undefined</span> ? <span class="literal">null</span> : config.__self;</span><br><span class="line">    source = config.__source === <span class="literal">undefined</span> ? <span class="literal">null</span> : config.__source;</span><br><span class="line">    <span class="comment">// 接着就是要把 config 里面的属性都一个一个挪到 props 这个之前声明好的对象里面</span></span><br><span class="line">    <span class="keyword">for</span> (propName <span class="keyword">in</span> config) &#123;</span><br><span class="line">      <span class="keyword">if</span> (</span><br><span class="line">        <span class="comment">// 筛选出可以提进 props 对象里的属性</span></span><br><span class="line">        hasOwnProperty.call(config, propName) &amp;&amp;</span><br><span class="line">        !RESERVED_PROPS.hasOwnProperty(propName) </span><br><span class="line">      ) &#123;</span><br><span class="line">        props[propName] = config[propName]; </span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// childrenLength 指的是当前元素的子元素的个数，减去的 2 是 type 和 config 两个参数占用的长度</span></span><br><span class="line">  <span class="keyword">const</span> childrenLength = <span class="built_in">arguments</span>.length - <span class="number">2</span>; </span><br><span class="line">  <span class="comment">// 如果抛去type和config，就只剩下一个参数，一般意味着文本节点出现了</span></span><br><span class="line">  <span class="keyword">if</span> (childrenLength === <span class="number">1</span>) &#123; </span><br><span class="line">    <span class="comment">// 直接把这个参数的值赋给props.children</span></span><br><span class="line">    props.children = children; </span><br><span class="line">    <span class="comment">// 处理嵌套多个子元素的情况</span></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (childrenLength &gt; <span class="number">1</span>) &#123; </span><br><span class="line">    <span class="comment">// 声明一个子元素数组</span></span><br><span class="line">    <span class="keyword">const</span> childArray = <span class="built_in">Array</span>(childrenLength); </span><br><span class="line">    <span class="comment">// 把子元素推进数组里</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; childrenLength; i++) &#123; </span><br><span class="line">      childArray[i] = <span class="built_in">arguments</span>[i + <span class="number">2</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 最后把这个数组赋值给props.children</span></span><br><span class="line">    props.children = childArray; </span><br><span class="line">  &#125; </span><br><span class="line"></span><br><span class="line">  <span class="comment">// 处理 defaultProps</span></span><br><span class="line">  <span class="keyword">if</span> (type &amp;&amp; type.defaultProps) &#123;</span><br><span class="line">    <span class="keyword">const</span> defaultProps = type.defaultProps;</span><br><span class="line">    <span class="keyword">for</span> (propName <span class="keyword">in</span> defaultProps) &#123; </span><br><span class="line">      <span class="keyword">if</span> (props[propName] === <span class="literal">undefined</span>) &#123;</span><br><span class="line">        props[propName] = defaultProps[propName];</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 最后返回一个调用ReactElement执行方法，并传入刚才处理过的参数</span></span><br><span class="line">  <span class="keyword">return</span> ReactElement(</span><br><span class="line">    type,</span><br><span class="line">    key,</span><br><span class="line">    ref,</span><br><span class="line">    self,</span><br><span class="line">    source,</span><br><span class="line">    ReactCurrentOwner.current,</span><br><span class="line">    props,</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>先不看参数，我们就先看返回值的名字和这个函数的名字。我们初步猜测，<code>jsx</code>是通过<code>createElement</code>这个函数来创建一个<code>React</code>元素，然后由<code>ReactDOM.render</code>来渲染到我们指定名字的元素上。</p>
<p>ok，那么我们平常写的jsx元素就是<code>ReactElement</code>生成的东西。我们看看<code>ReactElement</code>生成的是个什么东西。</p>
<p>我们先把我们平常写的<code>jsx</code>给打印一下。</p>
<p><img src="/" class="lazyload" data-src="/image/react/element.png"  alt="element"></p>
<p>凭直觉，是不是感觉这个是一个<code>虚拟DOM</code>的节点，他有类型然后又是<code>div</code>，对应的会不会是<code>html</code>的<code>div</code>标签？还有<code>className</code>，这个很明显就是对应<code>class</code>。我们去一看究竟。</p>
<h2 id="ReactElement"><a href="#ReactElement" class="headerlink" title="ReactElement"></a>ReactElement</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ReactElement = <span class="function"><span class="keyword">function</span>(<span class="params">type, key, ref, self, source, owner, props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> element = &#123;</span><br><span class="line">    <span class="comment">// 这个是一个React结点的标识符</span></span><br><span class="line">    $$<span class="keyword">typeof</span>: REACT_ELEMENT_TYPE,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 很明显就是对应的html的标签</span></span><br><span class="line">    type: type,</span><br><span class="line">    key: key,</span><br><span class="line">    ref: ref,</span><br><span class="line">    props: props,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 记录由谁创建的，暂时也不知道什么用。先挖个坑</span></span><br><span class="line">    _owner: owner,</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 开发环境下的配置，主要就是Object.freeze，可以在MDN上面查一下。我就不多介绍了</span></span><br><span class="line">  <span class="keyword">if</span> (__DEV__) &#123;</span><br><span class="line">    <span class="comment">// The validation flag is currently mutative. We put it on</span></span><br><span class="line">    <span class="comment">// an external backing store so that we can freeze the whole object.</span></span><br><span class="line">    <span class="comment">// This can be replaced with a WeakMap once they are implemented in</span></span><br><span class="line">    <span class="comment">// commonly used development environments.</span></span><br><span class="line">    element._store = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// To make comparing ReactElements easier for testing purposes, we make</span></span><br><span class="line">    <span class="comment">// the validation flag non-enumerable (where possible, which should</span></span><br><span class="line">    <span class="comment">// include every environment we run tests in), so the test framework</span></span><br><span class="line">    <span class="comment">// ignores it.</span></span><br><span class="line">    <span class="built_in">Object</span>.defineProperty(element._store, <span class="string">'validated'</span>, &#123;</span><br><span class="line">      configurable: <span class="literal">false</span>,</span><br><span class="line">      enumerable: <span class="literal">false</span>,</span><br><span class="line">      writable: <span class="literal">true</span>,</span><br><span class="line">      value: <span class="literal">false</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">// self and source are DEV only properties.</span></span><br><span class="line">    <span class="built_in">Object</span>.defineProperty(element, <span class="string">'_self'</span>, &#123;</span><br><span class="line">      configurable: <span class="literal">false</span>,</span><br><span class="line">      enumerable: <span class="literal">false</span>,</span><br><span class="line">      writable: <span class="literal">false</span>,</span><br><span class="line">      value: self,</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">// Two elements created in two different places should be considered</span></span><br><span class="line">    <span class="comment">// equal for testing purposes and therefore we hide it from enumeration.</span></span><br><span class="line">    <span class="built_in">Object</span>.defineProperty(element, <span class="string">'_source'</span>, &#123;</span><br><span class="line">      configurable: <span class="literal">false</span>,</span><br><span class="line">      enumerable: <span class="literal">false</span>,</span><br><span class="line">      writable: <span class="literal">false</span>,</span><br><span class="line">      value: source,</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">Object</span>.freeze) &#123;</span><br><span class="line">      <span class="built_in">Object</span>.freeze(element.props);</span><br><span class="line">      <span class="built_in">Object</span>.freeze(element);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> element;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>



<p>看过之后，是不是和我们看到的节点一样，首先，标注一下<code>$$typeof</code>为<code>react节点</code>。然后就是正常的传参，比如<code>key</code>，<code>ref</code>，<code>props</code>等等。</p>
<h2 id="ReactDOM-render"><a href="#ReactDOM-render" class="headerlink" title="ReactDOM.render"></a>ReactDOM.render</h2><p>这个就是React节点渲染为真是节点的操作。话不多说，上源码！</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">isValidContainer</span>(<span class="params">node: mixed</span>): <span class="title">boolean</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> !!(</span><br><span class="line">    node &amp;&amp;</span><br><span class="line">    (node.nodeType === ELEMENT_NODE ||</span><br><span class="line">      node.nodeType === DOCUMENT_NODE ||</span><br><span class="line">      node.nodeType === DOCUMENT_FRAGMENT_NODE ||</span><br><span class="line">      (node.nodeType === COMMENT_NODE &amp;&amp;</span><br><span class="line">        (node: any).nodeValue === <span class="string">' react-mount-point-unstable '</span>))</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">render</span>(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  element: React$Element&lt;any&gt;,</span></span></span><br><span class="line"><span class="function"><span class="params">  container: Container,</span></span></span><br><span class="line"><span class="function"><span class="params">  callback: ?Function,</span></span></span><br><span class="line"><span class="function"><span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 用于抛出错误的, 就是判断这个container是不是找得到</span></span><br><span class="line">  invariant(</span><br><span class="line">    isValidContainer(container),</span><br><span class="line">    <span class="string">'Target container is not a DOM element.'</span>,</span><br><span class="line">  );</span><br><span class="line">  <span class="keyword">if</span> (__DEV__) &#123;</span><br><span class="line">    <span class="keyword">const</span> isModernRoot =</span><br><span class="line">      isContainerMarkedAsRoot(container) &amp;&amp;</span><br><span class="line">      container._reactRootContainer === <span class="literal">undefined</span>;</span><br><span class="line">    <span class="keyword">if</span> (isModernRoot) &#123;</span><br><span class="line">      <span class="built_in">console</span>.error(</span><br><span class="line">        <span class="string">'You are calling ReactDOM.render() on a container that was previously '</span> +</span><br><span class="line">          <span class="string">'passed to ReactDOM.createRoot(). This is not supported. '</span> +</span><br><span class="line">          <span class="string">'Did you mean to call root.render(element)?'</span>,</span><br><span class="line">      );</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 这里面涉及到了fiber的一些架构，我想之后再说，再挖个坑</span></span><br><span class="line">  <span class="keyword">return</span> legacyRenderSubtreeIntoContainer(</span><br><span class="line">    <span class="literal">null</span>,</span><br><span class="line">    element,</span><br><span class="line">    container,</span><br><span class="line">    <span class="literal">false</span>,</span><br><span class="line">    callback,</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>有没有感觉很简单，去除<code>__DEV__</code>情况的话。也是返回一个函数的结果。。。</p>
<h2 id="ReactDOM-hydrate"><a href="#ReactDOM-hydrate" class="headerlink" title="ReactDOM.hydrate"></a>ReactDOM.hydrate</h2><p>这个函数我发现很有意思，与ReactDOM.render只有一行代码不一样</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">legacyRenderSubtreeIntoContainer(</span><br><span class="line">    null,</span><br><span class="line">    element,</span><br><span class="line">    container,</span><br><span class="line"><span class="deletion">-   false,</span></span><br><span class="line"><span class="addition">+   true,</span></span><br><span class="line">    callback,</span><br><span class="line">  );</span><br></pre></td></tr></table></figure>



<p>首先，这个<code>hydrate</code>的意思是注水。大致的意思是给一个结点增加水分，增添色彩。之前是给<code>SSR</code>过程中添加点击事件之类使用的。在<code>React17</code>之后会淘汰掉<code>ReactDOM.Render</code>，全部用<code>ReactDOM.hydrate</code>来代替。</p>
<p>React官网的一句话</p>
<blockquote>
<p>使用 <code>ReactDOM.render()</code> 对服务端渲染容器进行 hydrate 操作的方式已经被废弃，并且会在 React 17 被移除。作为替代，请使用 <a href="https://zh-hans.reactjs.org/docs/react-dom.html#hydrate" target="_blank" rel="noopener"><code>hydrate()</code></a>。</p>
</blockquote>
<h2 id="为什么要使用JSX"><a href="#为什么要使用JSX" class="headerlink" title="为什么要使用JSX"></a>为什么要使用JSX</h2><p>这里分享一个解题的小技巧。为什么要XX其实就是要问你，XX的好处。ok，那接下来就很好回答了</p>
<p>首先，因为如果不用<code>jsx</code>，我们就要在代码里面写上百个<code>React.crearteElement</code>。</p>
<p>第二，这个语法糖可以让开发者使用熟悉的<code>HTML</code>标签来创建<code>虚拟DOM</code>，降低学习成本。提升开发效率与开发体验</p>
<p><img src="/" class="lazyload" data-src="/image/react/bebel.png"  alt="bebel"></p>
<h1 id="剩余的坑"><a href="#剩余的坑" class="headerlink" title="剩余的坑"></a>剩余的坑</h1><ul>
<li>legacyRenderSubtreeIntoContainer（涉及fiber架构</li>
<li>_owner（创建的时候，这个属性有什么用</li>
</ul>
<h1 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h1><p><a href="https://zh-hans.reactjs.org/docs" target="_blank" rel="noopener">https://zh-hans.reactjs.org/docs</a></p>
<p><a href="https://www.babeljs.cn/docs/" target="_blank" rel="noopener">https://www.babeljs.cn/docs/</a></p>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Derrick</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://derricktel.github.io/2021/03/29/%E3%80%90%E9%87%8D%E8%AF%86%E5%89%8D%E7%AB%AF%E3%80%91React%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%EF%BC%88%E4%B8%80%EF%BC%89jsx/">http://derricktel.github.io/2021/03/29/%E3%80%90%E9%87%8D%E8%AF%86%E5%89%8D%E7%AB%AF%E3%80%91React%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%EF%BC%88%E4%B8%80%EF%BC%89jsx/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://derricktel.github.io" target="_blank">Derrick</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/react/">react</a></div><div class="post_share"><div class="social-share" data-image="/image/cover/react.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button button--primary button--animated"> <i class="fa fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/DerrickWechat.png" alt="微信"/><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/DerrickAlipay.jpg" alt="支付寶"/><div class="post-qr-code__desc">支付寶</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2021/04/05/%E3%80%90%E9%87%8D%E8%AF%86%E5%89%8D%E7%AB%AF%E3%80%91React%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%EF%BC%88%E4%BA%8C%EF%BC%892000%E5%AD%97%E5%91%8A%E8%AF%89%E4%BD%A0Fiber%E8%AE%BE%E8%AE%A1%E5%8A%A8%E6%9C%BA/"><img class="prev_cover lazyload" data-src="/image/cover/react.png" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">【重识前端】React源码阅读（二）2000字告诉你Fiber设计动机</div></div></a></div><div class="next-post pull_right"><a href="/2021/01/22/%E3%80%8C%E5%A6%82%E4%BD%95%E7%BB%99github%E6%8F%90%E4%B8%80%E4%B8%AAPR%E3%80%8D/"><img class="next_cover lazyload" data-src="/image/cover/github.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">「如何给开源库提一个PR」</div></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2021/04/06/【重识前端】React源码阅读（三）Fiber 初始化/" title="【重识前端】React源码阅读（三）4千字告诉你 Fiber 初始化"><img class="relatedPosts_cover lazyload"data-src="/image/cover/react.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2021-04-06</div><div class="relatedPosts_title">【重识前端】React源码阅读（三）4千字告诉你 Fiber 初始化</div></div></a></div><div class="relatedPosts_item"><a href="/2021/04/05/【重识前端】React源码阅读（二）2000字告诉你Fiber设计动机/" title="【重识前端】React源码阅读（二）2000字告诉你Fiber设计动机"><img class="relatedPosts_cover lazyload"data-src="/image/cover/react.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2021-04-05</div><div class="relatedPosts_title">【重识前端】React源码阅读（二）2000字告诉你Fiber设计动机</div></div></a></div><div class="relatedPosts_item"><a href="/2021/04/06/【重识前端】React源码阅读（四）/" title="【重识前端】React源码阅读（三）4千字告诉你 Fiber 初始化"><img class="relatedPosts_cover lazyload"data-src="/image/cover/react.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2021-04-06</div><div class="relatedPosts_title">【重识前端】React源码阅读（三）4千字告诉你 Fiber 初始化</div></div></a></div></div><div class="clear_both"></div></div></article></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By Derrick</div><div class="framework-info"><span>驱动 </span><a href="https://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换" target="_self">繁</a><i class="darkmode fa fa-moon-o" id="darkmode" title="夜间模式"></i></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async=""></script></body></html>