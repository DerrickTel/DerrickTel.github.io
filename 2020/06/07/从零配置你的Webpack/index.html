<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>ä»é›¶é…ç½®ä½ çš„Webpack | Derrick</title><meta name="description" content="ä»é›¶é…ç½®ä½ çš„Webpack"><meta name="keywords" content="Webpack"><meta name="author" content="Derrick"><meta name="copyright" content="Derrick"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="twitter:card" content="summary"><meta name="twitter:title" content="ä»é›¶é…ç½®ä½ çš„Webpack"><meta name="twitter:description" content="ä»é›¶é…ç½®ä½ çš„Webpack"><meta name="twitter:image" content="http://derricktel.github.io/image/cover/webpack.png"><meta property="og:type" content="article"><meta property="og:title" content="ä»é›¶é…ç½®ä½ çš„Webpack"><meta property="og:url" content="http://derricktel.github.io/2020/06/07/%E4%BB%8E%E9%9B%B6%E9%85%8D%E7%BD%AE%E4%BD%A0%E7%9A%84Webpack/"><meta property="og:site_name" content="Derrick"><meta property="og:description" content="ä»é›¶é…ç½®ä½ çš„Webpack"><meta property="og:image" content="http://derricktel.github.io/image/cover/webpack.png"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>var autoChangeMode = '1'
var t = Cookies.get("theme")
if (autoChangeMode == '1'){
  var isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
  var isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
  var isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined){
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport){
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour < 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
  }
  } else if (t == 'light') activateLightMode()
  else activateDarkMode()

} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="canonical" href="http://derricktel.github.io/2020/06/07/%E4%BB%8E%E9%9B%B6%E9%85%8D%E7%BD%AE%E4%BD%A0%E7%9A%84Webpack/"><link rel="prev" title="ã€é‡è¯†å‰ç«¯ã€‘åŸå‹/åŸå‹é“¾å’Œç»§æ‰¿" href="http://derricktel.github.io/2020/07/13/%E3%80%90%E9%87%8D%E8%AF%86%E5%89%8D%E7%AB%AF%E3%80%91%E5%8E%9F%E5%9E%8B%E5%8E%9F%E5%9E%8B%E9%93%BE%E5%92%8C%E7%BB%A7%E6%89%BF/"><link rel="next" title="ã€å‰ç«¯è¿›é˜¶ã€‘ä»é›¶æ­å»ºå±äºä½ çš„è„šæ‰‹æ¶" href="http://derricktel.github.io/2020/06/06/%E5%89%8D%E7%AB%AF%E8%BF%9B%E9%98%B6-%E9%85%8D%E7%BD%AE%E4%BD%A0%E8%87%AA%E5%B7%B1%E7%9A%84%E8%84%9A%E6%89%8B%E6%9E%B6/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"ç¹","msgToSimplifiedChinese":"ç°¡"},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  bookmark: {
    message_prev: 'æŒ‰',
    message_next: 'é”®å°†æœ¬é¡µåŠ å…¥ä¹¦ç­¾'
  },
  runtime_unit: 'å¤©',
  runtime: true,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  baiduPush: false,
  highlightCopy: true,
  highlightLang: true,
  highlightShrink: 'false',
  isFontAwesomeV5: false,
  isPhotoFigcaption: false
  
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isSidebar: true  
  }</script><noscript><style>
#page-header {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><meta name="generator" content="Hexo 4.2.0"></head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length_num">31</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length_num">42</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length_num">18</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> å½’æ¡£</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-about"></i><span> å…³äºæˆ‘</span></a></div></div></div></div><i class="fa fa-arrow-right on" id="toggle-sidebar" aria-hidden="true">     </i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">ç›®å½•</div><div class="sidebar-toc__progress"><span class="progress-notice">ä½ å·²ç»è¯»äº†</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#ä»é›¶é…ç½®ä½ çš„Webpack"><span class="toc-number">1.</span> <span class="toc-text">ä»é›¶é…ç½®ä½ çš„Webpack</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#å‰è¨€"><span class="toc-number">1.1.</span> <span class="toc-text">å‰è¨€</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å‰æ"><span class="toc-number">1.2.</span> <span class="toc-text">å‰æ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å¼€å§‹"><span class="toc-number">1.3.</span> <span class="toc-text">å¼€å§‹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#å»ºç«‹ä¸€ä¸ªç©ºçš„æ–‡ä»¶å¤¹ğŸ“"><span class="toc-number">1.3.1.</span> <span class="toc-text">å»ºç«‹ä¸€ä¸ªç©ºçš„æ–‡ä»¶å¤¹ğŸ“</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å®‰è£…WebpackğŸ”§"><span class="toc-number">1.3.2.</span> <span class="toc-text">å®‰è£…WebpackğŸ”§</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#package-jsonå’Œpackage-lock-jsonçš„åŒºåˆ«"><span class="toc-number">1.3.2.0.1.</span> <span class="toc-text">package.jsonå’Œpackage-lock.jsonçš„åŒºåˆ«</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#æ–°å»ºé…ç½®æ–‡ä»¶ğŸ“ƒ"><span class="toc-number">1.3.3.</span> <span class="toc-text">æ–°å»ºé…ç½®æ–‡ä»¶ğŸ“ƒ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å®‰è£…React"><span class="toc-number">1.3.4.</span> <span class="toc-text">å®‰è£…React</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ä½¿ç”¨babel"><span class="toc-number">1.3.5.</span> <span class="toc-text">ä½¿ç”¨babel</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ä½¿ç”¨webpack-mergeğŸˆ´ï¸"><span class="toc-number">1.3.6.</span> <span class="toc-text">ä½¿ç”¨webpack-mergeğŸˆ´ï¸</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ä½¿ç”¨HtmlWebpackPlugin"><span class="toc-number">1.3.7.</span> <span class="toc-text">ä½¿ç”¨HtmlWebpackPlugin</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ä½¿ç”¨clean-webpack-plugin"><span class="toc-number">1.3.8.</span> <span class="toc-text">ä½¿ç”¨clean-webpack-plugin</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ä½¿ç”¨webpack-dev-server"><span class="toc-number">1.3.9.</span> <span class="toc-text">ä½¿ç”¨webpack-dev-server</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ä½¿ç”¨source-map"><span class="toc-number">1.3.10.</span> <span class="toc-text">ä½¿ç”¨source-map</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ä¸­åœºä¼‘æ¯"><span class="toc-number">1.4.</span> <span class="toc-text">ä¸­åœºä¼‘æ¯</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#é‡æ–°èµ·èˆª"><span class="toc-number">1.5.</span> <span class="toc-text">é‡æ–°èµ·èˆª</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ä½¿ç”¨css-loaderå’Œstyle-loaderä¸¤å…„å¼Ÿ"><span class="toc-number">1.5.1.</span> <span class="toc-text">ä½¿ç”¨css-loaderå’Œstyle-loaderä¸¤å…„å¼Ÿ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ä¸¤å…„å¼Ÿçš„å…³ç³»"><span class="toc-number">1.5.1.1.</span> <span class="toc-text">ä¸¤å…„å¼Ÿçš„å…³ç³»</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ä¸Šæ‰‹ï¼"><span class="toc-number">1.5.1.2.</span> <span class="toc-text">ä¸Šæ‰‹ï¼</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å®‰è£…less-loader"><span class="toc-number">1.5.2.</span> <span class="toc-text">å®‰è£…less-loader</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å®‰è£…url-loaderå’Œfile-loader"><span class="toc-number">1.5.3.</span> <span class="toc-text">å®‰è£…url-loaderå’Œfile-loader</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#è¿›é˜¶"><span class="toc-number">1.6.</span> <span class="toc-text">è¿›é˜¶</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ä½¿ç”¨uglifyjs-webpack-plugin"><span class="toc-number">1.6.1.</span> <span class="toc-text">ä½¿ç”¨uglifyjs-webpack-plugin</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ä½¿ç”¨splitChunks"><span class="toc-number">1.6.2.</span> <span class="toc-text">ä½¿ç”¨splitChunks</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ä½¿ç”¨mini-css-extract-plugin"><span class="toc-number">1.6.3.</span> <span class="toc-text">ä½¿ç”¨mini-css-extract-plugin</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ä½¿ç”¨CSS-Module"><span class="toc-number">1.6.4.</span> <span class="toc-text">ä½¿ç”¨CSS Module</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ä½¿ç”¨PostCSS"><span class="toc-number">1.6.5.</span> <span class="toc-text">ä½¿ç”¨PostCSS</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ç»“æŸ"><span class="toc-number">1.7.</span> <span class="toc-text">ç»“æŸ</span></a></li></ol></li></ol></div></div></div><div id="body-wrap"><div class="post-bg" id="nav" style="background-image: url(/image/cover/webpack.png)"><div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">Derrick</a></span><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> å½’æ¡£</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-about"></i><span> å…³äºæˆ‘</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span></span></div><div id="post-info"><div id="post-title"><div class="posttitle">ä»é›¶é…ç½®ä½ çš„Webpack</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="å‘è¡¨äº 2020-06-07 06:11:13"><i class="fa fa-calendar" aria-hidden="true"></i> å‘è¡¨äº 2020-06-07</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="æ›´æ–°äº 2020-07-15 18:48:08"><i class="fa fa-history" aria-hidden="true"></i> æ›´æ–°äº 2020-07-15</span></time><span class="post-meta__categories"><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/Webpack/">Webpack</a></span></div><div class="meta-secondline"> </div><div class="meta-thirdline"><span class="post-meta-pv-cv"><i class="fa fa-eye post-meta__icon" aria-hidden="true"> </i><span>é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-commentcount"></span></div></div></div></div><main class="layout_post" id="content-inner"><article id="post"><div id="article-container"><h1 id="ä»é›¶é…ç½®ä½ çš„Webpack"><a href="#ä»é›¶é…ç½®ä½ çš„Webpack" class="headerlink" title="ä»é›¶é…ç½®ä½ çš„Webpack"></a>ä»é›¶é…ç½®ä½ çš„Webpack</h1><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ä¸Šç¯‡æ–‡ç« ç®€å•çš„ä»‹ç»äº†ä¸€ä¸‹ï¼Œå‰ç«¯è¿›é˜¶ä¹‹è„šæ‰‹æ¶çš„æ­å»ºã€‚å…¶å®æˆ‘ä¸ªäººè®¤ä¸ºé‡è¦çš„è¿˜æ˜¯Webpackçš„é…ç½®å‡ºæ¥çš„templateï¼Œè‡³äºè„šæ‰‹æ¶çš„äº¤äº’ä½“éªŒå¯ä»¥åæœŸå»ä¼˜åŒ–ï¼Œä¹Ÿå¯ä»¥æ›´åŠ çš„ä¸ªæ€§åŒ–ã€‚ä½†æ˜¯æˆ‘ä»¬çš„æ ¸å¿ƒè¿˜æ˜¯æ”¾åœ¨Webpackç­‰ä¸€ç³»åˆ—çš„é…ç½®ä¸Šã€‚</p>
<p>è¿™ç¯‡æ–‡ç« çš„ç›®çš„</p>
<ul>
<li>å¯ä»¥ç»™è‡ªå·±ä¸€ä¸ªå›é¡¾çš„åœ°æ–¹</li>
<li>åŠ å¼ºå¯¹Webpackçš„ç†è§£ï¼Œæ¯ä¸ªçŸ¥è¯†ç‚¹éƒ½ä¼šè®¤è®¤çœŸçœŸçš„å½»æŸ¥ï¼å°½é‡è®©æ¯ä¸€æ­¥éƒ½æ˜¯éå¸¸æ¸…æ™°æ˜äº†çš„ï¼</li>
<li>å¦‚æœå¯ä»¥å¸®åŠ©åˆ°å¤§å®¶é‚£æ˜¯æ›´å¥½ä¸è¿‡äº†</li>
</ul>
<p>å¥½äº†ï¼Œæ”¶ï¼è¯ä¸å¤šè¯´å¼€å§‹ï¼</p>
<h2 id="å‰æ"><a href="#å‰æ" class="headerlink" title="å‰æ"></a>å‰æ</h2><p>ç›¸ä¿¡æ¥åˆ°è¿™é‡Œçš„å°ä¼™ä¼´ï¼Œéƒ½æ˜¯æœ‰ä¸€äº›äº›å‰ç«¯çš„ç»éªŒäº†ï¼Œè‡³äºä»€ä¹ˆnodeå®‰è£…ç¯å¢ƒå˜é‡è¿™é‡Œå°±ä¸èµ˜è¿°äº†ã€‚æœ¬äººä½¿ç”¨çš„æ˜¯mac osï¼Œå¦‚æœæ˜¯Windowsçš„å¹¶ä¸”ç¢°åˆ°é—®é¢˜çš„è¯ï¼Œå¯ä»¥ç•™è¨€ï¼Œæˆ–è€…ç›´æ¥Googleã€‚</p>
<h2 id="å¼€å§‹"><a href="#å¼€å§‹" class="headerlink" title="å¼€å§‹"></a>å¼€å§‹</h2><h3 id="å»ºç«‹ä¸€ä¸ªç©ºçš„æ–‡ä»¶å¤¹ğŸ“"><a href="#å»ºç«‹ä¸€ä¸ªç©ºçš„æ–‡ä»¶å¤¹ğŸ“" class="headerlink" title="å»ºç«‹ä¸€ä¸ªç©ºçš„æ–‡ä»¶å¤¹ğŸ“"></a>å»ºç«‹ä¸€ä¸ªç©ºçš„æ–‡ä»¶å¤¹ğŸ“</h3><p>æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œåä¸ºã€webpackInitã€‘</p>
<p>å¹¶ä¸”ä½¿ç”¨ä½ çš„ç¼–è¾‘å™¨æ‰“å¼€ä»–ï¼Œç„¶åæ‰“å¼€å‘½ä»¤è¡Œæ‰§è¡Œï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init -y</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªå‘½ä»¤æ˜¯nodeå¸®ä½ åˆå§‹åŒ–ä¸€ä¸ªé¡¹ç›®ç”¨çš„ï¼Œå¸®ä½ æ–°å»ºä¸€ä¸ª<code>package.json</code>ã€‚</p>
<p>è‡³äº<code>-y</code>æ˜¯ç”¨äºé»˜è®¤éƒ½ä»¥<strong>yes</strong>ç»§ç»­æ‰§è¡Œã€‚å¦‚æœæƒ³äº†è§£ä¸€ä¸‹é‡Œé¢åˆ°åº•æœ‰ä»€ä¹ˆçš„åŒå­¦å¯ä»¥ä¸ç”¨<em>-y</em>ç»§ç»­è·‘ä¸€éã€‚å…¶å®é‡Œé¢çš„ä¸œè¥¿åæœŸéƒ½å¯ä»¥è‡ªå·±ä¿®æ”¹<code>package.json</code>ã€‚æ‰€ä»¥ä¸éœ€è¦å¤ªåœ¨æ„ã€‚</p>
<h3 id="å®‰è£…WebpackğŸ”§"><a href="#å®‰è£…WebpackğŸ”§" class="headerlink" title="å®‰è£…WebpackğŸ”§"></a>å®‰è£…WebpackğŸ”§</h3><p>ç°åœ¨æ˜¯åŒ—äº¬æ—¶é—´ï¼š2020/06/07 06:42:49ã€‚</p>
<p>Webpack5æœ‰Betaç‰ˆï¼Œè¿™é‡Œå°±ä¸è€ƒè™‘äº†ï¼Œåç»­ä¸Šæ­£å¼ç‰ˆçš„è¯æˆ‘åº”è¯¥ä¼šå‡ºæ–°çš„æ–‡ç« ä»‹ç»ã€‚</p>
<p>å› ä¸ºæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ <code>webpack 4+</code> ç‰ˆæœ¬ï¼Œè¿˜éœ€è¦å®‰è£… <code>webpack-cli</code> ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev webpack webpack-cli</span><br></pre></td></tr></table></figure>

<p>å› ä¸ºWebpackä¸»è¦æ˜¯ç¼–è¯‘æ—¶ä½¿ç”¨æ‰€ä»¥æ”¾åˆ°â€œdevDependenciesâ€ã€‚</p>
<p>ç¡®è®¤ä¸€ä¸‹ç°åœ¨çš„ç›®å½•ç»“æ„ï¼Œä»¥é˜²æœ‰åŒå­¦æ‰é˜Ÿï¼</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">webpackInit</span><br><span class="line">  |- node_modules</span><br><span class="line">  |- package-lock.json</span><br><span class="line">  |- package.json</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œè¯´ä¸‹é¢˜å¤–è¯ã€‚</p>
<h5 id="package-jsonå’Œpackage-lock-jsonçš„åŒºåˆ«"><a href="#package-jsonå’Œpackage-lock-jsonçš„åŒºåˆ«" class="headerlink" title="package.jsonå’Œpackage-lock.jsonçš„åŒºåˆ«"></a>package.jsonå’Œpackage-lock.jsonçš„åŒºåˆ«</h5><p>package.json æ–‡ä»¶åªèƒ½é”å®šå¤§ç‰ˆæœ¬ï¼Œä¹Ÿå°±æ˜¯ç‰ˆæœ¬å·çš„ç¬¬ä¸€ä½ï¼Œå¹¶ä¸èƒ½é”å®šåé¢çš„å°ç‰ˆæœ¬ï¼Œ<code>npm install</code> éƒ½æ˜¯æ‹‰å–çš„è¯¥å¤§ç‰ˆæœ¬ä¸‹çš„æœ€æ–°çš„ç‰ˆæœ¬ï¼Œä¸ºäº†ç¨³å®šæ€§è€ƒè™‘æˆ‘ä»¬å‡ ä¹æ˜¯ä¸æ•¢éšæ„å‡çº§ä¾èµ–åŒ…çš„ï¼Œè¿™å°†å¯¼è‡´å¤šå‡ºæ¥å¾ˆå¤šå·¥ä½œé‡ï¼Œæµ‹è¯•/é€‚é…ç­‰ï¼Œæ‰€ä»¥ package-lock.json æ–‡ä»¶å‡ºæ¥äº†ï¼Œå½“ä½ æ¯æ¬¡å®‰è£…ä¸€ä¸ªä¾èµ–çš„æ—¶å€™å°±é”å®šåœ¨ä½ å®‰è£…çš„è¿™ä¸ªç‰ˆæœ¬ã€‚</p>
<p>é‚£å¦‚æœæˆ‘ä»¬å®‰è£…æ—¶çš„åŒ…æœ‰bugï¼Œåé¢éœ€è¦æ›´æ–°æ€ä¹ˆåŠï¼Ÿ</p>
<p>åœ¨ä»¥å‰å¯èƒ½å°±æ˜¯ç›´æ¥æ”¹ package.json é‡Œé¢çš„ç‰ˆæœ¬ï¼Œç„¶åå† <code>npm install</code> äº†ï¼Œä½†æ˜¯ 5 ç‰ˆæœ¬åå°±ä¸æ”¯æŒè¿™æ ·åšäº†ï¼Œå› ä¸ºç‰ˆæœ¬å·²ç»é”å®šåœ¨ package-lock.json é‡Œäº†ï¼Œæ‰€ä»¥æˆ‘ä»¬åªèƒ½ <code>npm install xxx@x.x.x</code> è¿™æ ·å»æ›´æ–°æˆ‘ä»¬çš„ä¾èµ–ï¼Œç„¶å package-lock.json ä¹Ÿèƒ½éšä¹‹æ›´æ–°ã€‚</p>
<h3 id="æ–°å»ºé…ç½®æ–‡ä»¶ğŸ“ƒ"><a href="#æ–°å»ºé…ç½®æ–‡ä»¶ğŸ“ƒ" class="headerlink" title="æ–°å»ºé…ç½®æ–‡ä»¶ğŸ“ƒ"></a>æ–°å»ºé…ç½®æ–‡ä»¶ğŸ“ƒ</h3><p>æˆ‘ä»¬åœ¨æ ¹ç›®å½•æ–°å»ºæ–‡ä»¶å¤¹ã€configã€‘ç”¨äºå­˜å‚¨ä¸€äº›ç›¸å…³çš„é…ç½®æ–‡ä»¶ï¼Œç„¶ååœ¨ã€configã€‘é‡Œé¢æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ã€webpackã€‘è¡¨ç¤ºï¼Œä¸“é—¨ç”¨äºå­˜å‚¨webpackçš„é…ç½®æ–‡ä»¶ã€‚ç„¶ååœ¨ã€webpackã€‘è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹é¢æ–°å»ºæ–‡ä»¶ã€webpack.common.config.jsã€‘</p>
<p>å¹¶æ•²å…¥ä»¥ä¸‹ä»£ç </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">// é…ç½®å…¥å£æ–‡ä»¶</span></span><br><span class="line">  entry: &#123;</span><br><span class="line">    app: <span class="string">'./src/index.js'</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// æ‰“åŒ…ğŸ“¦ä¹‹åçš„å‡ºå£</span></span><br><span class="line">  output: &#123;</span><br><span class="line">    <span class="comment">// å¦‚æœä¸åŠ å“ˆå¸Œå€¼ï¼Œæµè§ˆå™¨ä¼šæœ‰ç¼“å­˜ï¼Œå¯èƒ½ä½ éƒ¨ç½²äº†ï¼Œä½†æ˜¯ç”¨æˆ·çœ‹åˆ°çš„è¿˜æ˜¯è€é¡µé¢</span></span><br><span class="line">    <span class="comment">// 8æ˜¯hashçš„é•¿åº¦ï¼Œå¦‚æœä¸è®¾ç½®ï¼Œwebpackä¼šè®¾ç½®é»˜è®¤å€¼ä¸º20ã€‚</span></span><br><span class="line">    filename: <span class="string">'js/[name].[chunkhash:8].bundle.js'</span>,</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Node.js ä¸­ï¼Œ__dirname æ€»æ˜¯æŒ‡å‘è¢«æ‰§è¡Œ js æ–‡ä»¶çš„ç»å¯¹è·¯å¾„ï¼Œ</span></span><br><span class="line"><span class="comment">     * æ‰€ä»¥å½“ä½ åœ¨ /d1/d2/myscript.js æ–‡ä»¶ä¸­å†™äº† __dirnameï¼Œ å®ƒçš„å€¼å°±æ˜¯ /d1/d2 ã€‚</span></span><br><span class="line"><span class="comment">     * path.resolve</span></span><br><span class="line"><span class="comment">     * 1.path.resolve()æ–¹æ³•å¯ä»¥å°†è·¯å¾„æˆ–è€…è·¯å¾„ç‰‡æ®µè§£ææˆç»å¯¹è·¯å¾„</span></span><br><span class="line"><span class="comment">     * 2.ä¼ å…¥è·¯å¾„ä»å³è‡³å·¦è§£æï¼Œé‡åˆ°ç¬¬ä¸€ä¸ªç»å¯¹è·¯å¾„æ˜¯å®Œæˆè§£æï¼Œä¾‹å¦‚path.resolve('/foo', '/bar', 'baz') å°†è¿”å› /bar/baz</span></span><br><span class="line"><span class="comment">     * 3.å¦‚æœä¼ å…¥çš„ç»å¯¹è·¯å¾„ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆå½“å‰ç›®å½•å°†è¢«ä½¿ç”¨</span></span><br><span class="line"><span class="comment">     * 4.å½“ä¼ å…¥çš„å‚æ•°æ²¡æœ‰/æ—¶ï¼Œå°†è¢«ä¼ å…¥è§£æåˆ°å½“å‰æ ¹ç›®å½•</span></span><br><span class="line"><span class="comment">     * 5.é›¶é•¿åº¦çš„è·¯å¾„å°†è¢«å¿½ç•¥</span></span><br><span class="line"><span class="comment">     * 6.å¦‚æœæ²¡æœ‰ä¼ å…¥å‚æ•°ï¼Œå°†è¿”å›å½“å‰æ ¹ç›®å½•</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * _dirnameè¡¨ç¤ºç»å¯¹è·¯å¾„</span></span><br><span class="line"><span class="comment">     * æˆ‘ä»¬ç¢°åˆ°çš„./xxå°±æ˜¯ç›¸å¯¹è·¯å¾„</span></span><br><span class="line"><span class="comment">     * 1.åªä¼ å…¥__dirnameä¹Ÿå¯ä»¥è‡ªåŠ¨è°ƒç”¨path.resolveæ–¹æ³•</span></span><br><span class="line"><span class="comment">     * 2.å¯ä»¥æ‹¼æ¥è·¯å¾„å­—ç¬¦ä¸²ï¼Œä½†æ˜¯ä¸è°ƒç”¨path.resolve()æ–¹æ³•æ‹¼æ¥å¤±è´¥</span></span><br><span class="line"><span class="comment">     * 3.__dirnameä»£è¡¨çš„æ˜¯å½“å‰æ–‡ä»¶ï¼ˆa.jsï¼‰çš„ç»å¯¹è·¯å¾„</span></span><br><span class="line"><span class="comment">     * 4.ä»å³è‡³å·¦è§£æï¼Œé‡åˆ°äº†ç»å¯¹è·¯å¾„/srcï¼Œå› æ­¤ç›´æ¥è¿”</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    path: path.resolve(__dirname, <span class="string">'../../dist'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>webpack é…ç½®æ˜¯æ ‡å‡†çš„ Node.jsçš„CommonJS æ¨¡å—ï¼Œå®ƒé€šè¿‡requireæ¥å¼•å…¥å…¶ä»–æ¨¡å—ï¼Œé€šè¿‡module.exportså¯¼å‡ºæ¨¡å—ï¼Œç”± webpack æ ¹æ®å¯¹è±¡å®šä¹‰çš„å±æ€§è¿›è¡Œè§£æã€‚</p>
</blockquote>
<p>åœ¨æ ¹ç›®å½•æ–°å»ºã€srcã€‘æ–‡ä»¶å¤¹ğŸ“</p>
<p>åœ¨ã€srcã€‘æ–‡ä»¶å¤¹ä¸‹æ–°å»ºæ–‡ä»¶index.js</p>
<p>okğŸ‘Œï¼Œç¡®è®¤ä¸€ä¸‹ç›®å½•ç»“æ„</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">webpackInit</span><br><span class="line"><span class="addition">+ |- config</span></span><br><span class="line"><span class="addition">+ 	|- webpack</span></span><br><span class="line"><span class="addition">+     |- webpack.common.config.js</span></span><br><span class="line">  |- node_modules</span><br><span class="line"><span class="addition">+ |- src</span></span><br><span class="line"><span class="addition">+     |- index.js</span></span><br><span class="line">  |- package.json</span><br><span class="line">  |- package-lock.json</span><br></pre></td></tr></table></figure>

<p>é‚£æˆ‘ä»¬æ€ä¹ˆæ‰“åŒ…å‘¢ï¼Ÿåœ¨ <code>package.json</code> ä¸­é…ç½®å¦‚ä¸‹å±æ€§ï¼š</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">"scripts": &#123;</span><br><span class="line"><span class="deletion">- "test": "echo \"Error: no test specified\" &amp;&amp; exit 1",</span></span><br><span class="line"><span class="addition">+ "start": "webpack --config ./config/webpack/webpack.common.config.js"</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>å¥½äº†ï¼Œæˆ‘ä»¬è¯•è¯•æ€ä¹ˆæ‰“åŒ…å§ï¼Œè™½ç„¶ä½ çš„ <code>index.js</code> ä¸­ä»€ä¹ˆä»£ç ä¹Ÿæ²¡æœ‰ã€‚<br>åœ¨æ§åˆ¶å°ä¸­è¾“å…¥ä»¥ä¸‹ä»£ç ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run start</span><br></pre></td></tr></table></figure>

<p>npm run xxxx ä¼šå»æ‰§è¡Œå½“å‰ç›®å½•ä¸‹package.jsoné‡Œé¢çš„scriptåŒåè„šæœ¬</p>
<p>æˆ‘ä»¬çš„ã€npm run startã€‘ç›¸å½“äºç›´æ¥æ‰§è¡Œäº†æˆ‘ä»¬å†™åœ¨ã€startã€‘é‡Œé¢çš„ä»£ç ã€‚</p>
<p>æ‰§è¡Œä¹‹åï¼Œä½ ä¼šå‘ç°æ ¹ç›®å½•å¤šå‡ºäº†ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼š <code>dist/js</code> ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªjsæ–‡ä»¶ï¼š <code>bundle.js</code> ï¼Œé‚£ä¹ˆè‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»æˆåŠŸç¼–è¯‘æ‰“åŒ…äº†ä¸€ä¸ªjsæ–‡ä»¶ï¼Œå³å…¥å£æ–‡ä»¶ï¼š <code>index.js</code> ã€‚</p>
<h3 id="å®‰è£…React"><a href="#å®‰è£…React" class="headerlink" title="å®‰è£…React"></a>å®‰è£…React</h3><p>åœ¨æ§åˆ¶å°è¾“å…¥ä»¥ä¸‹ä»£ç ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save react react-dom</span><br></pre></td></tr></table></figure>

<p>â€“saveå°±æ˜¯è¿è¡Œæ—¶ä¼šç”¨åˆ°çš„ä»£ç </p>
<p>å…·ä½“å’Œâ€“dev-saveçš„åŒºåˆ«å¯ä»¥è‡ªå·±Googleä¸€ä¸‹</p>
<p>åœ¨ã€src/index.jsã€‘é‡Œé¢åŠ å…¥ä»¥ä¸‹ä»£ç </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> App = <span class="function"><span class="params">()</span> =&gt;</span> (</span><br><span class="line">  &lt;&gt;</span><br><span class="line">    Hello Worldï¼</span><br><span class="line">  &lt;<span class="regexp">/&gt;</span></span><br><span class="line"><span class="regexp">)</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">ReactDOM.render(&lt;App /</span>&gt;, <span class="built_in">document</span>.getElementById(<span class="string">'root'</span>));</span><br></pre></td></tr></table></figure>

<p>åœ¨æ ¹ç›®å½•åŠ å…¥æ–‡ä»¶å¤¹ã€publicã€‘ï¼Œç„¶ååœ¨ã€publicã€‘é‡Œé¢åŠ å…¥ã€index.htmlã€‘</p>
<p>ç›®å½•å¦‚ä¸‹ï¼š</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">webpackInit</span><br><span class="line"><span class="addition">+ |- public</span></span><br><span class="line"><span class="addition">+ 	|- index.html</span></span><br><span class="line">  |- config</span><br><span class="line">  	|- webpack</span><br><span class="line">      |- webpack.common.config.js</span><br><span class="line">  |- node_modules</span><br><span class="line">  |- src</span><br><span class="line">      |- index.js</span><br><span class="line">  |- package.json</span><br><span class="line">  |- package-lock.json</span><br></pre></td></tr></table></figure>

<p>ç„¶ååœ¨ã€index.htmlã€‘åŠ å…¥ä»¥ä¸‹ä»£ç ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"initial-scale=1.0, user-scalable=no, width=device-width"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>ä»é›¶é…ç½®Webpack<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"root"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>OK</p>
<p>ä¸‡äº‹ä¿±å¤‡ï¼Œæˆ‘ä»¬è¿è¡Œï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run start</span><br></pre></td></tr></table></figure>

<p>æ‰“åŒ…å¤±è´¥äº†ã€‚ã€‚ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p>
<h3 id="ä½¿ç”¨babel"><a href="#ä½¿ç”¨babel" class="headerlink" title="ä½¿ç”¨babel"></a>ä½¿ç”¨babel</h3><p>ä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸Šé¢å†™jsxä¼šæ‰“åŒ…ä¸äº†å‘¢ï¼Œå› ä¸ºwebpackæ ¹æœ¬è¯†åˆ«ä¸äº†jsxè¯­æ³•ï¼Œé‚£æ€ä¹ˆåŠï¼Ÿä½¿ç”¨loaderå¯¹æ–‡ä»¶è¿›è¡Œé¢„å¤„ç†ã€‚<br>å…¶ä¸­ï¼Œbabel-loaderï¼Œå°±æ˜¯è¿™æ ·ä¸€ä¸ªé¢„å¤„ç†æ’ä»¶ï¼Œå®ƒåŠ è½½ ES2015+ ä»£ç ï¼Œç„¶åä½¿ç”¨ Babel è½¬è¯‘ä¸º ES5ã€‚é‚£å¼€å§‹é…ç½®å®ƒå§ï¼</p>
<p>é¦–å…ˆå®‰è£…babelç›¸å…³çš„æ¨¡å—ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev babel-loader @babel&#x2F;preset-react @babel&#x2F;preset-env @babel&#x2F;core babel-plugin-import</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>babel-loaderï¼š</strong>ä½¿ç”¨Babelå’Œwebpackæ¥è½¬è¯‘JavaScriptæ–‡ä»¶ã€‚</li>
<li><strong>@babel/preset-reactï¼š</strong>è½¬è¯‘reactçš„JSX</li>
<li><strong>@babel/preset-envï¼š</strong>è½¬è¯‘ES2015+çš„è¯­æ³•</li>
<li><strong>@babel/coreï¼š</strong>babelçš„æ ¸å¿ƒæ¨¡å—</li>
<li><strong>babel-plugin-import</strong>ï¼šæŒ‰éœ€åŠ è½½æ‰€éœ€è¦çš„babelè§£æ</li>
</ul>
<p>ç†è®ºä¸Šæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨ <code>webpack.common.config.js</code> ä¸­é…ç½®â€optionsâ€ï¼Œä½†æœ€å¥½åœ¨å½“å‰æ ¹ç›®å½•ï¼Œæ³¨æ„ï¼Œä¸€å®šè¦æ˜¯æ ¹ç›®å½•ï¼ï¼ï¼ æ–°å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶ <code>.babelrc</code> é…ç½®ç›¸å…³çš„â€presetsâ€ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">"presets"</span>: [</span><br><span class="line">    [</span><br><span class="line">      <span class="string">"@babel/preset-env"</span>,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">"targets"</span>: &#123;</span><br><span class="line">          <span class="comment">// å¤§äºç›¸å…³æµè§ˆå™¨ç‰ˆæœ¬æ— éœ€ç”¨åˆ° preset-env</span></span><br><span class="line">          <span class="string">"edge"</span>: <span class="number">17</span>,</span><br><span class="line">          <span class="string">"firefox"</span>: <span class="number">60</span>,</span><br><span class="line">          <span class="string">"chrome"</span>: <span class="number">67</span>,</span><br><span class="line">          <span class="string">"safari"</span>: <span class="number">11</span>,</span><br><span class="line">          <span class="comment">// å…¼å®¹åˆ°android4 ios6</span></span><br><span class="line">          <span class="string">"browsers"</span>: [<span class="string">"Android &gt;= 4.0"</span>, <span class="string">"ios &gt;= 6"</span>]</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">"@babel/preset-react"</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="string">"plugins"</span>: [</span><br><span class="line">    [<span class="string">"import"</span>, &#123; <span class="string">"libraryName"</span>: <span class="string">"antd-mobile"</span>, <span class="string">"style"</span>: <span class="string">"css"</span> &#125;] <span class="comment">// `style: true` ä¼šåŠ è½½ less æ–‡ä»¶</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œæœ‰å…³<a href="https://www.babeljs.cn/docs/babel-preset-env" target="_blank" rel="noopener">bebelçš„é…ç½®</a>å¯ä¸Šå®˜ç½‘æŸ¥è¯¢æ–‡æ¡£ã€‚</p>
<p>å†ä¿®æ”¹ <code>webpack.common.config.js</code> ï¼Œæ·»åŠ å¦‚ä¸‹ä»£ç ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">// é…ç½®å…¥å£æ–‡ä»¶</span></span><br><span class="line">  entry: &#123;</span><br><span class="line">    app: <span class="string">'./src/index.js'</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// æ‰“åŒ…ğŸ“¦ä¹‹åçš„å‡ºå£</span></span><br><span class="line">  output: &#123;</span><br><span class="line">    <span class="comment">// å¦‚æœä¸åŠ å“ˆå¸Œå€¼ï¼Œæµè§ˆå™¨ä¼šæœ‰ç¼“å­˜ï¼Œå¯èƒ½ä½ éƒ¨ç½²äº†ï¼Œä½†æ˜¯ç”¨æˆ·çœ‹åˆ°çš„è¿˜æ˜¯è€é¡µé¢</span></span><br><span class="line">    <span class="comment">// 8æ˜¯hashçš„é•¿åº¦ï¼Œå¦‚æœä¸è®¾ç½®ï¼Œwebpackä¼šè®¾ç½®é»˜è®¤å€¼ä¸º20ã€‚</span></span><br><span class="line">    filename: <span class="string">'js/[name].[chunkhash:8].bundle.js'</span>,</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Node.js ä¸­ï¼Œ__dirname æ€»æ˜¯æŒ‡å‘è¢«æ‰§è¡Œ js æ–‡ä»¶çš„ç»å¯¹è·¯å¾„ï¼Œ</span></span><br><span class="line"><span class="comment">     * æ‰€ä»¥å½“ä½ åœ¨ /d1/d2/myscript.js æ–‡ä»¶ä¸­å†™äº† __dirnameï¼Œ å®ƒçš„å€¼å°±æ˜¯ /d1/d2 ã€‚</span></span><br><span class="line"><span class="comment">     * path.resolve</span></span><br><span class="line"><span class="comment">     * 1.path.resolve()æ–¹æ³•å¯ä»¥å°†è·¯å¾„æˆ–è€…è·¯å¾„ç‰‡æ®µè§£ææˆç»å¯¹è·¯å¾„</span></span><br><span class="line"><span class="comment">     * 2.ä¼ å…¥è·¯å¾„ä»å³è‡³å·¦è§£æï¼Œé‡åˆ°ç¬¬ä¸€ä¸ªç»å¯¹è·¯å¾„æ˜¯å®Œæˆè§£æï¼Œä¾‹å¦‚path.resolve('/foo', '/bar', 'baz') å°†è¿”å› /bar/baz</span></span><br><span class="line"><span class="comment">     * 3.å¦‚æœä¼ å…¥çš„ç»å¯¹è·¯å¾„ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆå½“å‰ç›®å½•å°†è¢«ä½¿ç”¨</span></span><br><span class="line"><span class="comment">     * 4.å½“ä¼ å…¥çš„å‚æ•°æ²¡æœ‰/æ—¶ï¼Œå°†è¢«ä¼ å…¥è§£æåˆ°å½“å‰æ ¹ç›®å½•</span></span><br><span class="line"><span class="comment">     * 5.é›¶é•¿åº¦çš„è·¯å¾„å°†è¢«å¿½ç•¥</span></span><br><span class="line"><span class="comment">     * 6.å¦‚æœæ²¡æœ‰ä¼ å…¥å‚æ•°ï¼Œå°†è¿”å›å½“å‰æ ¹ç›®å½•</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * _dirnameè¡¨ç¤ºç»å¯¹è·¯å¾„</span></span><br><span class="line"><span class="comment">     * æˆ‘ä»¬ç¢°åˆ°çš„./xxå°±æ˜¯ç›¸å¯¹è·¯å¾„</span></span><br><span class="line"><span class="comment">     * 1.åªä¼ å…¥__dirnameä¹Ÿå¯ä»¥è‡ªåŠ¨è°ƒç”¨path.resolveæ–¹æ³•</span></span><br><span class="line"><span class="comment">     * 2.å¯ä»¥æ‹¼æ¥è·¯å¾„å­—ç¬¦ä¸²ï¼Œä½†æ˜¯ä¸è°ƒç”¨path.resolve()æ–¹æ³•æ‹¼æ¥å¤±è´¥</span></span><br><span class="line"><span class="comment">     * 3.__dirnameä»£è¡¨çš„æ˜¯å½“å‰æ–‡ä»¶ï¼ˆa.jsï¼‰çš„ç»å¯¹è·¯å¾„</span></span><br><span class="line"><span class="comment">     * 4.ä»å³è‡³å·¦è§£æï¼Œé‡åˆ°äº†ç»å¯¹è·¯å¾„/srcï¼Œå› æ­¤ç›´æ¥è¿”</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    path: path.resolve(__dirname, <span class="string">'../../dist'</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * test è§„å®šäº†ä½œç”¨äºä»¥è§„åˆ™ä¸­åŒ¹é…åˆ°çš„åç¼€ç»“å°¾çš„æ–‡ä»¶ï¼Œ </span></span><br><span class="line"><span class="comment">     * use å³æ˜¯ä½¿ç”¨ babel-loader å¿…é¡»çš„å±æ€§ï¼Œ </span></span><br><span class="line"><span class="comment">     * exclude å‘Šè¯‰æˆ‘ä»¬ä¸éœ€è¦å»è½¬è¯‘"node_modules"è¿™é‡Œé¢çš„æ–‡ä»¶ã€‚</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    rules:[</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.(js|jsx)?$/</span>,</span><br><span class="line">        <span class="comment">// å¼€å¯ç¼“å­˜</span></span><br><span class="line">        options: &#123; <span class="attr">cacheDirectory</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">        loader: <span class="string">'babel-loader'</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ¥ä¸‹æ¥æ¿€åŠ¨äººå¿ƒçš„æ—¶åˆ»ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run start</span><br></pre></td></tr></table></figure>

<p>æ˜¯ä¸æ˜¯èƒ½æ‰“åŒ…æˆåŠŸäº†å‘¢ï¼Ÿ</p>
<p>æ‰“å¼€ã€dist/ã€‘ä½ çš„htmlé¡µé¢ï¼Œçœ‹ä¸€ä¸‹æ˜¯å¦æ˜¯â€œHello Worldï¼â€å§ï¼</p>
<h3 id="ä½¿ç”¨webpack-mergeğŸˆ´ï¸"><a href="#ä½¿ç”¨webpack-mergeğŸˆ´ï¸" class="headerlink" title="ä½¿ç”¨webpack-mergeğŸˆ´ï¸"></a>ä½¿ç”¨webpack-mergeğŸˆ´ï¸</h3><p>æˆ‘ä»¬å°†ä½¿ç”¨ä¸€ä¸ªåä¸º <a href="https://github.com/survivejs/webpack-merge" target="_blank" rel="noopener">webpack-merge</a> çš„å·¥å…·ã€‚é€šè¿‡â€œé€šç”¨â€é…ç½®ï¼Œæˆ‘ä»¬ä¸å¿…åœ¨ç¯å¢ƒç‰¹å®š(environment-specific)çš„é…ç½®ä¸­é‡å¤ä»£ç ã€‚ç®€å•æ¥è¯´å°±æ˜¯ç”Ÿäº§ç¯å¢ƒä¸åŒï¼Œæˆ‘ä»¬è¦ç»™çš„é…ç½®ä¹Ÿæœ‰æ‰€ä¸åŒï¼Œä½†æ˜¯å¯ä»¥å…±ç”¨ä¸€ä¸ªå…±æœ‰çš„é…ç½®ã€‚</p>
<p>æˆ‘ä»¬å…ˆä»å®‰è£… <a href="https://github.com/survivejs/webpack-merge" target="_blank" rel="noopener">webpack-merge</a> å¼€å§‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev webpack-merge</span><br></pre></td></tr></table></figure>

<p>å®‰è£…ç»“æŸä¹‹åï¼Œæˆ‘ä»¬åœ¨ <code>config</code> è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹æ–°å»ºä¸¤ä¸ªæ–‡ä»¶ï¼Œåˆ†åˆ«ä¸º <code>webpack.prod.config.js</code> å’Œ <code>webpack.dev.config.js</code> ï¼Œè¿™ä¸¤ä¸ªæ–‡ä»¶åˆ†åˆ«å¯¹åº”ç”Ÿäº§å’Œå¼€å‘ä¸¤ä¸ªç¯å¢ƒçš„é…ç½®ã€‚å½“ç„¶ä½ ä¹Ÿå¯ä»¥æ·»åŠ testç¯å¢ƒã€‚åå­—ä¹Ÿå¯ä»¥è‡ªå·±å–ï¼Œå°½é‡ä¿æŒä¸€è‡´ã€‚</p>
<p>ç°åœ¨çš„ç›®å½•ç»“æ„ï¼š</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">  webpackInit</span><br><span class="line">	|- config</span><br><span class="line">		|- webpack</span><br><span class="line">	    |- webpack.common.config.js</span><br><span class="line"><span class="addition">+     |- webpack.prod.config.js</span></span><br><span class="line">  çœç•¥</span><br></pre></td></tr></table></figure>

<p>åœ¨ã€webpack.prod.config.jsã€‘åŠ å…¥</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> merge = <span class="built_in">require</span>(<span class="string">'webpack-merge'</span>); <span class="comment">// ç‰ˆæœ¬ä¸º4.x</span></span><br><span class="line"><span class="comment">// webpack-merge 5.xç‰ˆæœ¬åº”è¯¥æ”¹ä¸º const &#123; merge &#125; = require('webpack-merge');</span></span><br><span class="line"><span class="keyword">const</span> common = <span class="built_in">require</span>(<span class="string">'./webpack.common.config.js'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = merge(common, &#123;</span><br><span class="line">  mode: <span class="string">'production'</span>,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>ç„¶åä¿®æ”¹ã€package.jsonã€‘</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  "name": "webpackInit",</span><br><span class="line">  "version": "1.0.0",</span><br><span class="line">  "description": "",</span><br><span class="line">  "main": "index.js",</span><br><span class="line">  "scripts": &#123;</span><br><span class="line">    "start": "webpack --config ./config/webpack/webpack.common.config.js",</span><br><span class="line"><span class="addition">+   "build": "webpack --config ./config/webpack/webpack.prod.config.js"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  "keywords": [],</span><br><span class="line">  "author": "",</span><br><span class="line">  "license": "ISC",</span><br><span class="line">  "devDependencies": &#123;</span><br><span class="line">    "@babel/core": "^7.10.2",</span><br><span class="line">    "@babel/preset-env": "^7.10.2",</span><br><span class="line">    "@babel/preset-react": "^7.10.1",</span><br><span class="line">    "babel-loader": "^8.1.0",</span><br><span class="line">    "babel-plugin-import": "^1.13.0",</span><br><span class="line">    "webpack": "^4.43.0",</span><br><span class="line">    "webpack-cli": "^3.3.11",</span><br><span class="line">    "webpack-merge": "^4.2.2"</span><br><span class="line">  &#125;,</span><br><span class="line">  "dependencies": &#123;</span><br><span class="line">    "react": "^16.13.1",</span><br><span class="line">    "react-dom": "^16.13.1"</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç„¶å</p>
<p>åˆ é™¤ã€distæ–‡ä»¶å¤¹ã€‘</p>
<p>ä¹‹å</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run build</span><br></pre></td></tr></table></figure>

<p>æ˜¯ä¸æ˜¯ä¹Ÿbuildä¹Ÿæ‰“åŒ…æˆåŠŸäº†ï¼</p>
<p>htmlæ˜¯ä¸æ˜¯ä¹Ÿå¯ä»¥æ­£å¸¸è®¿é—®ï¼</p>
<p>ä½†æ˜¯æ²¡æœ‰æ˜¾ç¤ºHello Worldï¼Œä»”ç»†ä¸€çœ‹è¿˜æŠ¥é”™äº†ã€‚ã€‚ã€‚ä¸ºä»€ä¹ˆå‘¢ã€‚ã€‚å› ä¸º</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; å¦‚æœä¸åŠ å“ˆå¸Œå€¼ï¼Œæµè§ˆå™¨ä¼šæœ‰ç¼“å­˜ï¼Œå¯èƒ½ä½ éƒ¨ç½²äº†ï¼Œä½†æ˜¯ç”¨æˆ·çœ‹åˆ°çš„è¿˜æ˜¯è€é¡µé¢</span><br><span class="line">    &#x2F;&#x2F; 8æ˜¯hashçš„é•¿åº¦ï¼Œå¦‚æœä¸è®¾ç½®ï¼Œwebpackä¼šè®¾ç½®é»˜è®¤å€¼ä¸º20ã€‚</span><br><span class="line">    filename: &#39;js&#x2F;[name].[chunkhash:8].bundle.js&#39;,</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬ç»™jsæ–‡ä»¶è®¾ç½®äº†hashå€¼ã€‚ä¸èƒ½å¤Ÿç›´æ¥åœ¨htmlé‡Œé¢åŠ ä¸Šã€<script src="../dist/js/bundle.js"></script>ã€‘è¿™ä¹ˆä¸€å¥ï¼Œè€Œä¸”æ¯æ¬¡ç”Ÿæˆçš„hashå€¼éƒ½ä¼šå˜ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¦æ€ä¹ˆå¤„ç†è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ</p>
<h3 id="ä½¿ç”¨HtmlWebpackPlugin"><a href="#ä½¿ç”¨HtmlWebpackPlugin" class="headerlink" title="ä½¿ç”¨HtmlWebpackPlugin"></a>ä½¿ç”¨<a href="https://www.webpackjs.com/plugins/html-webpack-plugin/" target="_blank" rel="noopener">HtmlWebpackPlugin</a></h3><p>å®‰è£…<a href="https://www.webpackjs.com/plugins/html-webpack-plugin/" target="_blank" rel="noopener">HtmlWebpackPlugin</a></p>
<p>åœ¨æ§åˆ¶å°æ‰§è¡Œä»¥ä¸‹ä»£ç ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev html-webpack-plugin</span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹ã€webpack.prod.config.jsã€‘</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> merge = <span class="built_in">require</span>(<span class="string">'webpack-merge'</span>); <span class="comment">// ç‰ˆæœ¬ä¸º4.x</span></span><br><span class="line"><span class="comment">// webpack-merge 5.xç‰ˆæœ¬åº”è¯¥æ”¹ä¸º const &#123; merge &#125; = require('webpack-merge');</span></span><br><span class="line"><span class="keyword">const</span> common = <span class="built_in">require</span>(<span class="string">'./webpack.common.config.js'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = merge(common, &#123;</span><br><span class="line">  mode: <span class="string">'production'</span>,</span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">      filename: <span class="string">'index.html'</span>, <span class="comment">// æ‰“åŒ…ä¹‹åçš„htmlæ–‡ä»¶åå­—</span></span><br><span class="line">      <span class="comment">// è¿™é‡Œæœ‰å°ä¼™ä¼´å¯èƒ½ä¼šç–‘æƒ‘ä¸ºä»€ä¹ˆä¸æ˜¯ '../public/index.html'</span></span><br><span class="line">      <span class="comment">// æˆ‘çš„ç†è§£æ˜¯æ— è®ºä¸è¦ç”¨çš„templateæ˜¯ä¸æ˜¯åœ¨ä¸€ä¸ªç›®å½•ï¼Œéƒ½æ˜¯ä»æ ¹è·¯å¾„å¼€å§‹æŸ¥æ‰¾</span></span><br><span class="line">      template: <span class="string">'public/index.html'</span>, <span class="comment">// ä»¥æˆ‘ä»¬è‡ªå·±å®šä¹‰çš„htmlä¸ºæ¨¡æ¿ç”Ÿæˆï¼Œä¸ç„¶æˆ‘ä»¬è¿˜è¦åˆ°æ‰“åŒ…ä¹‹åçš„htmlæ–‡ä»¶ä¸­å†™script</span></span><br><span class="line">      inject: <span class="string">'body'</span>,<span class="comment">// åœ¨bodyæœ€åº•éƒ¨å¼•å…¥jsæ–‡ä»¶ï¼Œå¦‚æœæ˜¯headï¼Œå°±æ˜¯åœ¨headä¸­å¼•å…¥js</span></span><br><span class="line">      minify: &#123; <span class="comment">// å‹ç¼©htmlæ–‡ä»¶</span></span><br><span class="line">        removeComments: <span class="literal">true</span>, <span class="comment">// å»é™¤æ³¨é‡Š</span></span><br><span class="line">        collapseWhitespace: <span class="literal">true</span>, <span class="comment">// å»é™¤ç©ºæ ¼</span></span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>



<p>ç°åœ¨æˆ‘ä»¬å†æ¥æ‰“åŒ…è¯•è¯•</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run build</span><br></pre></td></tr></table></figure>

<p>çœ‹çœ‹distä¸­æ˜¯ä¸æ˜¯å¤šå‡ºäº†htmlæ–‡ä»¶ï¼Œå¹¶ä¸”è‡ªåŠ¨å¼•å…¥äº†scriptï¼Œç”¨æµè§ˆå™¨æ‰“å¼€å®ƒè¯•è¯•çœ‹æ˜¯ä¸æ˜¯èƒ½æ­£ç¡®è¾“å‡ºå†…å®¹äº†ï¼</p>
<p>èµ·é£ï¼ï¼ğŸ›«ï¸</p>
<h3 id="ä½¿ç”¨clean-webpack-plugin"><a href="#ä½¿ç”¨clean-webpack-plugin" class="headerlink" title="ä½¿ç”¨clean-webpack-plugin"></a>ä½¿ç”¨clean-webpack-plugin</h3><p>æœ‰äº›åŒå­¦å·²ç»åŒå€¦äº†æ¯æ¬¡éƒ½éœ€è¦åˆ é™¤distæ–‡ä»¶å¤¹æ¥éªŒè¯æ˜¯å¦æˆåŠŸã€‚</p>
<p>å…¶å®å‡å¦‚æˆ‘ä»¬ä¸åˆ é™¤çš„è¯ï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹jsæ–‡ä»¶ï¼Œè¿™æ ·è®©webpackçŸ¥é“æˆ‘ä»¬æ”¹äº†ä¸œè¥¿ï¼Œä»–å°±ä¼šé‡æ–°æ‰“åŒ…ï¼Œä½†æ˜¯æˆ‘ä»¬æ¯æ¬¡æµ‹è¯•éƒ½æ²¡æœ‰å»ä¿®æ”¹ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åˆ é™¤ã€‚</p>
<p>ä½†æ˜¯ï¼Œå¦‚æœè¯´æˆ‘ä»¬ä¸å»åˆ é™¤distæ–‡ä»¶å¤¹çš„è¯ï¼Œæˆ‘ä»¬ä¿®æ”¹äº†ã€src/index.jsã€‘ã€‚ç„¶åå†é‡æ–°buildï¼Œå°±ä¼šå‘ç°ã€dist/jsã€‘ä¸‹é¢ä¼šåˆå¤šå‡ºä¸€ä¸ªjsæ–‡ä»¶ï¼Œè¿™æ ·çš„è¯æˆ‘ä»¬å°±éœ€è¦è§‚å¯Ÿæ—¥å¿—ï¼ŒæŸ¥çœ‹æ–°é²œâ€œå‡ºç‚‰â€çš„æ˜¯å“ªä¸€ä¸ªï¼Œç„¶ååˆ æ‰åˆ«çš„ã€‚è¿™æ ·éå¸¸éº»çƒ¦ã€‚</p>
<p>OKï¼Œæˆ‘ä»¬ç°åœ¨å°±æ¥è§£å†³ä¸€ä¸‹è¿™ä¸ªé—®é¢˜</p>
<p>å®‰è£…clean-webpack-plugin</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev clean-webpack-plugin</span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹ã€webpck.prod.config.jsã€‘</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">const merge = require('webpack-merge'); // ç‰ˆæœ¬ä¸º4.x</span><br><span class="line">// webpack-merge 5.xç‰ˆæœ¬åº”è¯¥æ”¹ä¸º const &#123; merge &#125; = require('webpack-merge');</span><br><span class="line">const common = require('./webpack.common.config.js');</span><br><span class="line"></span><br><span class="line">const HtmlWebpackPlugin = require('html-webpack-plugin');</span><br><span class="line"><span class="addition">+ const &#123; CleanWebpackPlugin &#125; = require('clean-webpack-plugin');</span></span><br><span class="line"></span><br><span class="line">module.exports = merge(common, &#123;</span><br><span class="line">  mode: 'production',</span><br><span class="line">  plugins: [</span><br><span class="line">    new HtmlWebpackPlugin(&#123;</span><br><span class="line">      filename: 'index.html', // æ‰“åŒ…ä¹‹åçš„htmlæ–‡ä»¶åå­—</span><br><span class="line">      // è¿™é‡Œæœ‰å°ä¼™ä¼´å¯èƒ½ä¼šç–‘æƒ‘ä¸ºä»€ä¹ˆä¸æ˜¯ '../public/index.html'</span><br><span class="line">      // æˆ‘çš„ç†è§£æ˜¯æ— è®ºä¸è¦ç”¨çš„templateæ˜¯ä¸æ˜¯åœ¨ä¸€ä¸ªç›®å½•ï¼Œéƒ½æ˜¯ä»æ ¹è·¯å¾„å¼€å§‹æŸ¥æ‰¾</span><br><span class="line">      template: 'public/index.html', // ä»¥æˆ‘ä»¬è‡ªå·±å®šä¹‰çš„htmlä¸ºæ¨¡æ¿ç”Ÿæˆï¼Œä¸ç„¶æˆ‘ä»¬è¿˜è¦åˆ°æ‰“åŒ…ä¹‹åçš„htmlæ–‡ä»¶ä¸­å†™script</span><br><span class="line">      inject: 'body',// åœ¨bodyæœ€åº•éƒ¨å¼•å…¥jsæ–‡ä»¶ï¼Œå¦‚æœæ˜¯headï¼Œå°±æ˜¯åœ¨headä¸­å¼•å…¥js</span><br><span class="line">      minify: &#123; // å‹ç¼©htmlæ–‡ä»¶</span><br><span class="line">        removeComments: true, // å»é™¤æ³¨é‡Š</span><br><span class="line">        collapseWhitespace: true, // å»é™¤ç©ºæ ¼</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;),</span><br><span class="line"><span class="addition">+   new CleanWebpackPlugin()</span></span><br><span class="line">  ]</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å…ˆæŸ¥çœ‹ç°åœ¨çš„jsæ–‡ä»¶å‰é¢çš„hashå€¼ã€‚ç„¶åæˆ‘ä»¬ä¿®æ”¹ã€src/index.jsã€‘ï¼Œéšä¾¿æ”¹æˆä»€ä¹ˆï¼Œå†é‡æ–°</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run build</span><br></pre></td></tr></table></figure>

<p>å°±ä¼šå‘ç°æ–‡ä»¶å¹¶æ²¡æœ‰æ–°å¢ï¼Œè€Œä¸”æ¢äº†æ–°é²œçš„å“ˆå¸Œå€¼ã€‚</p>
<p>å½“ç„¶äº†ï¼Œæˆ‘ä¹‹å‰è¯´çš„é‚£äº›è¯ï¼ŒåŒå­¦ä¸ç›¸ä¿¡çš„è¯ï¼Œå¯ä»¥æŠŠã€new CleanWebpackPlugin()ã€‘è¿™ä¸€è¡Œæ³¨é‡Šæ‰ï¼Œç„¶åå†ä¿®æ”¹ã€src/index.jsã€‘ï¼Œä¼šå‘ç°ã€dist/jsã€‘ä¸‹é¢çš„jsæ–‡ä»¶ä¼šå¢å¤šä¸€æ¡ã€‚</p>
<h3 id="ä½¿ç”¨webpack-dev-server"><a href="#ä½¿ç”¨webpack-dev-server" class="headerlink" title="ä½¿ç”¨webpack-dev-server"></a>ä½¿ç”¨webpack-dev-server</h3><p>æ—¢ç„¶åˆšåˆšéƒ½æåˆ°ä¼˜åŒ–äº†ï¼Œæˆ‘ä»¬æ¯æ¬¡éƒ½éœ€è¦buildä¸€ä¸‹ï¼Œæ„Ÿè§‰å¾ˆå‘†ã€‚è€Œwebpackå®˜æ–¹ä¹Ÿæä¾›çƒ­éƒ¨ç½²ï¼Œé‚£æˆ‘ä»¬ç°åœ¨å°±ä½¿ç”¨èµ·æ¥</p>
<p>å®‰è£…webpack-dev-server</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install webpack-dev-server --save-dev</span><br></pre></td></tr></table></figure>

<p>æ–°å»ºæ–‡ä»¶ã€webpack.dev.config.jsã€‘ğŸ“ƒ</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">  webpackInit</span><br><span class="line">	|- config</span><br><span class="line">		|- webpack</span><br><span class="line">	    |- webpack.common.config.js</span><br><span class="line">      |- webpack.prod.config.js</span><br><span class="line"><span class="addition">+     |- webpack.dev.config.js</span></span><br><span class="line">  çœç•¥</span><br></pre></td></tr></table></figure>

<p>ç„¶ååŠ å…¥å¦‚ä¸‹ä»£ç </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="keyword">const</span> merge = <span class="built_in">require</span>(<span class="string">'webpack-merge'</span>); <span class="comment">// ç‰ˆæœ¬ä¸º4.x</span></span><br><span class="line"><span class="comment">// webpack-merge 5.xç‰ˆæœ¬åº”è¯¥æ”¹ä¸º const &#123; merge &#125; = require('webpack-merge');</span></span><br><span class="line"><span class="keyword">const</span> common = <span class="built_in">require</span>(<span class="string">'./webpack.common.config.js'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>);</span><br><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = merge(common, &#123;</span><br><span class="line">  mode: <span class="string">'development'</span>,</span><br><span class="line">  output: &#123;</span><br><span class="line">    filename: <span class="string">'js/[name].[hash:8].bundle.js'</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  devServer: &#123;</span><br><span class="line">    contentBase: path.resolve(__dirname, <span class="string">'../dist'</span>),</span><br><span class="line">    open: <span class="literal">true</span>,</span><br><span class="line">    port: <span class="number">9000</span>,</span><br><span class="line">    compress: <span class="literal">true</span>,</span><br><span class="line">    hot: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">      template: <span class="string">'public/index.html'</span>,</span><br><span class="line">      inject: <span class="string">'body'</span>,</span><br><span class="line">      hash: <span class="literal">false</span></span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> webpack.HotModuleReplacementPlugin()</span><br><span class="line">  ]</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹æ–‡ä»¶ã€package.jsonã€‘ğŸ“ƒ</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">"scripts": &#123;</span><br><span class="line"><span class="deletion">-   "start": "webpack --config ./config/webpack/webpack.common.config.js",</span></span><br><span class="line"><span class="addition">+   "start": "webpack-dev-server --inline --config ./config/webpack/webpack.dev.config.js",</span></span><br><span class="line">    "build": "webpack --config ./config/webpack/webpack.prod.config.js",</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>

<p>ç„¶åæˆ‘ä»¬</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run start</span><br></pre></td></tr></table></figure>

<p>æ˜¯ä¸æ˜¯è‡ªåŠ¨å¼€äº†ä¸€ä¸ªç«¯å£ä¸º9000çš„ç½‘é¡µï¼Œä¸Šé¢æ˜¯æˆ‘ä»¬å†™çš„é¡µé¢å†…å®¹ï¼Œè¿™å’Œæˆ‘ä»¬çš„é…ç½®éƒ½æ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚<br>ç°åœ¨ä½ éšæ„ä¿®æ”¹index.jsä¸­çš„ä»£ç ï¼Œå†å›åˆ°é¡µé¢çœ‹ä¸‹æ˜¯ä¸æ˜¯ä¹Ÿè·Ÿç€å˜äº†ï¼Œé‚£æˆ‘ä»¬å°±æ•´åˆwebpack-dev-serveræˆåŠŸï¼</p>
<h3 id="ä½¿ç”¨source-map"><a href="#ä½¿ç”¨source-map" class="headerlink" title="ä½¿ç”¨source-map"></a>ä½¿ç”¨source-map</h3><p>source-mapå¯ä»¥å±•ç¤ºæˆ‘ä»¬ä»£ç çš„é”™è¯¯ä½ç½®ï¼Œå› ä¸ºæˆ‘ä»¬çš„ä»£ç éƒ½æ˜¯è¢«webpackæ‰“åŒ…è¿‡çš„ï¼Œåªæœ‰æœºå™¨çœ‹å¾—æ‡‚ï¼Œæˆ‘ä»¬äººç±»æ— æ³•æ­£å¸¸è¯†åˆ«ã€‚æ‰€ä»¥éœ€è¦ä»–ã€‚</p>
<p>æƒ³è¯•ä¸€ä¸‹æœªå¼€å¯æ˜¯ä»€ä¹ˆçŠ¶æ€çš„åŒå­¦å¯ä»¥è‡ªå·±æ•…æ„æŠŠä»£ç å†™é”™ï¼Œç„¶åçœ‹çœ‹æ§åˆ¶å°çš„æŠ¥é”™ã€‚</p>
<p>å¼€å¯ä¹Ÿååˆ†ç®€å•ã€‚</p>
<p>å®ƒçš„é…ç½®éå¸¸ç®€å•ï¼Œåªéœ€è¦åœ¨ ã€webpack.dev.config.jsã€‘ ä¸­å¢åŠ ä¸€ä¸ª <code>devtool</code> å±æ€§å³å¯ï¼</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line"><span class="addition">+  devtool: 'cheap-module-eval-source-map',</span></span><br><span class="line">	//...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å› ä¸ºæˆ‘ä»¬åªæœ‰è‡ªå·±å†™ä»£ç çš„æ—¶å€™æ‰éœ€è¦æŸ¥çœ‹ï¼Œåˆ°ç”Ÿäº§ç¯å¢ƒå°±è¦å…³é—­å•¦ï¼Œä¸ç„¶æˆ‘ä»¬çš„æ™ºæ…§ç»“æ™¶å°±è¦è¢«ã€çªƒå–ã€‘å•¦ï¼æ‰€ä»¥æˆ‘æ”¾åœ¨äº†</p>
<h2 id="ä¸­åœºä¼‘æ¯"><a href="#ä¸­åœºä¼‘æ¯" class="headerlink" title="ä¸­åœºä¼‘æ¯"></a>ä¸­åœºä¼‘æ¯</h2><p>è¿™é‡Œå›é¡¾ä¸€ä¸‹çŸ¥è¯†ç‚¹ã€‚</p>
<ol>
<li>æˆ‘ä»¬å…ˆnpm init æ–°å»ºä¸€ä¸ªç©ºç™½é¡¹ç›®ã€‚</li>
<li>ç„¶åå®‰è£…webpackï¼Œreactã€‚</li>
<li>å‘ç°æ— æ³•ç¼–è¯‘jsxã€‚</li>
<li>æ‰€ä»¥æˆ‘ä»¬å¯»æ±‚äº†babelçš„å¸®åŠ©ï¼Œå¹¶é…ç½®äº†æ‰€éœ€è¦è§£æçš„å†…å®¹ã€‚</li>
<li>è§‰å¾—åœ¨htmlé‡Œé¢åŠ å…¥jså¾ˆå‘†ï¼Œæ‰€ä»¥å¼•å…¥äº†HtmlWebpackPlugin</li>
<li>å› ä¸ºè§‰å¾—æ¯æ¬¡åˆ é™¤æ‰“åŒ…å‡ºæ¥çš„ä¸œè¥¿å¾ˆå‘†ï¼Œæ‰€ä»¥å¼•å…¥äº†clean-webpack-plugin</li>
<li>å› ä¸ºæ¯æ¬¡éƒ½éœ€è¦é‡æ–°æ‰“åŒ…ï¼Œæ‰€ä»¥ä½¿ç”¨webpack-dev</li>
<li>è‡³äºwebpack-mergeæ˜¯ä¸ºäº†æ‰“åŒ…å’Œç¼–è¯‘ä¸¤ä¸ªæˆ–è€…è¯´å¤šä¸ªçŠ¶æ€åšé¢„å¤‡çš„ï¼Œåœ¨ä¸Šè¿°çš„ä¾‹å­åªæœ‰æœ¬åœ°çš„devå’Œbuildä¸¤ä¸ªç¯å¢ƒã€‚</li>
</ol>
<p>åŸºæœ¬ä¸Šä¸Šè¿°çš„æ“ä½œè¿‡ç¨‹æˆ‘éƒ½æœ‰è§£é‡Šï¼Œæˆ–è€…æ˜¯æ³¨é‡Šï¼Œæˆ–è€…æ˜¯åœ¨æ–‡ç« ä¸­è¯´æ˜ã€‚å¤§å®¶å¯ä»¥è·Ÿç€èŠ‚å¥ä¸€æ­¥ä¸€æ­¥æ¥ï¼Œå› ä¸ºæˆ‘ä¹Ÿæ˜¯ä¸€è¾¹å†™blogä¸€è¾¹è·‘ä»£ç ä¸€è¾¹å›é¡¾çŸ¥è¯†ç‚¹ã€‚</p>
<p>è‡³æ­¤ï¼Œwebpackç®—æ˜¯å‘Šä¸€â€¦â€¦</p>
<p>è¯¶è¯¶è¯¶è¯¶ï¼jsæ˜¯å¯ä»¥è§£æäº†ï¼Œé‚£csså‘¢ï¼</p>
<p>å“¦å“¦ï¼Œå¥½çš„ï¼Œé‚£æˆ‘ä»¬ç»§ç»­å¯ç¨‹</p>
<h2 id="é‡æ–°èµ·èˆª"><a href="#é‡æ–°èµ·èˆª" class="headerlink" title="é‡æ–°èµ·èˆª"></a>é‡æ–°èµ·èˆª</h2><h3 id="ä½¿ç”¨css-loaderå’Œstyle-loaderä¸¤å…„å¼Ÿ"><a href="#ä½¿ç”¨css-loaderå’Œstyle-loaderä¸¤å…„å¼Ÿ" class="headerlink" title="ä½¿ç”¨css-loaderå’Œstyle-loaderä¸¤å…„å¼Ÿ"></a>ä½¿ç”¨css-loaderå’Œstyle-loaderä¸¤å…„å¼Ÿ</h3><p>å‡å¦‚æˆ‘ä»¬ç›´æ¥å¼•ç”¨cssçš„è¯ï¼Œä¼šæŠ¥é”™äº†ã€‚è¿™é‡Œå°±ä¸æ¼”ç¤ºäº†ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥è‡ªå·±è¯•è¯•ã€‚</p>
<p>æ‰€ä»¥ï¼Œæˆ‘ä»¬å…ˆèµ°å‘½ä»¤è¡Œæ•²å‡»</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev style-loader css-loader</span><br></pre></td></tr></table></figure>

<h4 id="ä¸¤å…„å¼Ÿçš„å…³ç³»"><a href="#ä¸¤å…„å¼Ÿçš„å…³ç³»" class="headerlink" title="ä¸¤å…„å¼Ÿçš„å…³ç³»"></a>ä¸¤å…„å¼Ÿçš„å…³ç³»</h4><p>æ¥è¯´è¯´css-loaderå’Œstyle-loaderä»–ä»¬è¿™å¯¹é¸³é¸¯çš„å…³ç³»ã€‚</p>
<p>é¦–å…ˆcss-loaderä¼šæŠŠä½ çš„CSSæ–‡ä»¶è¿›è¡Œè§£æï¼Œå› ä¸ºwebpackæ˜¯ç”¨JSå†™çš„ï¼Œè¿è¡Œåœ¨nodeç¯å¢ƒï¼Œæ‰€ä»¥é»˜è®¤webpackæ‰“åŒ…çš„æ—¶å€™åªä¼šå¤„ç†JSä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼</p>
<p>æ‰€ä»¥æˆ‘ä»¬ä¹‹å‰çš„reacté‡Œé¢çš„jsxéœ€è¦babelçš„å¸®åŠ©ï¼Œæˆ–è€…è¯´éœ€è¦ã€babel-loaderã€‘çš„å¸®åŠ©ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„cssåŒæ ·éœ€è¦ã€css-loaderã€‘çš„å¸®åŠ©ï¼Œé‚£ä¹ˆåˆå…³ã€style-loaderã€‘ä»€ä¹ˆäº‹ï¼Ÿå¯ä¸å¯ä»¥ä¸è£…ä»–å‘¢ï¼Ÿ</p>
<p>ç­”æ¡ˆæ˜¯ï¼šå¯ä»¥çš„ï¼Œä½†æ˜¯ä½ ä½¿ç”¨èµ·æ¥ä¼šéå¸¸çš„éº»çƒ¦ã€‚æ€ä¹ˆä¸ªéº»çƒ¦æ³•å‘¢ï¼Ÿ</p>
<p>å¦‚æœåªç”¨äº†ã€css-loaderã€‘è§£æå‡ºæ¥çš„æ˜¯è¿™æ ·çš„</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[&quot;.&#x2F;src&#x2F;index.css&quot;, &quot;.test&#123;â†µ  color: red;â†µ&#125;&quot;, &quot;&quot;]</span><br></pre></td></tr></table></figure>

<p>è¿™æ ·å’‹ç”¨å˜›ï¼Œä½ æ˜¯è§£æäº†ï¼Œå¯æ˜¯ä½ è§£æçš„æ˜¯ä¸ªXXã€‚</p>
<p>è¿™ä¸ªæ—¶å€™å°±éœ€è¦æˆ‘ä»¬çš„å¤©é™çŒ›ç”·ã€style-loaderã€‘</p>
<p>style-loader æ˜¯é€šè¿‡ä¸€ä¸ªJSè„šæœ¬åˆ›å»ºä¸€ä¸ªstyleæ ‡ç­¾ï¼Œé‡Œé¢åŒ…å«ä¸€äº›æ ·å¼ã€‚style-loaderæ˜¯ä¸èƒ½å•ç‹¬ä½¿ç”¨çš„ï¼Œåº”ä¸ºå®ƒå¹¶ä¸è´Ÿè´£è§£æ css ä¹‹å‰çš„ä¾èµ–å…³ç³»ï¼Œæ¯ä¸ªloaderçš„åŠŸèƒ½éƒ½æ˜¯å•ä¸€çš„ï¼Œå„è‡ªæ‹†åˆ†ç‹¬ç«‹ã€‚</p>
<h4 id="ä¸Šæ‰‹ï¼"><a href="#ä¸Šæ‰‹ï¼" class="headerlink" title="ä¸Šæ‰‹ï¼"></a>ä¸Šæ‰‹ï¼</h4><p>åŠ å…¥index.css</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">src</span><br><span class="line"><span class="addition">+  |- index.css</span></span><br><span class="line">   |- indexjs</span><br></pre></td></tr></table></figure>

<p>index.cssæ–‡ä»¶çš„å†…å®¹å¦‚ä¸‹</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.test</span>&#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹index.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'./index.css'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> App = <span class="function"><span class="params">()</span> =&gt;</span> (</span><br><span class="line">  &lt;div className=<span class="string">"test"</span>&gt;</span><br><span class="line">    Hello Worldï¼!</span><br><span class="line">  &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">)</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">ReactDOM.render(&lt;App /</span>&gt;, <span class="built_in">document</span>.getElementById(<span class="string">'root'</span>));</span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹ã€webpack.common.config.jsã€‘ğŸ“ƒ</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">//...</span><br><span class="line">rules:[</span><br><span class="line">      &#123;</span><br><span class="line">        test: /\.(js|jsx)?$/,</span><br><span class="line">        // å¼€å¯ç¼“å­˜</span><br><span class="line">        options: &#123; cacheDirectory: true &#125;,</span><br><span class="line">        loader: 'babel-loader',</span><br><span class="line">      &#125;,</span><br><span class="line"><span class="addition">+      &#123;</span></span><br><span class="line"><span class="addition">+        test: /\.css$/,</span></span><br><span class="line"><span class="addition">+        use: [ </span></span><br><span class="line"><span class="addition">+          'css-loader', </span></span><br><span class="line"><span class="addition">+          'style-loader',</span></span><br><span class="line"><span class="addition">+        ]</span></span><br><span class="line"><span class="addition">+      &#125;</span></span><br><span class="line">    ]</span><br><span class="line">    //....</span><br></pre></td></tr></table></figure>

<p>è®°å¾—é‡æ–°è¿è¡Œï¼Œå› ä¸ºwebpackçš„é…ç½®ä»–è¯»å–ä¸€æ¬¡ï¼Œæ‰€ä»¥å¦‚æœä½ ä¿®æ”¹äº†é…ç½®ï¼Œéœ€è¦ã€ctrl+cã€‘å…³é—­é‡æ–°è¿è¡Œã€‚</p>
<p>å˜¿å˜¿â€¦â€¦æ˜¯ä¸æ˜¯è¿è¡Œä¸äº†å•Šã€‚</p>
<p>å…¶å®æˆ‘æ˜¯æ•…æ„çš„ï¼Œæˆ‘æƒ³å‘Šè¯‰å¤§å®¶ä¸€ä¸ªçŸ¥è¯†ç‚¹ã€‚</p>
<blockquote>
<p>loaderçš„åŠ è½½é¡ºåºæ˜¯ä»å³å¾€å·¦ã€‚è¿™é‡Œçš„ç¼–è¯‘é¡ºåºæ˜¯å…ˆç”¨css-loaderå°†cssä»£ç ç¼–è¯‘ï¼Œå†äº¤ç»™style-loaderæ’å…¥åˆ°ç½‘é¡µé‡Œé¢å»ã€‚æ‰€ä»¥css-loaderåœ¨å³ï¼Œstyle-loaderåœ¨å·¦ã€‚</p>
</blockquote>
<p>è™½ç„¶æˆ‘ä»¬çš„æ•°ç»„æ¢è¡Œäº†ï¼Œä½†æ˜¯ä»”ç»†çœ‹ä¸éš¾çœ‹å‡ºé¡ºåºã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬åªéœ€è¦å°†ä»–ä»¬æ¢ä¸ªä½ç½®å°±å¯ä»¥äº†ã€‚ä»£ç æˆ‘å°±ä¸è´´äº†ã€‚</p>
<p>ç°åœ¨å¤§å®¶åº”è¯¥è®°å¿†å¾ˆæ·±åˆ»äº†å§ï¼</p>
<p>å¤§å®¶é‡æ–°ã€ctrl+cã€‘å…³é—­é‡æ–°è¿è¡Œå°±è¡Œäº†ã€‚æˆ‘ä»¬çš„hello worldæ˜¯ä¸æ˜¯å˜çº¢å•¦ï½</p>
<h3 id="å®‰è£…less-loader"><a href="#å®‰è£…less-loader" class="headerlink" title="å®‰è£…less-loader"></a>å®‰è£…less-loader</h3><p>è¯´åˆ°cssï¼Œè¯´å¥å®åœ¨è¯ï¼Œæ²¡å‡ äººçœŸçš„æ˜¯åœ¨å†™çº¯cssçš„å§ï¼Ÿç°åœ¨è°ä¸æ˜¯lessï¼Œsassæˆ–è€…å…¶ä»–cssé¢„å¤„ç†å‘¢ï¼Ÿè€Œä¸”è¿™äº›é¢„å¤„ç†çš„å¥½å¤„æˆ‘å°±ä¸ç»†è¯´äº†ï¼Œæ„Ÿå…´è¶£çš„è‡ªå·±Googleå§ï¼Œæœ¬æ–‡ç”¨çš„æ˜¯lessï¼ˆå› ä¸ºant designç”¨çš„ä¹Ÿæ˜¯lessï¼Œå“ˆå“ˆï¼Œå‡è£…æ˜¯èš‚èšçš„ä¸€å‘˜ï¼‰</p>
<p>åœ¨å‘½ä»¤è¡Œè¾“å…¥</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev less less-loader</span><br></pre></td></tr></table></figure>

<p>lessæ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œç”¨ä»–è‚¯å®šè¦è£…ï¼Œless-loaderï¼Œé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯lessçš„è§£æè€…ã€‚</p>
<p>åœ¨ã€webpack.common.config.jsã€‘å¢åŠ </p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">        test: /\.css$/,</span><br><span class="line">        use: [ </span><br><span class="line">          'style-loader',</span><br><span class="line">          'css-loader', </span><br><span class="line">        ]</span><br><span class="line">      &#125;,</span><br><span class="line"><span class="addition">+      &#123;</span></span><br><span class="line"><span class="addition">+        test: /\.less$/,</span></span><br><span class="line"><span class="addition">+        use: [ </span></span><br><span class="line"><span class="addition">+          'style-loader',</span></span><br><span class="line"><span class="addition">+          'css-loader', </span></span><br><span class="line"><span class="addition">+          'less-loader',</span></span><br><span class="line"><span class="addition">+        ]</span></span><br><span class="line"><span class="addition">+      &#125;</span></span><br></pre></td></tr></table></figure>

<p>ä¾æ—§æ˜¯é¡ºåºé—®é¢˜ï¼Œå…ˆè§£ælessï¼ŒæŠŠlessè§£ææˆå¸¸è§„çš„cssï¼Œç„¶åå†è§£æcssï¼Œæœ€åæ’å…¥åˆ°ç½‘é¡µä¸­å»ã€‚</p>
<p>ä¿®æ”¹ã€index.jsã€‘å¼•å…¥è‡ªå·±å†™çš„ã€.lessã€‘æ–‡ä»¶</p>
<p>å¤§å®¶é‡æ–°ã€ctrl+cã€‘å…³é—­é‡æ–°è¿è¡Œå°±è¡Œäº†ã€‚è‡³äºä½ å†™äº†ä»€ä¹ˆlessç‰¹æ€§ï¼Œåªè¦æœ‰æ•ˆæœå°±è¡Œäº†ã€‚</p>
<h3 id="å®‰è£…url-loaderå’Œfile-loader"><a href="#å®‰è£…url-loaderå’Œfile-loader" class="headerlink" title="å®‰è£…url-loaderå’Œfile-loader"></a>å®‰è£…url-loaderå’Œfile-loader</h3><p>è¯´å®ŒCSSï¼Œç¾ä¸½çš„ç½‘é¡µå½“ç„¶ç¦»ä¸å¼€æˆ‘ä»¬åŠ¨äººçš„å›¾ç‰‡å•¦ã€‚</p>
<p>ã€file-loaderã€‘çš„ä½œç”¨æ˜¯ï¼ŒæŠŠä½ çš„æ–‡ä»¶æ‰“åŒ…èµ·æ¥ï¼Œå’Œjsæ–‡ä»¶æ”¾åœ¨ä¸€èµ·ï¼Œè¿™æ ·ç”¨æˆ·è®¿é—®æˆ‘ä»¬çš„ç½‘é¡µçš„æ—¶å€™ï¼Œå…¶å®ä¹Ÿéœ€è¦è®¿é—®æˆ‘ä»¬çš„urlï¼Œæ—¢å¢åŠ äº†æœåŠ¡å™¨çš„å‹åŠ›ï¼Œä¹Ÿå¢åŠ äº†ç”¨æˆ·å‡çº§æµé‡çš„å‹åŠ›ï¼Œéœ€è¦å»ä¸‹è½½è¿™ä¸ªæ–‡ä»¶ã€‚</p>
<p>ã€url-loaderã€‘</p>
<p>å¦‚æœé¡µé¢å›¾ç‰‡è¾ƒå¤šï¼Œå‘å¾ˆå¤šhttpè¯·æ±‚ï¼Œä¼šé™ä½é¡µé¢æ€§èƒ½ã€‚è¿™ä¸ªé—®é¢˜å¯ä»¥é€šè¿‡url-loaderè§£å†³ã€‚url-loaderä¼šå°†å¼•å…¥çš„å›¾ç‰‡ç¼–ç ï¼Œç”ŸæˆdataURlå¹¶å°†å…¶æ‰“åŒ…åˆ°æ–‡ä»¶ä¸­ï¼Œæœ€ç»ˆåªéœ€è¦å¼•å…¥è¿™ä¸ªdataURLå°±èƒ½è®¿é—®å›¾ç‰‡äº†ã€‚</p>
<p>url-loaderå’Œfile-loaderä¸¤å…„å¼Ÿçš„æ­é…å¯ä»¥æœ‰æ•ˆçš„å‡å°‘ä¸å¿…è¦çš„urlè¯·æ±‚ï¼Œå› ä¸ºæœ‰çš„å›¾ç‰‡ä½ è¦å»è¯·æ±‚urlè·å–ï¼Œå¦‚æœå°çš„è¯å®Œå…¨å¯ä»¥ç”¨base64æ›¿ä»£ã€‚å¦‚æœå›¾ç‰‡å¾ˆå¤§çš„è¯å°±ç”¨file-loaderï¼Œè¿™æ ·å¯ä»¥å‡å°‘ç¼–ç çš„å‹åŠ›ã€‚</p>
<p>åœ¨å‘½ä»¤è¡Œè¾“å…¥</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install file-loader url-loader --save-dev</span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹ã€webpack.common.config.jsã€‘ğŸ“ƒ</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">module: &#123;</span><br><span class="line">  rules: [</span><br><span class="line">    //...</span><br><span class="line"><span class="addition">+    &#123;</span></span><br><span class="line"><span class="addition">+      test: /\.(jpg|png|gif)$/,</span></span><br><span class="line"><span class="addition">+      use: &#123;</span></span><br><span class="line"><span class="addition">+        loader: 'url-loader',</span></span><br><span class="line"><span class="addition">+        options: &#123;</span></span><br><span class="line"><span class="addition">+          name: '[name].[ext]', //è¾“å‡ºçš„æ–‡ä»¶å</span></span><br><span class="line"><span class="addition">+          outputPath: 'images/', // è¾“å‡ºåˆ°distç›®å½•ä¸‹çš„è·¯å¾„ï¼ˆdist/images/ï¼‰</span></span><br><span class="line">						/**</span><br><span class="line">             * å¦‚æœä½ è¿™ä¸ªå›¾ç‰‡æ–‡ä»¶å¤§äº8192bï¼Œå³8kbï¼Œé‚£æˆ‘url-loaderå°±ä¸ç”¨ï¼Œè½¬è€Œå»ä½¿ç”¨file-loaderï¼Œ</span><br><span class="line">             * æŠŠå›¾ç‰‡æ­£å¸¸æ‰“åŒ…æˆä¸€ä¸ªå•ç‹¬çš„å›¾ç‰‡æ–‡ä»¶åˆ°è®¾ç½®çš„ç›®å½•ä¸‹ï¼Œè‹¥æ˜¯å°äºäº†8kbï¼Œ</span><br><span class="line">             * é‚£å¥½ï¼Œæˆ‘å°±å°†å›¾ç‰‡æ‰“åŒ…æˆbase64çš„å›¾ç‰‡æ ¼å¼æ’å…¥åˆ°bundle.jsæ–‡ä»¶ä¸­ï¼Œ</span><br><span class="line">             * è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œå‡å°‘äº†httpè¯·æ±‚ï¼Œä½†æ˜¯å¦‚æœæ–‡ä»¶è¿‡å¤§ï¼Œjsæ–‡ä»¶ä¹Ÿä¼šè¿‡å¤§ï¼Œ</span><br><span class="line">             * å¾—ä¸å¿å¤±ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆæœ‰limitçš„åŸå› ï¼</span><br><span class="line">             */</span><br><span class="line"><span class="addition">+          limit: 8192,</span></span><br><span class="line"><span class="addition">+        &#125;,</span></span><br><span class="line"><span class="addition">+      &#125;</span></span><br><span class="line"><span class="addition">+    &#125;</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="è¿›é˜¶"><a href="#è¿›é˜¶" class="headerlink" title="è¿›é˜¶"></a>è¿›é˜¶</h2><p>åŸºæœ¬ä¸Šæˆ‘ä»¬çš„webpackå¯ä»¥æ­£å¸¸è¿è¡Œäº†ï¼Œcssï¼Œjsï¼Œjsxéƒ½å¯ä»¥è§£æäº†ã€‚ä½†æ˜¯æˆ‘ä»¬éœ€è¦è€ƒè™‘ä¸€äº›è¿›é˜¶çš„ä¸œè¥¿ï¼Œä¼˜åŒ–ã€‚</p>
<h3 id="ä½¿ç”¨uglifyjs-webpack-plugin"><a href="#ä½¿ç”¨uglifyjs-webpack-plugin" class="headerlink" title="ä½¿ç”¨uglifyjs-webpack-plugin"></a>ä½¿ç”¨uglifyjs-webpack-plugin</h3><p>åœ¨æ§åˆ¶å°æ‰§è¡Œä»¥ä¸‹ä»£ç ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install uglifyjs-webpack-plugin --save-dev</span><br></pre></td></tr></table></figure>

<p>åœ¨ã€webpack.prod.config.jsã€‘æ·»åŠ ä»£ç </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> UglifyJsPlugin = <span class="built_in">require</span>(<span class="string">'uglifyjs-webpack-plugin'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line"><span class="comment">//...</span></span><br><span class="line">  optimization: &#123;</span><br><span class="line">    minimizer: [</span><br><span class="line">      <span class="keyword">new</span> UglifyJsPlugin(&#123;</span><br><span class="line">        test: <span class="regexp">/\.js(\?.*)?$/i</span>,  <span class="comment">//æµ‹è¯•åŒ¹é…æ–‡ä»¶,</span></span><br><span class="line">        include: <span class="regexp">/\/includes/</span>, <span class="comment">//åŒ…å«å“ªäº›æ–‡ä»¶</span></span><br><span class="line">        excluce: <span class="regexp">/\/excludes/</span>, <span class="comment">//ä¸åŒ…å«å“ªäº›æ–‡ä»¶</span></span><br><span class="line"></span><br><span class="line">        cache: <span class="literal">false</span>,   <span class="comment">//æ˜¯å¦å¯ç”¨æ–‡ä»¶ç¼“å­˜ï¼Œé»˜è®¤ç¼“å­˜åœ¨node_modules/.cache/uglifyjs-webpack-plugin.ç›®å½•</span></span><br><span class="line">        parallel: <span class="literal">true</span>,  <span class="comment">//ä½¿ç”¨å¤šè¿›ç¨‹å¹¶è¡Œè¿è¡Œæ¥æé«˜æ„å»ºé€Ÿåº¦</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//å…è®¸è¿‡æ»¤å“ªäº›å—åº”è¯¥è¢«uglifiedï¼ˆé»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰å—éƒ½æ˜¯uglifiedï¼‰ã€‚ </span></span><br><span class="line">        <span class="comment">//è¿”å›trueä»¥uglifyå—ï¼Œå¦åˆ™è¿”å›falseã€‚</span></span><br><span class="line">        chunkFilter: <span class="function">(<span class="params">chunk</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">// `vendor` æ¨¡å—ä¸å‹ç¼©</span></span><br><span class="line">            <span class="keyword">if</span> (chunk.name === <span class="string">'vendor'</span>) &#123;</span><br><span class="line">              <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;),</span><br><span class="line">  </span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">//..</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="ä½¿ç”¨splitChunks"><a href="#ä½¿ç”¨splitChunks" class="headerlink" title="ä½¿ç”¨splitChunks"></a>ä½¿ç”¨splitChunks</h3><p>å…¶å®æˆ‘ä»¬å†™çš„ä»£ç ï¼Œæœ‰äº›åº“çš„ä»£ç æ˜¯ä¸éœ€è¦æ¯æ¬¡éƒ½ç¼–è¯‘çš„ï¼Œæœ€ç®€å•çš„ä¾‹å­å°±æ˜¯Reactï¼Œè¿™ä¸ªæˆ‘ä»¬å‡ ä¹æ¯ä¸ªjsæ–‡ä»¶éƒ½ä¼šç”¨åˆ°ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°†å®ƒä»¬å•ç‹¬æ‰“åŒ…ï¼Œè¿™æ ·åªéœ€è¦æ‰“åŒ…ä¸€æ¬¡ã€‚</p>
<p>ä¿®æ”¹ã€webpack.common.config.jsã€‘</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">entry: &#123;</span><br><span class="line">     index: './src/index.js',</span><br><span class="line"><span class="addition">+    common: ['react', 'react-dom']</span></span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹ã€webpack.prod.config.jsã€‘</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> merge = <span class="built_in">require</span>(<span class="string">'webpack-merge'</span>); <span class="comment">// ç‰ˆæœ¬ä¸º4.x</span></span><br><span class="line"><span class="comment">// webpack-merge 5.xç‰ˆæœ¬åº”è¯¥æ”¹ä¸º const &#123; merge &#125; = require('webpack-merge');</span></span><br><span class="line"><span class="keyword">const</span> common = <span class="built_in">require</span>(<span class="string">'./webpack.common.config.js'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>);</span><br><span class="line"><span class="keyword">const</span> &#123; CleanWebpackPlugin &#125; = <span class="built_in">require</span>(<span class="string">'clean-webpack-plugin'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> UglifyJsPlugin = <span class="built_in">require</span>(<span class="string">'uglifyjs-webpack-plugin'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = merge(common, &#123;</span><br><span class="line">  mode: <span class="string">'production'</span>,</span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">      filename: <span class="string">'index.html'</span>, <span class="comment">// æ‰“åŒ…ä¹‹åçš„htmlæ–‡ä»¶åå­—</span></span><br><span class="line">      <span class="comment">// è¿™é‡Œæœ‰å°ä¼™ä¼´å¯èƒ½ä¼šç–‘æƒ‘ä¸ºä»€ä¹ˆä¸æ˜¯ '../public/index.html'</span></span><br><span class="line">      <span class="comment">// æˆ‘çš„ç†è§£æ˜¯æ— è®ºä¸è¦ç”¨çš„templateæ˜¯ä¸æ˜¯åœ¨ä¸€ä¸ªç›®å½•ï¼Œéƒ½æ˜¯ä»æ ¹è·¯å¾„å¼€å§‹æŸ¥æ‰¾</span></span><br><span class="line">      template: <span class="string">'public/index.html'</span>, <span class="comment">// ä»¥æˆ‘ä»¬è‡ªå·±å®šä¹‰çš„htmlä¸ºæ¨¡æ¿ç”Ÿæˆï¼Œä¸ç„¶æˆ‘ä»¬è¿˜è¦åˆ°æ‰“åŒ…ä¹‹åçš„htmlæ–‡ä»¶ä¸­å†™script</span></span><br><span class="line">      inject: <span class="string">'body'</span>,<span class="comment">// åœ¨bodyæœ€åº•éƒ¨å¼•å…¥jsæ–‡ä»¶ï¼Œå¦‚æœæ˜¯headï¼Œå°±æ˜¯åœ¨headä¸­å¼•å…¥js</span></span><br><span class="line">      minify: &#123; <span class="comment">// å‹ç¼©htmlæ–‡ä»¶</span></span><br><span class="line">        removeComments: <span class="literal">true</span>, <span class="comment">// å»é™¤æ³¨é‡Š</span></span><br><span class="line">        collapseWhitespace: <span class="literal">true</span>, <span class="comment">// å»é™¤ç©ºæ ¼</span></span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> CleanWebpackPlugin()</span><br><span class="line">  ],</span><br><span class="line">  optimization: &#123;</span><br><span class="line">    minimizer: [</span><br><span class="line">      <span class="keyword">new</span> UglifyJsPlugin(&#123;</span><br><span class="line">        test: <span class="regexp">/\.js(\?.*)?$/i</span>,  <span class="comment">//æµ‹è¯•åŒ¹é…æ–‡ä»¶,</span></span><br><span class="line">        <span class="comment">// include: /\/includes/, //åŒ…å«å“ªäº›æ–‡ä»¶</span></span><br><span class="line">        <span class="comment">// excluce: /\/excludes/, //ä¸åŒ…å«å“ªäº›æ–‡ä»¶</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//å…è®¸è¿‡æ»¤å“ªäº›å—åº”è¯¥è¢«uglifiedï¼ˆé»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰å—éƒ½æ˜¯uglifiedï¼‰ã€‚ </span></span><br><span class="line">        <span class="comment">//è¿”å›trueä»¥uglifyå—ï¼Œå¦åˆ™è¿”å›falseã€‚</span></span><br><span class="line">        chunkFilter: <span class="function">(<span class="params">chunk</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">// `vendor` æ¨¡å—ä¸å‹ç¼©</span></span><br><span class="line">            <span class="keyword">if</span> (chunk.name === <span class="string">'vendor'</span>) &#123;</span><br><span class="line">              <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;),</span><br><span class="line">  </span><br><span class="line">        cache: <span class="literal">false</span>,   <span class="comment">//æ˜¯å¦å¯ç”¨æ–‡ä»¶ç¼“å­˜ï¼Œé»˜è®¤ç¼“å­˜åœ¨node_modules/.cache/uglifyjs-webpack-plugin.ç›®å½•</span></span><br><span class="line">        parallel: <span class="literal">true</span>,  <span class="comment">//ä½¿ç”¨å¤šè¿›ç¨‹å¹¶è¡Œè¿è¡Œæ¥æé«˜æ„å»ºé€Ÿåº¦</span></span><br><span class="line">    ],</span><br><span class="line">    splitChunks: &#123;</span><br><span class="line">      <span class="comment">/**</span></span><br><span class="line"><span class="comment">       * é»˜è®¤å€¼æ˜¯async</span></span><br><span class="line"><span class="comment">       * æ‹†åˆ†æ¨¡å—çš„èŒƒå›´ï¼Œå®ƒæœ‰ä¸‰ä¸ªå€¼asyncã€initialå’Œallã€‚</span></span><br><span class="line"><span class="comment">       * asyncè¡¨ç¤ºåªä»å¼‚æ­¥åŠ è½½å¾—æ¨¡å—ï¼ˆåŠ¨æ€åŠ è½½import()ï¼‰é‡Œé¢è¿›è¡Œæ‹†åˆ†</span></span><br><span class="line"><span class="comment">       * initialè¡¨ç¤ºåªä»å…¥å£æ¨¡å—è¿›è¡Œæ‹†åˆ†</span></span><br><span class="line"><span class="comment">       * allè¡¨ç¤ºä»¥ä¸Šä¸¤è€…éƒ½åŒ…æ‹¬</span></span><br><span class="line"><span class="comment">       */</span></span><br><span class="line">      chunks: <span class="string">'all'</span>,</span><br><span class="line">      <span class="comment">// minSize: 30000, // ç”Ÿæˆchunkçš„æœ€å°å¤§å°ï¼ˆä»¥å­—èŠ‚ä¸ºå•ä½ï¼‰ã€‚åªæœ‰å¤§äºè¿™ä¸ªæ•°å­—æ‰å¯ä»¥æˆä¸€ä¸ªchunk </span></span><br><span class="line">      <span class="comment">// minRemainingSize: 0, // åªæœ‰å‰©ä¸‹ä¸€ä¸ªchunkçš„æ—¶å€™æ‰ä¼šç”Ÿæ•ˆï¼Œé»˜è®¤æ˜¯å’ŒminSizeä¸€æ ·çš„ï¼Œå¼€å‘çš„æ—¶å€™é»˜è®¤æ˜¯0</span></span><br><span class="line">      <span class="comment">// maxSize: 0, // å‘Šè¯‰webpackå°è¯•å°†å¤§äºmaxSizeå­—èŠ‚çš„å—æ‹†åˆ†ä¸ºè¾ƒå°çš„éƒ¨åˆ†ã€‚</span></span><br><span class="line">      <span class="comment">// minChunks: 1, // æ‹†åˆ†å‰å¿…é¡»å…±äº«æ¨¡å—çš„æœ€å°å—æ•°ã€‚</span></span><br><span class="line">      <span class="comment">// maxAsyncRequests: 6, // æŒ‰éœ€åŠ è½½æ—¶æœ€å¤§å¹¶è¡Œè¯·æ±‚æ•°ã€‚</span></span><br><span class="line">      <span class="comment">// maxInitialRequests: 4, // å…¥å£ç‚¹çš„æœ€å¤§å¹¶è¡Œè¯·æ±‚æ•°ã€‚å…¥å£æ–‡ä»¶</span></span><br><span class="line">      <span class="comment">// automaticNameDelimiter: '~', // é»˜è®¤æƒ…å†µä¸‹ï¼Œwebpackå°†ä½¿ç”¨å—çš„æ¥æºå’Œåç§°ç”Ÿæˆåç§°ï¼ˆä¾‹å¦‚vendors~main.jsï¼‰ã€‚æ­¤é€‰é¡¹ä½¿æ‚¨å¯ä»¥æŒ‡å®šç”¨äºç”Ÿæˆåç§°çš„å®šç•Œç¬¦ã€‚</span></span><br><span class="line">      cacheGroups: &#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * å½“webpackå¤„ç†æ–‡ä»¶è·¯å¾„æ—¶ï¼Œå®ƒä»¬å§‹ç»ˆåŒ…å«/åœ¨Unixç³»ç»Ÿå’Œ\Windowsä¸Šã€‚</span></span><br><span class="line"><span class="comment">         * è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ[\\/]åœ¨&#123;cacheGroup&#125;.testå­—æ®µä¸­ä½¿ç”¨in æ¥è¡¨ç¤ºè·¯å¾„åˆ†éš”ç¬¦çš„åŸå› ã€‚</span></span><br><span class="line"><span class="comment">         * /æˆ–\in &#123;cacheGroup&#125;.testä¼šåœ¨è·¨å¹³å°ä½¿ç”¨æ—¶å¼•èµ·é—®é¢˜ã€‚</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="comment">// defaultVendors: &#123;</span></span><br><span class="line">        <span class="comment">//   test: /[\\/]node_modules[\\/]/, // åˆ†å—ç›®æ ‡</span></span><br><span class="line">        <span class="comment">//   priority: -10 // æƒé‡</span></span><br><span class="line">        <span class="comment">// &#125;,</span></span><br><span class="line">        <span class="comment">// default: &#123;</span></span><br><span class="line">        <span class="comment">//   minChunks: 2, // æœ€å°å¼•ç”¨</span></span><br><span class="line">        <span class="comment">//   priority: -20, // æƒé‡</span></span><br><span class="line">        <span class="comment">//   // å¦‚æœå½“å‰å—åŒ…å«å·²ä»ä¸»æ†ç»‘åŒ…ä¸­æ‹†åˆ†å‡ºçš„æ¨¡å—ï¼Œåˆ™å°†é‡ç”¨è¯¥æ¨¡å—ï¼Œè€Œä¸æ˜¯ç”Ÿæˆæ–°çš„æ¨¡å—ã€‚è¿™å¯èƒ½ä¼šå½±å“å—çš„ç»“æœæ–‡ä»¶åã€‚</span></span><br><span class="line">        <span class="comment">//   reuseExistingChunk: true</span></span><br><span class="line">        <span class="comment">// &#125;,</span></span><br><span class="line">        <span class="comment">// ä¸Šè¿°çš„splitChunkså…¨æ˜¯webpack4æœªè®¾ç½®æƒ…å†µä¸‹çš„é»˜è®¤å€¼ï¼Œé™¤äº†chunksä»ã€asyncã€‘-&gt;ã€allã€‘å…¶ä»–éƒ½æ²¡æœ‰æ”¹</span></span><br><span class="line">        <span class="comment">// okï¼Œæˆ‘ä»¬ç°åœ¨åŠ å…¥æˆ‘ä»¬è‡ªå·±æƒ³è¦çš„ä»£ç åˆ†å‰²</span></span><br><span class="line">        <span class="comment">// å› ä¸ºæˆ‘å‡†å¤‡åŠ å…¥reactç­‰ä¸šåŠ¡åƒå˜ä¸‡åŒ–è€Œä¸ä¼šå˜çš„åº“</span></span><br><span class="line">        common: &#123;</span><br><span class="line">          test: <span class="string">"common"</span>, <span class="comment">// webpackæ‰«é¢çš„å…³é”®å­—</span></span><br><span class="line">          name: <span class="string">"common"</span>, <span class="comment">// ç”Ÿæˆçš„åå­—</span></span><br><span class="line">          enforce: <span class="literal">true</span> <span class="comment">// æ˜¯å¦ç¼“å­˜</span></span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>ä¸æƒ³å†™diffå•¦ï¼Œç›´æ¥CVå•¦ã€‚ã€‚ã€‚</p>
<p>ä¸ºä»€ä¹ˆæˆ‘éœ€è¦æŠŠreactæå–å‡ºæ¥ï¼Œå› ä¸ºå“ªé‡Œéƒ½éœ€è¦ç”¨ï¼Œè€Œä¸”ä»–å‡ ä¹ä¸å¯èƒ½ä¼šå˜ï¼Œæ‰€ä»¥æˆ‘ç‰¹åˆ«æå‡ºæ¥åšäº†ç¼“å­˜ï¼Œå…¶ä½™çš„è¿˜æ˜¯ä½¿ç”¨çš„é»˜è®¤é…ç½®ï¼ˆé™¤äº†chunkæ”¹ä¸ºäº†â€˜allâ€™ï¼‰ã€‚</p>
<blockquote>
<p>Tobias Koppers@Wsokraï¼šoptimization. splitchunks. chunks: althe only option you need for vendor and commons splitting in webpackBest combine it with html-webpack-plugin or equivalent html generation18120</p>
</blockquote>
<p>ä½œè€…éƒ½å‘æ¨ç‰¹è¯´äº†ï¼Œé‚£æˆ‘ä»¬ä¹Ÿå°±æ¥å—å§ï½å°±æ”¹ä¸ªallï¼Œç„¶åè¡¥ä¸€ä¸‹reactï½</p>
<p>å†é‡æ–°æ‰“åŒ…ï¼Œä½ ä¼šå‘ç°index.bundle.jsï¼ˆä¸è¢«ç¼“å­˜ï¼‰çš„hashå€¼å˜äº†ï¼Œä½†æ˜¯common.bundle.jsï¼ˆèƒ½è¢«ç¼“å­˜ï¼‰çš„hashå€¼æ²¡å˜ã€‚</p>
<h3 id="ä½¿ç”¨mini-css-extract-plugin"><a href="#ä½¿ç”¨mini-css-extract-plugin" class="headerlink" title="ä½¿ç”¨mini-css-extract-plugin"></a>ä½¿ç”¨mini-css-extract-plugin</h3><p>jséƒ½ç‹¬ç«‹ğŸ“¦ï¼Œé‚£æˆ‘cssä¹Ÿè¦ï¼</p>
<p>å…¶å®å¦‚æœæŠŠCSSæ‰“åŒ…æˆä¸€ä¸ªæ–‡ä»¶ç„¶åè®©htmlå¼•ç”¨çš„è¯å¯ä»¥å‡å°htmlæ–‡ä»¶çš„å¤§å°ï¼Œæš—åˆäº†HTTP2çš„å¤šè·¯å¤ç”¨ï¼Œå¤šæ–‡ä»¶å°æ•°é‡ã€‚åŒ…æ‹¬ä¹‹å‰çš„splitChunksé‡Œé¢æˆ‘ä»¬é…ç½®çš„reactä¹Ÿæ˜¯ä¸ºäº†HTTP2ã€‚</p>
<p>åœ¨å‘½ä»¤è¡Œè¾“å…¥ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev mini-css-extract-plugin</span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹ã€webpack.common.config.jsã€‘</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="addition">+ const MiniCssExtractPlugin = require('mini-css-extract-plugin');</span></span><br><span class="line"></span><br><span class="line">//...</span><br><span class="line">module:&#123;</span><br><span class="line">    rules:[</span><br><span class="line">      &#123;</span><br><span class="line">        test: /\.css$/,</span><br><span class="line">        use: [ </span><br><span class="line"><span class="addition">+          MiniCssExtractPlugin.loader,</span></span><br><span class="line"><span class="deletion">-          'style-loader',</span></span><br><span class="line">           'css-loader', </span><br><span class="line">        ]</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line"><span class="addition">+plugins: [</span></span><br><span class="line"><span class="addition">+    new MiniCssExtractPlugin(&#123;</span></span><br><span class="line"><span class="addition">+      filename: 'css/[name].[hash].css',</span></span><br><span class="line"><span class="addition">+      chunkFilename: 'css/[id].[hash].css',</span></span><br><span class="line"><span class="addition">+    &#125;),</span></span><br><span class="line">  ]</span><br></pre></td></tr></table></figure>



<h3 id="ä½¿ç”¨CSS-Module"><a href="#ä½¿ç”¨CSS-Module" class="headerlink" title="ä½¿ç”¨CSS Module"></a>ä½¿ç”¨CSS Module</h3><p>å…¶å®å¾ˆç®€å•ï¼Œåªéœ€è¦ä¿®æ”¹ä¸€ä¸‹é…ç½®ã€wbpack.common.config.jsã€‘</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">        test: /\.css$/,</span><br><span class="line">        use: [ </span><br><span class="line">          MiniCssExtractPlugin.loader,</span><br><span class="line"><span class="deletion">-          'css-loader'</span></span><br><span class="line"><span class="addition">+          &#123;</span></span><br><span class="line"><span class="addition">+            loader: 'css-loader',</span></span><br><span class="line"><span class="addition">+            options: &#123;</span></span><br><span class="line"><span class="addition">+              // importLoaders: 1,</span></span><br><span class="line"><span class="addition">+              modules: true,</span></span><br><span class="line"><span class="addition">+            &#125;,</span></span><br><span class="line"><span class="addition">+          &#125;,</span></span><br><span class="line">        ]</span><br><span class="line">      &#125;,</span><br></pre></td></tr></table></figure>

<h3 id="ä½¿ç”¨PostCSS"><a href="#ä½¿ç”¨PostCSS" class="headerlink" title="ä½¿ç”¨PostCSS"></a>ä½¿ç”¨PostCSS</h3><blockquote>
<p>postcss ä¸€ç§å¯¹cssç¼–è¯‘çš„å·¥å…·ï¼Œç±»ä¼¼babelå¯¹jsçš„å¤„ç†ï¼Œå¸¸è§çš„åŠŸèƒ½å¦‚ï¼š 1 . ä½¿ç”¨ä¸‹ä¸€ä»£cssè¯­æ³• 2 . è‡ªåŠ¨è¡¥å…¨æµè§ˆå™¨å‰ç¼€ 3 . è‡ªåŠ¨æŠŠpxä»£ä¸ºè½¬æ¢æˆrem 4 . css ä»£ç å‹ç¼©ç­‰ç­‰ postcss åªæ˜¯ä¸€ä¸ªå·¥å…·ï¼Œæœ¬èº«ä¸ä¼šå¯¹cssä¸€é¡¿æ“ä½œï¼Œå®ƒé€šè¿‡æ’ä»¶å®ç°åŠŸèƒ½ï¼Œautoprefixer å°±æ˜¯å…¶ä¸€ã€‚</p>
</blockquote>
<p>å®‰è£…postcss</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install postcss postcss-loader --save-dev</span><br></pre></td></tr></table></figure>

<p>å®‰è£…postcssæŸä¸ªæ’ä»¶ï¼Œä»¥Autoprefixerä¸¾ä¾‹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install postcss-aspect-ratio-mini postcss-write-svg postcss-px-to-viewport postcss-viewport-units postcss-flexbugs-fixes postcss-preset-env cssnano --save-dev</span><br></pre></td></tr></table></figure>

<p>åœ¨æ ¹ç›®æ ‡æ–°å»ºæ–‡ä»¶ã€postcss.config.jsã€‘</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* eslint-disable import/no-extraneous-dependencies */</span></span><br><span class="line"><span class="comment">/* eslint-disable @typescript-eslint/no-var-requires */</span></span><br><span class="line"><span class="keyword">const</span> postcssAspectRatioMini = <span class="built_in">require</span>(<span class="string">'postcss-aspect-ratio-mini'</span>);</span><br><span class="line"><span class="keyword">const</span> postcssPxToViewport = <span class="built_in">require</span>(<span class="string">'postcss-px-to-viewport'</span>);</span><br><span class="line"><span class="keyword">const</span> postcssWriteSvg = <span class="built_in">require</span>(<span class="string">'postcss-write-svg'</span>);</span><br><span class="line"><span class="keyword">const</span> postcssViewportUnits = <span class="built_in">require</span>(<span class="string">'postcss-viewport-units'</span>);</span><br><span class="line"><span class="keyword">const</span> cssnano = <span class="built_in">require</span>(<span class="string">'cssnano'</span>);</span><br><span class="line"><span class="keyword">const</span> postcssPresetEnv = <span class="built_in">require</span>(<span class="string">'postcss-preset-env'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> postcssFlexbugsFixes = <span class="built_in">require</span>(<span class="string">'postcss-flexbugs-fixes'</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  plugins: [</span><br><span class="line">    postcssFlexbugsFixes,</span><br><span class="line">    <span class="comment">// åœ¨è¿™ä¸ªä½ç½®åŠ å…¥æˆ‘ä»¬éœ€è¦é…ç½®çš„ä»£ç </span></span><br><span class="line">    <span class="comment">// åœ¨è¿™ä¸ªä½ç½®åŠ å…¥æˆ‘ä»¬éœ€è¦é…ç½®çš„ä»£ç </span></span><br><span class="line">    <span class="comment">// åœ¨è¿™ä¸ªä½ç½®åŠ å…¥æˆ‘ä»¬éœ€è¦é…ç½®çš„ä»£ç </span></span><br><span class="line">    postcssAspectRatioMini(&#123;&#125;),</span><br><span class="line">    postcssPxToViewport(&#123;</span><br><span class="line">      viewportWidth: <span class="number">750</span>, <span class="comment">// åŸºå‡†å®½åº¦ï¼ˆä¸€èˆ¬çš„è®¾è®¡éƒ½æ˜¯è¿™ä¸ªåŸºå‡†</span></span><br><span class="line">      viewportHeight: <span class="number">1334</span>, <span class="comment">// åŸºå‡†é«˜åº¦ï¼ˆä¸€èˆ¬çš„è®¾è®¡éƒ½æ˜¯è¿™ä¸ªåŸºå‡†</span></span><br><span class="line">      unitPrecision: <span class="number">3</span>, <span class="comment">// (Number) The decimal numbers to allow the REM units to grow to.</span></span><br><span class="line">      viewportUnit: <span class="string">'vw'</span>, <span class="comment">// (String) å•ä½</span></span><br><span class="line">      selectorBlackList: [<span class="string">'.list-ignore'</span>, /notTransform/], <span class="comment">// å¸¦ä¸Šè¿™ä¸ªå•è¯çš„å°±ä¸ä¼šfixä¸ºvwå•ä½</span></span><br><span class="line">      minPixelValue: <span class="number">1</span>, <span class="comment">// (Number) æœ€å°åƒç´ </span></span><br><span class="line">      mediaQuery: <span class="literal">false</span>, <span class="comment">// (Boolean) å…è®¸åœ¨åª’ä½“æŸ¥è¯¢ä¸­è½¬æ¢pxã€‚</span></span><br><span class="line">      exclude: <span class="regexp">/(\/|\\)(node_modules)(\/|\\)/</span>,</span><br><span class="line">    &#125;),</span><br><span class="line">    postcssWriteSvg(&#123;</span><br><span class="line">      utf8: <span class="literal">false</span></span><br><span class="line">    &#125;),</span><br><span class="line">    postcssPresetEnv(&#123;&#125;),</span><br><span class="line">    postcssViewportUnits(&#123;</span><br><span class="line">      filterRule: <span class="function"><span class="params">rule</span> =&gt;</span> rule.selector.includes(<span class="string">'::after'</span>)</span><br><span class="line">        &amp;&amp; rule.selector.includes(<span class="string">'::before'</span>)</span><br><span class="line">        &amp;&amp; rule.selector.includes(<span class="string">':after'</span>)</span><br><span class="line">        &amp;&amp; rule.selector.includes(<span class="string">':before'</span>)</span><br><span class="line">    &#125;),</span><br><span class="line">    cssnano(&#123;</span><br><span class="line">      <span class="string">"cssnano-preset-advanced"</span>: &#123;</span><br><span class="line">        zindex: <span class="literal">false</span>,</span><br><span class="line">        autoprefixer: <span class="literal">false</span></span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹ã€webpack.common.config.jsã€‘</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">        test: /\.css$/,</span><br><span class="line">        use: [ </span><br><span class="line">          'style-loader',</span><br><span class="line">          'css-loader', </span><br><span class="line"><span class="addition">+          'postcss-loader'</span></span><br><span class="line">        ]</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: /\.less$/,</span><br><span class="line">        use: [ </span><br><span class="line">          'style-loader',</span><br><span class="line">          'css-loader', </span><br><span class="line">          'less-loader',</span><br><span class="line"><span class="addition">+          'postcss-loader'</span></span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure>

<p>ç„¶åï¼Œä¿®æ”¹æˆ‘ä»¬çš„cssæ–‡ä»¶ï¼Œçœ‹çœ‹æˆ‘ä»¬å†™çš„å•ä½ä¸ºpxçš„æœ‰æ²¡æœ‰è¢«æ”¹ä¸ºvwçš„è‡ªé€‚åº”å•ä½ã€‚</p>
<p>é¡ºä¾¿è¯•ä¸€ä¸‹å¸¦æœ‰ã€notTransformã€‘çš„æ˜¯ä¸æ˜¯è¿˜æ˜¯pxä½œä¸ºå•ä½ã€‚</p>
<h2 id="ç»“æŸ"><a href="#ç»“æŸ" class="headerlink" title="ç»“æŸ"></a>ç»“æŸ</h2><p>åˆ°æ­¤ï¼Œæˆ‘ä»¬çš„webpacké…ç½®ï¼Œå°±ç®—æ˜¯å…¥é—¨äº†ï¼Œå¯¹äºwebpackçš„é…ç½®æˆ‘ä»¬è¿˜æœ‰å¾ˆé•¿çš„è·¯è¦èµ°ã€‚å¤§å®¶åŠ æ²¹ï¼</p>
<p>å¦‚æœæœ‰å“ªé‡Œå†™çš„ä¸å¥½æˆ–è€…å†™é”™äº†ï¼Œæ¬¢è¿å¤§å®¶åœ¨è¯„è®ºåŒºè®¨è®ºã€‚</p>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="mailto:undefined">Derrick</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="http://derricktel.github.io/2020/06/07/%E4%BB%8E%E9%9B%B6%E9%85%8D%E7%BD%AE%E4%BD%A0%E7%9A%84Webpack/">http://derricktel.github.io/2020/06/07/%E4%BB%8E%E9%9B%B6%E9%85%8D%E7%BD%AE%E4%BD%A0%E7%9A%84Webpack/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥è‡ª <a href="http://derricktel.github.io" target="_blank">Derrick</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Webpack/">Webpack</a></div><div class="post_share"><div class="social-share" data-image="/image/cover/github.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button button--primary button--animated"> <i class="fa fa-qrcode"></i> æ‰“èµ<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/DerrickWechat.png" alt="å¾®ä¿¡"/><div class="post-qr-code__desc">å¾®ä¿¡</div></li><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/DerrickAlipay.jpg" alt="æ”¯ä»˜å¯¶"/><div class="post-qr-code__desc">æ”¯ä»˜å¯¶</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2020/07/13/%E3%80%90%E9%87%8D%E8%AF%86%E5%89%8D%E7%AB%AF%E3%80%91%E5%8E%9F%E5%9E%8B%E5%8E%9F%E5%9E%8B%E9%93%BE%E5%92%8C%E7%BB%A7%E6%89%BF/"><img class="prev_cover lazyload" data-src="/image/cover/web.jpeg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">ã€é‡è¯†å‰ç«¯ã€‘åŸå‹/åŸå‹é“¾å’Œç»§æ‰¿</div></div></a></div><div class="next-post pull_right"><a href="/2020/06/06/%E5%89%8D%E7%AB%AF%E8%BF%9B%E9%98%B6-%E9%85%8D%E7%BD%AE%E4%BD%A0%E8%87%AA%E5%B7%B1%E7%9A%84%E8%84%9A%E6%89%8B%E6%9E%B6/"><img class="next_cover lazyload" data-src="/img/post.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">ã€å‰ç«¯è¿›é˜¶ã€‘ä»é›¶æ­å»ºå±äºä½ çš„è„šæ‰‹æ¶</div></div></a></div></nav></article></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By Derrick</div><div class="framework-info"><span>é©±åŠ¨ </span><a href="https://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>ä¸»é¢˜ </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="é˜…è¯»æ¨¡å¼"></i><i class="fa fa-plus" id="font_plus" title="æ”¾å¤§å­—ä½“"></i><i class="fa fa-minus" id="font_minus" title="ç¼©å°å­—ä½“"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="ç®€ç¹è½¬æ¢" target="_self">ç¹</a><i class="darkmode fa fa-moon-o" id="darkmode" title="å¤œé—´æ¨¡å¼"></i></div><div id="rightside-config-show"><div id="rightside_config" title="è®¾ç½®"><i class="fa fa-cog" aria-hidden="true"></i></div><i class="fa fa-list-ul close" id="mobile-toc-button" title="ç›®å½•" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="å›åˆ°é¡¶éƒ¨" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async=""></script></body></html>