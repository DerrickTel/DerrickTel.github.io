<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>ã€é‡è¯†å‰ç«¯ã€‘å…¨é¢æ”»ç ´this | Derrick</title><meta name="description" content="ã€é‡è¯†å‰ç«¯ã€‘å…¨é¢æ”»ç ´this"><meta name="keywords" content="JavaScript,this"><meta name="author" content="Derrick"><meta name="copyright" content="Derrick"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="twitter:card" content="summary"><meta name="twitter:title" content="ã€é‡è¯†å‰ç«¯ã€‘å…¨é¢æ”»ç ´this"><meta name="twitter:description" content="ã€é‡è¯†å‰ç«¯ã€‘å…¨é¢æ”»ç ´this"><meta name="twitter:image" content="http://derricktel.github.io/image/cover/web.jpeg"><meta property="og:type" content="article"><meta property="og:title" content="ã€é‡è¯†å‰ç«¯ã€‘å…¨é¢æ”»ç ´this"><meta property="og:url" content="http://derricktel.github.io/2020/07/16/%E3%80%90%E9%87%8D%E8%AF%86%E5%89%8D%E7%AB%AF%E3%80%91%E5%85%A8%E9%9D%A2%E6%94%BB%E7%A0%B4this/"><meta property="og:site_name" content="Derrick"><meta property="og:description" content="ã€é‡è¯†å‰ç«¯ã€‘å…¨é¢æ”»ç ´this"><meta property="og:image" content="http://derricktel.github.io/image/cover/web.jpeg"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>var autoChangeMode = '1'
var t = Cookies.get("theme")
if (autoChangeMode == '1'){
  var isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
  var isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
  var isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined){
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport){
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour < 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
  }
  } else if (t == 'light') activateLightMode()
  else activateDarkMode()

} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="canonical" href="http://derricktel.github.io/2020/07/16/%E3%80%90%E9%87%8D%E8%AF%86%E5%89%8D%E7%AB%AF%E3%80%91%E5%85%A8%E9%9D%A2%E6%94%BB%E7%A0%B4this/"><link rel="prev" title="ã€é‡è¯†å‰ç«¯ã€‘ä¸€æ¬¡æå®šJavaScriptçš„æ‰§è¡Œæœºåˆ¶" href="http://derricktel.github.io/2020/08/10/%E3%80%90%E9%87%8D%E8%AF%86%E5%89%8D%E7%AB%AF%E3%80%91%E4%B8%80%E6%AC%A1%E6%90%9E%E5%AE%9A%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF/"><link rel="next" title="ã€é‡è¯†å‰ç«¯ã€‘é—­åŒ…ä¸æ¨¡å—" href="http://derricktel.github.io/2020/07/15/%E3%80%90%E9%87%8D%E8%AF%86%E5%89%8D%E7%AB%AF%E3%80%91%E9%97%AD%E5%8C%85%E4%B8%8E%E6%A8%A1%E5%9D%97/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"ç¹","msgToSimplifiedChinese":"ç°¡"},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  bookmark: {
    message_prev: 'æŒ‰',
    message_next: 'é”®å°†æœ¬é¡µåŠ å…¥ä¹¦ç­¾'
  },
  runtime_unit: 'å¤©',
  runtime: true,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  baiduPush: false,
  highlightCopy: true,
  highlightLang: true,
  highlightShrink: 'false',
  isFontAwesomeV5: false,
  isPhotoFigcaption: false
  
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isSidebar: true  
  }</script><noscript><style>
#page-header {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><meta name="generator" content="Hexo 4.2.0"></head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length_num">24</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length_num">38</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length_num">16</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> å½’æ¡£</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-about"></i><span> å…³äºæˆ‘</span></a></div></div></div></div><i class="fa fa-arrow-right on" id="toggle-sidebar" aria-hidden="true">     </i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">ç›®å½•</div><div class="sidebar-toc__progress"><span class="progress-notice">ä½ å·²ç»è¯»äº†</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#å‰è¨€"><span class="toc-number">1.</span> <span class="toc-text">å‰è¨€</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ç»‘å®šè§„åˆ™"><span class="toc-number">2.</span> <span class="toc-text">ç»‘å®šè§„åˆ™</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#é»˜è®¤ç»‘å®š"><span class="toc-number">2.1.</span> <span class="toc-text">é»˜è®¤ç»‘å®š</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ä¸¥æ ¼æ¨¡å¼"><span class="toc-number">2.1.1.</span> <span class="toc-text">ä¸¥æ ¼æ¨¡å¼</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#éšå¼ç»‘å®š"><span class="toc-number">2.2.</span> <span class="toc-text">éšå¼ç»‘å®š</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#éšå¼ä¸¢å¤±"><span class="toc-number">2.2.1.</span> <span class="toc-text">éšå¼ä¸¢å¤±</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#æ˜¾å¼ç»‘å®š"><span class="toc-number">2.3.</span> <span class="toc-text">æ˜¾å¼ç»‘å®š</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ç¡¬ç»‘å®š"><span class="toc-number">2.3.1.</span> <span class="toc-text">ç¡¬ç»‘å®š</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#new-ç»‘å®š"><span class="toc-number">2.4.</span> <span class="toc-text">new ç»‘å®š</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ç»‘å®šä¼˜å…ˆçº§"><span class="toc-number">2.5.</span> <span class="toc-text">ç»‘å®šä¼˜å…ˆçº§</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#æ€»ç»“"><span class="toc-number">2.5.1.</span> <span class="toc-text">æ€»ç»“</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ç»‘å®šä¾‹å¤–"><span class="toc-number">2.6.</span> <span class="toc-text">ç»‘å®šä¾‹å¤–</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#è¢«å¿½ç•¥çš„this"><span class="toc-number">2.6.1.</span> <span class="toc-text">è¢«å¿½ç•¥çš„this</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#é—´æ¥å¼•ç”¨"><span class="toc-number">2.6.2.</span> <span class="toc-text">é—´æ¥å¼•ç”¨</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#è½¯ç»‘å®š"><span class="toc-number">2.6.3.</span> <span class="toc-text">è½¯ç»‘å®š</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ç®­å¤´å‡½æ•°"><span class="toc-number">2.7.</span> <span class="toc-text">ç®­å¤´å‡½æ•°</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å®ç°callå’Œapply"><span class="toc-number">3.</span> <span class="toc-text">å®ç°callå’Œapply</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#äº†è§£callå’Œapply"><span class="toc-number">3.1.</span> <span class="toc-text">äº†è§£callå’Œapply</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#callå’Œapplyçš„åŒºåˆ«"><span class="toc-number">3.2.</span> <span class="toc-text">callå’Œapplyçš„åŒºåˆ«</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#åº”ç”¨åœºæ™¯"><span class="toc-number">3.3.</span> <span class="toc-text">åº”ç”¨åœºæ™¯</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#åˆå¹¶ä¸¤ä¸ªæ•°ç»„"><span class="toc-number">3.3.1.</span> <span class="toc-text">åˆå¹¶ä¸¤ä¸ªæ•°ç»„</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#éªŒè¯æ˜¯å¦æ˜¯æ•°ç»„"><span class="toc-number">3.3.2.</span> <span class="toc-text">éªŒè¯æ˜¯å¦æ˜¯æ•°ç»„</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#"><span class="toc-number">3.3.3.</span> <span class="toc-text"></span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#åŒæ ·æ˜¯æ£€æµ‹å¯¹è±¡ç±»å‹ï¼Œarr-toString-çš„ç»“æœå’ŒObject-prototype-toString-call-arr-çš„ç»“æœä¸ä¸€æ ·ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆï¼Ÿ"><span class="toc-number">3.3.4.</span> <span class="toc-text">åŒæ ·æ˜¯æ£€æµ‹å¯¹è±¡ç±»å‹ï¼Œarr.toString()çš„ç»“æœå’ŒObject.prototype.toString.call(arr)çš„ç»“æœä¸ä¸€æ ·ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆï¼Ÿ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ç±»æ•°ç»„å¯¹è±¡ï¼ˆArray-like-Objectï¼‰ä½¿ç”¨æ•°ç»„æ–¹æ³•"><span class="toc-number">3.3.5.</span> <span class="toc-text">ç±»æ•°ç»„å¯¹è±¡ï¼ˆArray-like Objectï¼‰ä½¿ç”¨æ•°ç»„æ–¹æ³•</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å®ç°call"><span class="toc-number">3.4.</span> <span class="toc-text">å®ç°call</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å®ç°apply"><span class="toc-number">3.5.</span> <span class="toc-text">å®ç°apply</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å®ç°bind"><span class="toc-number">4.</span> <span class="toc-text">å®ç°bind</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#äº†è§£bind"><span class="toc-number">4.0.1.</span> <span class="toc-text">äº†è§£bind</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#bindå’Œapplyï¼Œcallä¸¤å…„å¼Ÿçš„åŒºåˆ«"><span class="toc-number">4.0.2.</span> <span class="toc-text">bindå’Œapplyï¼Œcallä¸¤å…„å¼Ÿçš„åŒºåˆ«</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#å®ç°bind-1"><span class="toc-number">4.0.3.</span> <span class="toc-text">å®ç°bind</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#é¡¶é…"><span class="toc-number">4.0.4.</span> <span class="toc-text">é¡¶é…</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å®ç°new"><span class="toc-number">5.</span> <span class="toc-text">å®ç°new</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#äº†è§£new"><span class="toc-number">5.0.1.</span> <span class="toc-text">äº†è§£new</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#å®ç°ä¸€ä¸ªnew"><span class="toc-number">5.0.2.</span> <span class="toc-text">å®ç°ä¸€ä¸ªnew</span></a></li></ol></li></ol></li></ol></div></div></div><div id="body-wrap"><div class="post-bg" id="nav" style="background-image: url(/image/cover/web.jpeg)"><div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">Derrick</a></span><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> å½’æ¡£</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-about"></i><span> å…³äºæˆ‘</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span></span></div><div id="post-info"><div id="post-title"><div class="posttitle">ã€é‡è¯†å‰ç«¯ã€‘å…¨é¢æ”»ç ´this</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="å‘è¡¨äº 2020-07-16 22:02:55"><i class="fa fa-calendar" aria-hidden="true"></i> å‘è¡¨äº 2020-07-16</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="æ›´æ–°äº 2020-07-22 22:14:15"><i class="fa fa-history" aria-hidden="true"></i> æ›´æ–°äº 2020-07-22</span></time><span class="post-meta__categories"><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/%E9%87%8D%E6%8B%BE%E5%89%8D%E7%AB%AF/">é‡æ‹¾å‰ç«¯</a></span></div><div class="meta-secondline"> </div><div class="meta-thirdline"><span class="post-meta-pv-cv"><i class="fa fa-eye post-meta__icon" aria-hidden="true"> </i><span>é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-commentcount"></span></div></div></div></div><main class="layout_post" id="content-inner"><article id="post"><div id="article-container"><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å…¶å®è¯´èµ·thisï¼Œè¿™ä¸ªå‡ ä¹æ˜¯å‰ç«¯é¢è¯•å¿…è€ƒé¢˜ï¼Œä¹Ÿæ˜¯å‰ç«¯æœ€å¤šâ€œè„‘ç»æ€¥è½¬å¼¯â€çš„åœ°æ–¹ï¼Œä¹Ÿæ˜¯è®©æ— æ•°å‰ç«¯äººçƒ¦æ¼çš„åœ°æ–¹ã€‚ä»Šå¤©æˆ‘ä»¬å°±å½»åº•çš„æ·±å…¥thisï¼Œå…¨é¢çš„æ”»ç ´å®ƒï¼</p>
<h2 id="ç»‘å®šè§„åˆ™"><a href="#ç»‘å®šè§„åˆ™" class="headerlink" title="ç»‘å®šè§„åˆ™"></a>ç»‘å®šè§„åˆ™</h2><p>æˆ‘ä»¬æ¥çœ‹çœ‹åœ¨å‡½æ•°çš„æ‰§è¡Œè¿‡ç¨‹ä¸­è°ƒç”¨ä½ç½®å¦‚ä½•å†³å®š this çš„ç»‘å®šå¯¹è±¡ã€‚</p>
<p>ä½ å¿…é¡»æ‰¾åˆ°è°ƒç”¨ä½ç½®ï¼Œç„¶ååˆ¤æ–­éœ€è¦åº”ç”¨ä¸‹é¢å››æ¡è§„åˆ™ä¸­çš„å“ªä¸€æ¡ã€‚æˆ‘ä»¬é¦–å…ˆä¼šåˆ†åˆ«è§£é‡Š è¿™å››æ¡è§„åˆ™ï¼Œç„¶åè§£é‡Šå¤šæ¡è§„åˆ™éƒ½å¯ç”¨æ—¶å®ƒä»¬çš„ä¼˜å…ˆçº§å¦‚ä½•æ’åˆ—ã€‚</p>
<p>thisçš„ç»‘å®šè§„åˆ™æ€»å…±æœ‰ä»¥ä¸‹5ç§ï¼š</p>
<ol>
<li>é»˜è®¤ç»‘å®šï¼ˆæœ€ä»¤äººå¤´ç–¼çš„ï¼‰<ol>
<li>ä¸¥æ ¼æ¨¡å¼</li>
<li>éä¸¥æ ¼æ¨¡å¼</li>
</ol>
</li>
<li>éšå¼ç»‘å®š</li>
<li>æ˜¾å¼ç»‘å®š<ol>
<li>bind</li>
<li>call</li>
<li>apply</li>
</ol>
</li>
<li>newç»‘å®š</li>
</ol>
<h3 id="é»˜è®¤ç»‘å®š"><a href="#é»˜è®¤ç»‘å®š" class="headerlink" title="é»˜è®¤ç»‘å®š"></a>é»˜è®¤ç»‘å®š</h3><p>é»˜è®¤ç»‘å®šé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯æ²¡äººè¦çš„â€œå­¤å„¿â€å°±ä¼šåº”ç”¨é»˜è®¤ç»‘å®šã€‚</p>
<p>æ€è€ƒğŸ¤”ä¸€ä¸‹ğŸ‘‡çš„ä»£ç ä¼šè¾“å‡ºä»€ä¹ˆï¼Ÿ</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="string">'out'</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fnc</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="string">'in'</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.a)</span><br><span class="line">&#125;</span><br><span class="line">fnc();</span><br></pre></td></tr></table></figure>

<p><strong>ç­”æ¡ˆæ˜¯ï¼šâ€™outâ€™</strong></p>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å½“è°ƒç”¨ <code>fnc()</code> æ—¶ï¼Œ<code>this.a</code> è¢«è§£ææˆäº†å…¨å±€å˜é‡ <code>a</code>ã€‚ä¸ºä»€ä¹ˆ?å› ä¸ºåœ¨æœ¬ ä¾‹ä¸­ï¼Œå‡½æ•°è°ƒç”¨æ—¶åº”ç”¨äº† <code>this</code> çš„é»˜è®¤ç»‘å®šï¼Œå› æ­¤ <code>this</code> æŒ‡å‘å…¨å±€å¯¹è±¡ã€‚</p>
<p>é‚£æˆ‘ä»¬æ€ä¹ˆçŸ¥é“ä»–æ˜¯åº”ç”¨äº†é»˜è®¤ç»‘å®šå‘¢ï¼Ÿ</p>
<p>æˆ‘ä»¬å‘ç° <code>fnc</code> ä»–åªæ˜¯å­¤é›¶é›¶çš„è¢«è°ƒç”¨ï¼Œæ²¡æœ‰ä»»ä½•çš„ä¿®é¥°<em>ï¼ˆè°ƒç”¨ä½ç½®æ˜¯å¦æœ‰ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œæˆ–è€…è¯´æ˜¯å¦è¢«æŸä¸ªå¯¹è±¡æ‹¥æœ‰æˆ–è€…åŒ…å«ï¼Œä¸è¿‡è¿™ç§è¯´æ³•å¯èƒ½ä¼šé€ æˆä¸€äº›è¯¯å¯¼ã€‚ï¼‰</em>ï¼Œæ‰€ä»¥å®ƒå°±ç›¸å½“äºæ˜¯æ²¡æœ‰äººè¦çš„<code>å­©å­</code>ï¼Œåªèƒ½å»<code>ç¦åˆ©é™¢</code>â€”é»˜è®¤ç»‘å®šã€‚</p>
<p>è¿™æ ·è¯´å¯èƒ½è¿˜ä¸å¤ªæ˜ç™½é»˜è®¤ç»‘å®šç©¶ç«Ÿæ˜¯æ€ä¹ˆä¸€å›äº‹ã€‚ç­‰åˆ°åé¢çš„è§„åˆ™ä»‹ç»çš„å¤šäº†ï¼Œä½ å°±ä¼šå‘ç°æ²¡æœ‰åº”ç”¨å…¶ä»–è§„åˆ™çš„â€œå­¤å„¿â€åªèƒ½æ¥ç¦åˆ©é™¢ â€”é»˜è®¤ç»‘å®šçš„æ€€æŠ±</p>
<h4 id="ä¸¥æ ¼æ¨¡å¼"><a href="#ä¸¥æ ¼æ¨¡å¼" class="headerlink" title="ä¸¥æ ¼æ¨¡å¼"></a>ä¸¥æ ¼æ¨¡å¼</h4><p>åœ¨ä¸¥æ ¼ä¸‹ï¼Œé»˜è®¤ç»‘å®šä¸æ˜¯ç»‘å®šåˆ°<code>window</code>ï¼Œè€Œæ˜¯<code>undefined</code>ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="string">'out'</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fnc</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="meta">	"use strict"</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> a = <span class="string">'in'</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.a)</span><br><span class="line">&#125;</span><br><span class="line">fnc();</span><br></pre></td></tr></table></figure>

<p><strong>ç­”æ¡ˆæ˜¯ï¼šæŠ¥é”™</strong></p>
<p>ä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºæˆ‘ä»¬æƒ³åœ¨<code>undefined</code>é‡Œé¢æ‰¾<code>a</code>ï¼Œé‚£è‚¯å®šæ˜¯æŠ¥é”™çš„</p>
<h3 id="éšå¼ç»‘å®š"><a href="#éšå¼ç»‘å®š" class="headerlink" title="éšå¼ç»‘å®š"></a>éšå¼ç»‘å®š</h3><p>éšå¼ç»‘å®šï¼Œé¡¾åæ€ä¹‰å°±æ˜¯æ‚„æ‚„çš„ç»‘å®šï¼Œæˆ–è€…è¯´å…¬è®¤çš„ï¼Œä½†æ˜¯æ²¡æœ‰æ˜è¯´çš„ç»‘å®šã€‚å°±å¥½æ¯”ä¸€ä¸ªç”·äººå’Œä¸€ä¸ªå¥³äººæ‰‹ç‰µæ‰‹èµ°åœ¨ä¸€èµ·ï¼Œä»–ä»¬åŸºæœ¬ä¸Šå¯ä»¥è®¤å®šå°±æ˜¯åœ¨æƒ…ä¾£ï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰å¯èƒ½ä¼šæ˜¯â€œå·æƒ…â€ï¼ˆæ˜ å°„åˆ°éšå¼ç»‘å®šçš„éšå¼ä¸¢å¤±ï¼Œç­‰ä¼šä¼šè¯´åˆ°ã€‚ï¼‰</p>
<p>æ€è€ƒğŸ¤”ä¸€ä¸‹ğŸ‘‡çš„ä»£ç ä¼šè¾“å‡ºä»€ä¹ˆï¼Ÿ</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="string">'out'</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fnc</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.a)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  a: <span class="string">'in'</span>,</span><br><span class="line">  fnc: fnc</span><br><span class="line">&#125;</span><br><span class="line">obj.fnc();</span><br></pre></td></tr></table></figure>

<p><strong>ç­”æ¡ˆæ˜¯ï¼šâ€™inâ€™</strong></p>
<p>æˆ‘ä»¬å¯ä»¥æ³¨æ„åˆ°ï¼Œ<code>fnc</code> æ˜¯åœ¨ä»€ä¹ˆæƒ…å†µä¸‹è¢«è°ƒç”¨çš„ï¼Ÿæ˜¯<code>obj</code> è°ƒç”¨çš„ï¼Œè¯´æ˜è¿™ä¸ª<code>fnc</code>å·²ç»æœ‰ä¸»äº†ï¼ŒæŠ¤èŠ±ä½¿è€…æ˜¯<code>obj</code>ï¼Œæ‰€ä»¥<code>fnc</code>è¯´çš„è¯è‚¯å®šæ˜¯å‘ç€<code>obj</code>çš„ï¼Œèƒ³è†Šè‚˜ä¸ä¼šå¾€å¤–æ‹ã€‚</p>
<p>å…¶å®è¿™é‡Œé¢æœ‰ä¸€ä¸ªå°çš„ç‚¹éœ€è¦æ³¨æ„ï¼Œé‚£å°±æ˜¯å¦‚æœæ˜¯å¤šä¸ªå¯¹è±¡å¼•ç”¨çš„è°ƒç”¨ï¼Œé‚£è¿™ä¸ªæ—¶å€™çš„æ‰§è¡Œä¸Šä¸‹æ–‡åˆæ˜¯è°çš„å‘¢ï¼Ÿ</p>
<p>å…¶å®æˆ‘ä»¬ç”¨å¸¸ç†å°±å¯ä»¥è§£é‡Šè¿™ä¸ªé—®é¢˜ï¼ŒAå«Bå»åƒé¥­ï¼Œä½†æ˜¯Bæƒ³å«Cä¸€èµ·å»ï¼Œç»“æœAå’ŒBèµ·äº†å†²çªï¼Œä½ ä½œä¸ºè¿™ä¸ªCä½ ä¼šå‘ç€è°ï¼Ÿé‚£è‚¯å®šæ˜¯Bï¼Œå› ä¸ºæœ‰Cå«ä½ å»ï¼Œä½ ä»¬æ‰ä¼šå‡ºç°åœ¨è¿™åœºèšä¼šã€‚æ‰€ä»¥è¿™ä¸ªé—®é¢˜ä¸éš¾å›ç­”ã€‚æˆ‘ä»¬ç›´æ¥çœ‹ä¸€ä¸ªä¾‹å­ğŸŒ°</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">'aa'</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fnc</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> bb = &#123;</span><br><span class="line">  name: <span class="string">'bb'</span>,</span><br><span class="line">  fnc: fnc</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> cc = &#123;</span><br><span class="line">  name: <span class="string">'cc'</span>,</span><br><span class="line">  bb: bb</span><br><span class="line">&#125;</span><br><span class="line">cc.bb.fnc();</span><br></pre></td></tr></table></figure>

<p><strong>ç­”æ¡ˆæ˜¯ï¼šbb</strong></p>
<p>ä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºèƒ½è®©<code>fnc</code>è¢«è°ƒç”¨çš„æ˜¯<code>bb</code>ï¼Œæ²¡æœ‰<code>bb</code>ï¼Œ<code>fnc</code>æ ¹æœ¬æ²¡æœ‰æœºä¼šç™»åœºã€‚</p>
<h4 id="éšå¼ä¸¢å¤±"><a href="#éšå¼ä¸¢å¤±" class="headerlink" title="éšå¼ä¸¢å¤±"></a>éšå¼ä¸¢å¤±</h4><p>å‰é¢è¯´è¿‡ï¼Œè™½ç„¶å¾ˆå¤šä¸œè¥¿è¡¨ä¸Šé¢çœ‹èµ·æ¥éƒ½å¾ˆæ­£å¸¸ï¼Œä½†æ˜¯ä¹Ÿæœ‰å¯èƒ½æœ‰ä¸€äº›å…¶ä»–çŠ¶å†µçš„å‡ºç°ã€‚æ¯”å¦‚éšå¼ç»‘å®šé‡Œé¢çš„éšå¼ä¸¢å¤±ã€‚</p>
<p>æˆ‘ä»¬æŠŠä¹‹å‰çš„ä¾‹å­ä¿®æ”¹ä¸€ä¸‹</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">'aa'</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fnc</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> bb = &#123;</span><br><span class="line">  name: <span class="string">'bb'</span>,</span><br><span class="line">  fnc: fnc</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> cc = &#123;</span><br><span class="line">  name: <span class="string">'cc'</span>,</span><br><span class="line">  bb: bb</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> aa = cc.bb.fnc;</span><br><span class="line">aa()</span><br></pre></td></tr></table></figure>

<p><strong>ç­”æ¡ˆæ˜¯ï¼šaa</strong></p>
<p>ä¸ºä»€ä¹ˆï¼Ÿè¿™ä¸ªå…¶å®ä¹Ÿå¾ˆå¥½ç†è§£ï¼Œè¿™ä¸ª<code>fnc</code>å¹¶æ²¡æœ‰è¢«<code>bb</code>è°ƒç”¨ï¼ŒçœŸæ­£è°ƒç”¨çš„åœ°æ–¹æ˜¯åœ¨<code>window</code>é‡Œé¢å£°æ˜çš„ä¸€ä¸ªå˜é‡<code>aa</code>ã€‚æ‰€ä»¥<code>bb</code>ä¸¢å¤±äº†<code>fnc</code>çš„ä¿¡ä»»ï¼Œ<code>fnc</code>æ— å¤„å¯å»ï¼Œåªèƒ½å»å­¤å„¿é™¢ã€‚</p>
<p>è¿˜æ˜¯åˆšåˆšåƒé¥­çš„ä¾‹å­ï¼Œæˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹åœºæ™¯å°±å¾ˆå¥½ç†è§£äº†ã€‚</p>
<p>Aå«Bå»åƒé¥­ï¼ŒBæŠŠCçš„è”ç³»æ–¹å¼ä¸å°å¿ƒå¼„ä¸¢äº†ï¼Œç»“æœè¢«ä¸€ä¸ªé™Œç”ŸäººDæ¡å»äº†ï¼Œåˆšåˆšå¥½Dä¹Ÿè¦å‚åŠ èšä¼šï¼Œå°±æ‰“ç”µè¯å«äº†Dä¸€èµ·å‚åŠ èšä¼šã€‚ä½†æ˜¯Cä¸è®¤è¯†Dï¼Œå«ä»–å»çš„ä¸æ˜¯ç†ŸäººBï¼Œæ‰€ä»¥è°ä¹Ÿä¿¡ä¸è¿‡ã€‚æœ€ç»ˆåªèƒ½åº”ç”¨é»˜è®¤è§„åˆ™â€“é»˜è®¤ç»‘å®šäº†ã€‚</p>
<p>è¿˜æœ‰ä¸€ç§æƒ…å†µæ˜¯éå¸¸å¸¸è§çš„ï¼Œä¹Ÿæ˜¯éšå¼ä¸¢å¤±ï¼Œé‚£å°±æ˜¯å›è°ƒå‡½æ•°ã€‚</p>
<p>çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">'window'</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fnc</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ffnncc</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  fn()</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  name: <span class="string">'obj'</span>,</span><br><span class="line">  fnc: fnc,</span><br><span class="line">&#125;</span><br><span class="line">ffnncc(obj.fnc)</span><br></pre></td></tr></table></figure>

<p><strong>ç­”æ¡ˆæ˜¯ï¼šwidnow</strong></p>
<p>ä¸ºä»€ä¹ˆï¼Ÿè¿™å’Œä¹‹å‰çš„é‚£ä¸ªä¾‹å­ä¸€æ ·ï¼Œè¡¨é¢ä¸Šçœ‹èµ·æ¥å¥½åƒæ˜¯<code>obj</code>è°ƒç”¨çš„ï¼Œä½†æ˜¯å…¶å®æ˜¯<code>obj</code>æŠŠè°ƒç”¨<code>fnc</code>çš„æ–¹æ³•è½¬äº¤ç»™äº†åˆ«äººï¼Œç”±<code>fnc</code>ä¸è®¤è¯†çš„æ¥è°ƒç”¨äº†ã€‚</p>
<p>å†æ¥çœ‹ä¸€ä¸ªé¢è¯•é¢˜ç»å¸¸è€ƒçš„é¢˜ç›®ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">'window'</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fnc</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  name: <span class="string">'obj'</span>,</span><br><span class="line">  fnc: fnc,</span><br><span class="line">&#125;</span><br><span class="line">setTimeout(obj.fnc, <span class="number">100</span>)</span><br></pre></td></tr></table></figure>

<p><strong>ç­”æ¡ˆæ˜¯ï¼šwidnow</strong></p>
<p>æˆ‘ç›¸ä¿¡ä¸ç”¨è§£é‡Šä½ ä¹Ÿæ‰¾åˆ°ä¸ºä»€ä¹ˆäº†å§ï¼Ÿ<code>fnc</code>çš„è”ç³»æ–¹å¼è¢«<code>obj</code>è½¬äº¤ç»™åˆ«äººäº†ï¼</p>
<p>å“ˆå“ˆå“ˆå“ˆï¼Œæœ‰æ²¡æœ‰æ„Ÿè§‰thiså…¶å®ä¹Ÿä¸è¿‡å¦‚æ­¤ï¼Œso easyï¼</p>
<blockquote>
<p>æ€è€ƒé¢˜ï¼šé‚£ä¹ˆreactä¸­çš„å‡½æ•°è°ƒç”¨ä¸ºä»€ä¹ˆè¦ç”¨ç®­å¤´å‡½æ•°æˆ–è€…ä¸ºä»€ä¹ˆè¦åœ¨constructoré‡Œé¢bindä¸€ä¸‹ã€‚</p>
</blockquote>
<h3 id="æ˜¾å¼ç»‘å®š"><a href="#æ˜¾å¼ç»‘å®š" class="headerlink" title="æ˜¾å¼ç»‘å®š"></a>æ˜¾å¼ç»‘å®š</h3><p>æˆ‘ä»¬åˆšåˆšçœ‹åˆ°çš„æ˜¯éšå¼ç»‘å®šï¼Œæ˜¯å·å·æ‘¸æ‘¸çš„é‚£ç§ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å°±ä»‹ç»ä¸€ä¸‹æ˜¾å¼ç»‘å®šï¼Œå…‰æ˜æ­£å¤§çš„é‚£ç§ã€‚</p>
<p>é‚£ä¹ˆå¦‚æœæˆ‘ä»¬ä¸æƒ³åœ¨å¯¹è±¡å†…éƒ¨åŒ…å«å‡½æ•°å¼•ç”¨ï¼Œè€Œæƒ³åœ¨æŸä¸ªå¯¹è±¡ä¸Šå¼ºåˆ¶è°ƒç”¨å‡½æ•°ï¼Œè¯¥æ€ä¹ˆ</p>
<p>åšå‘¢?</p>
<p>JavaScript ä¸­çš„â€œæ‰€æœ‰â€å‡½æ•°éƒ½æœ‰ä¸€äº›æœ‰ç”¨çš„ç‰¹æ€§(è¿™å’Œå®ƒä»¬çš„ [[ åŸå‹ ]] æœ‰å…³â€”â€”ä¹‹åæˆ‘ ä»¬ä¼šè¯¦ç»†ä»‹ç»åŸå‹)ï¼Œå¯ä»¥ç”¨æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å…·ä½“ç‚¹è¯´ï¼Œå¯ä»¥ä½¿ç”¨å‡½æ•°çš„ call(..) å’Œ apply(..) æ–¹æ³•ã€‚ä¸¥æ ¼æ¥è¯´ï¼ŒJavaScript çš„å®¿ä¸»ç¯å¢ƒæœ‰æ—¶ä¼šæä¾›ä¸€äº›éå¸¸ç‰¹æ®Šçš„å‡½æ•°ï¼Œå®ƒä»¬ å¹¶æ²¡æœ‰è¿™ä¸¤ä¸ªæ–¹æ³•ã€‚ä½†æ˜¯è¿™æ ·çš„å‡½æ•°éå¸¸ç½•è§ï¼ŒJavaScript æä¾›çš„ç»å¤§å¤šæ•°å‡½æ•°ä»¥åŠä½ è‡ª å·±åˆ›å»ºçš„æ‰€æœ‰å‡½æ•°éƒ½å¯ä»¥ä½¿ç”¨ call(..) å’Œ apply(..) æ–¹æ³•ã€‚</p>
<p>çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="string">'window'</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">	<span class="built_in">console</span>.log( <span class="keyword">this</span>.a );</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj = &#123; </span><br><span class="line">	a:<span class="string">'obj'</span></span><br><span class="line">&#125;;</span><br><span class="line">foo.call( obj );</span><br><span class="line">foo()</span><br></pre></td></tr></table></figure>

<p><strong>ç­”æ¡ˆçš„å…ˆåé¡ºåºæ˜¯ï¼šobjï¼Œwindow</strong></p>
<p>é€šè¿‡ foo.call(..)ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è°ƒç”¨ foo æ—¶å¼ºåˆ¶æŠŠå®ƒçš„ this ç»‘å®šåˆ° obj ä¸Šã€‚</p>
<p>å¯æƒœï¼Œæ˜¾å¼ç»‘å®šä»ç„¶æ— æ³•è§£å†³æˆ‘ä»¬ä¹‹å‰æå‡ºçš„ä¸¢å¤±ç»‘å®šé—®é¢˜ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayHi</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Hello,'</span>, <span class="keyword">this</span>.name);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">    name: <span class="string">'YvetteLau'</span>,</span><br><span class="line">    sayHi: sayHi</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> name = <span class="string">'Wiliam'</span>;</span><br><span class="line"><span class="keyword">var</span> Hi = <span class="function"><span class="keyword">function</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">    fn();</span><br><span class="line">&#125;</span><br><span class="line">Hi.call(person, person.sayHi);</span><br></pre></td></tr></table></figure>

<p><strong>ç­”æ¡ˆæ˜¯ï¼šHello, Wiliam</strong></p>
<p>å…¶å®æˆ‘ä»¬ä¸éš¾å‘ç°ï¼Œè¿™ä¸ª<code>fn</code>ä¸æ˜¯ç›´æ¥è¢«è°ƒç”¨çš„ï¼Œæ‰€ä»¥é€ æˆäº†éšå¼ä¸¢å¤±ã€‚æˆ‘ä»¬çš„<code>call</code>ç»‘å®šçš„<code>person</code>å…¶å®ç»‘å®šåœ¨äº†<code>Hi</code>ä¸Šé¢äº†ï¼Œä¸ä¿¡çš„è¯æˆ‘ä»¬æ”¹ä¸€ä¸‹ä½ å°±ä¼šå‘ç°äº†ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayHi</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Hello,'</span>, <span class="keyword">this</span>.name);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">    name: <span class="string">'YvetteLau'</span>,</span><br><span class="line">    sayHi: sayHi</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> name = <span class="string">'Wiliam'</span>;</span><br><span class="line"><span class="keyword">var</span> Hi = <span class="function"><span class="keyword">function</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  	<span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</span><br><span class="line">    fn();</span><br><span class="line">&#125;</span><br><span class="line">Hi.call(person, person.sayHi);</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºäº†ä»€ä¹ˆï¼Ÿ</p>
<p><strong>YvetteLau</strong></p>
<p><strong>Hello, Wiliam</strong></p>
<p>é‚£ä¹ˆå’‹åŠå‘¢ï¼Ÿåˆ«æ€•æ˜¾ç¤ºç»‘å®šçš„å˜å¼‚ç‰ˆï¼Œç¡¬ç»‘å®šå¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<h4 id="ç¡¬ç»‘å®š"><a href="#ç¡¬ç»‘å®š" class="headerlink" title="ç¡¬ç»‘å®š"></a>ç¡¬ç»‘å®š</h4><p>ç¡¬ç»‘å®šå…¶å®å°±æ˜¯åœ¨æœ€åä¸€å±‚ç»™ä»–è¿›è¡Œæ˜¾ç¤ºç»‘å®šã€‚</p>
<p>è¯·çœ‹ä»£ç ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayHi</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Hello,'</span>, <span class="keyword">this</span>.name);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">    name: <span class="string">'YvetteLau'</span>,</span><br><span class="line">    sayHi: sayHi</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> name = <span class="string">'Wiliam'</span>;</span><br><span class="line"><span class="keyword">var</span> Hi = <span class="function"><span class="keyword">function</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  	<span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</span><br><span class="line">    fn.call(person);</span><br><span class="line">&#125;</span><br><span class="line">Hi(person.sayHi);</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºäº†ä»€ä¹ˆï¼Ÿ</p>
<p><strong>YvetteLau</strong></p>
<p><strong>Hello, Wiliam</strong></p>
<p>è™½ç„¶æˆ‘ä»¬è°ƒç”¨<code>Hi</code>çš„æ—¶å€™ï¼Œåœ¨<code>call</code>ä¹‹å‰<code>this</code>è¿˜æ˜¯æŒ‡å‘äº†<code>window</code>ï¼Œä½†æ˜¯æˆ‘ä»¬ç”¨<code>call</code>ç»™ä»–ç»‘å®šä¸Šäº†<code>person</code>ã€‚æ— è®ºä¹‹åå¦‚ä½•è°ƒç”¨å‡½æ•° <code>fn</code>ï¼Œå®ƒ æ€»ä¼šæ‰‹åŠ¨åœ¨ <code>person</code> ä¸Šè°ƒç”¨ <code>fn</code>ã€‚è¿™ç§ç»‘å®šæ˜¯ä¸€ç§æ˜¾å¼çš„å¼ºåˆ¶ç»‘å®šï¼Œå› æ­¤æˆ‘ä»¬ç§°ä¹‹ä¸ºç¡¬ç»‘å®šã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log( <span class="keyword">this</span>.a );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    a: <span class="number">2</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> bar = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    foo.call( obj );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">bar(); <span class="comment">// 2</span></span><br><span class="line">setTimeout( bar, <span class="number">100</span> ); <span class="comment">// 2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¡¬ç»‘å®šçš„barä¸å¯èƒ½å†ä¿®æ”¹å®ƒçš„this</span></span><br><span class="line">bar.call( <span class="built_in">window</span> ); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>

<p>å…¸å‹åº”ç”¨åœºæ™¯æ˜¯åˆ›å»ºä¸€ä¸ªåŒ…è£¹å‡½æ•°ï¼Œè´Ÿè´£æ¥æ”¶å‚æ•°å¹¶è¿”å›å€¼ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">something</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log( <span class="keyword">this</span>.a, something );</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.a + something;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    a: <span class="number">2</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> bar = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> foo.apply( obj, <span class="built_in">arguments</span> );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> b = bar( <span class="number">3</span> ); <span class="comment">// 2 3</span></span><br><span class="line"><span class="built_in">console</span>.log( b ); <span class="comment">// 5</span></span><br></pre></td></tr></table></figure>

<p>åˆ›å»ºä¸€ä¸ªå¯ä»¥é‡å¤ä½¿ç”¨çš„è¾…åŠ©å‡½æ•°ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">something</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log( <span class="keyword">this</span>.a, something );</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.a + something;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç®€å•çš„è¾…åŠ©ç»‘å®šå‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bind</span>(<span class="params">fn, obj</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> fn.apply( obj, <span class="built_in">arguments</span> );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    a: <span class="number">2</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> bar = bind( foo, obj );</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> b = bar( <span class="number">3</span> ); <span class="comment">// 2 3</span></span><br><span class="line"><span class="built_in">console</span>.log( b ); <span class="comment">// 5</span></span><br></pre></td></tr></table></figure>

<p>ES5å†…ç½®äº†<code>Function.prototype.bind</code>ï¼Œbindä¼šè¿”å›ä¸€ä¸ªç¡¬ç»‘å®šçš„æ–°å‡½æ•°ï¼Œç”¨æ³•å¦‚ä¸‹ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">something</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log( <span class="keyword">this</span>.a, something );</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.a + something;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    a: <span class="number">2</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> bar = foo.bind( obj );</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> b = bar( <span class="number">3</span> ); <span class="comment">// 2 3</span></span><br><span class="line"><span class="built_in">console</span>.log( b ); <span class="comment">// 5</span></span><br></pre></td></tr></table></figure>

<p>APIè°ƒç”¨çš„â€œä¸Šä¸‹æ–‡â€</p>
<p>JSè®¸å¤šå†…ç½®å‡½æ•°æä¾›äº†ä¸€ä¸ªå¯é€‰å‚æ•°ï¼Œè¢«ç§°ä¹‹ä¸ºâ€œä¸Šä¸‹æ–‡â€ï¼ˆcontextï¼‰ï¼Œå…¶ä½œç”¨å’Œ<code>bind(..)</code>ä¸€æ ·ï¼Œç¡®ä¿å›è°ƒå‡½æ•°ä½¿ç”¨æŒ‡å®šçš„thisã€‚è¿™äº›å‡½æ•°å®é™…ä¸Šé€šè¿‡<code>call(..)</code>å’Œ<code>apply(..)</code>å®ç°äº†æ˜¾å¼ç»‘å®šã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">el</span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log( el, <span class="keyword">this</span>.id );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    id: <span class="string">"awesome"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> myArray = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="comment">// è°ƒç”¨foo(..)æ—¶æŠŠthisç»‘å®šåˆ°obj</span></span><br><span class="line">myArray.forEach( foo, obj );</span><br><span class="line"><span class="comment">// 1 awesome 2 awesome 3 awesome</span></span><br></pre></td></tr></table></figure>

<h3 id="new-ç»‘å®š"><a href="#new-ç»‘å®š" class="headerlink" title="new ç»‘å®š"></a>new ç»‘å®š</h3><p>ä½¿ç”¨ new æ¥è°ƒç”¨å‡½æ•°ï¼Œæˆ–è€…è¯´å‘ç”Ÿæ„é€ å‡½æ•°è°ƒç”¨æ—¶ï¼Œä¼šè‡ªåŠ¨æ‰§è¡Œä¸‹é¢çš„æ“ä½œã€‚</p>
<ol>
<li>åˆ›å»º(æˆ–è€…è¯´æ„é€ )ä¸€ä¸ªå…¨æ–°çš„å¯¹è±¡ã€‚</li>
<li>è¿™ä¸ªæ–°å¯¹è±¡ä¼šè¢«æ‰§è¡Œ[[åŸå‹]]è¿æ¥ã€‚</li>
<li>è¿™ä¸ªæ–°å¯¹è±¡ä¼šç»‘å®šåˆ°å‡½æ•°è°ƒç”¨çš„thisã€‚</li>
<li>å¦‚æœå‡½æ•°æ²¡æœ‰è¿”å›å…¶ä»–å¯¹è±¡ï¼Œé‚£ä¹ˆnewè¡¨è¾¾å¼ä¸­çš„å‡½æ•°è°ƒç”¨ä¼šè‡ªåŠ¨è¿”å›è¿™ä¸ªæ–°å¯¹è±¡ã€‚</li>
</ol>
<p>æ€è€ƒä¸‹é¢çš„ä»£ç :</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">4</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">a</span>) </span>&#123; </span><br><span class="line">  <span class="keyword">this</span>.a = a;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> bar = <span class="keyword">new</span> foo(<span class="number">2</span>); </span><br><span class="line"><span class="built_in">console</span>.log( bar.a );  <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨<code>new</code>æ¥è°ƒç”¨<code>foo(..)</code>æ—¶ï¼Œä¼šæ„é€ ä¸€ä¸ªæ–°å¯¹è±¡å¹¶æŠŠå®ƒï¼ˆ<code>bar</code>ï¼‰ç»‘å®šåˆ°<code>foo(..)</code>è°ƒç”¨ä¸­çš„thisã€‚</p>
<h3 id="ç»‘å®šä¼˜å…ˆçº§"><a href="#ç»‘å®šä¼˜å…ˆçº§" class="headerlink" title="ç»‘å®šä¼˜å…ˆçº§"></a>ç»‘å®šä¼˜å…ˆçº§</h3><p>çœ‹å®Œè§„åˆ™ï¼Œæˆ‘ä»¬è‚¯å®šæƒ³çŸ¥é“å¦‚æœè¿™äº›è§„åˆ™æ’åœ¨ä¸€èµ·ï¼Œæˆ‘ä»¬åˆè¯¥å¬è°çš„å‘¢ï¼Ÿ</p>
<p>æ¯«æ— ç–‘é—®ï¼Œé»˜è®¤ç»‘å®šçš„ä¼˜å…ˆçº§æ˜¯å››æ¡è§„åˆ™ä¸­æœ€ä½çš„ï¼Œå› ä¸ºæ˜¯æ²¡äººåº”ç”¨ä»»ä½•è§„åˆ™æ‰ä¼šå»åº”ç”¨é»˜è®¤ç»‘å®šã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥å…ˆä¸è€ƒè™‘å®ƒã€‚ éšå¼ç»‘å®šå’Œæ˜¾å¼ç»‘å®šå“ªä¸ªä¼˜å…ˆçº§æ›´é«˜?æˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">	<span class="built_in">console</span>.log( <span class="keyword">this</span>.a );</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj1 = &#123; </span><br><span class="line">	a: <span class="number">2</span>,</span><br><span class="line">	foo: foo </span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> obj2 = &#123; </span><br><span class="line">	a: <span class="number">3</span>,</span><br><span class="line">	foo: foo </span><br><span class="line">&#125;;</span><br><span class="line">obj1.foo(); <span class="comment">// 2 </span></span><br><span class="line">obj2.foo(); <span class="comment">// 3</span></span><br><span class="line">obj1.foo.call( obj2 ); <span class="comment">// 3 </span></span><br><span class="line">obj2.foo.call( obj1 ); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ°ï¼Œæ˜¾å¼ç»‘å®šä¼˜å…ˆçº§æ›´é«˜ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨åˆ¤æ–­æ—¶åº”å½“å…ˆè€ƒè™‘æ˜¯å¦å¯ä»¥åº”ç”¨æ˜¾å¼ç»‘å®šã€‚ ç°åœ¨æˆ‘ä»¬éœ€è¦ææ¸…æ¥š new ç»‘å®šå’Œéšå¼ç»‘å®šçš„ä¼˜å…ˆçº§è°é«˜è°ä½:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">something</span>) </span>&#123; 	</span><br><span class="line">	<span class="keyword">this</span>.a = something;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj1 = &#123; </span><br><span class="line">	foo: foo</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> obj2 = &#123;&#125;;</span><br><span class="line">obj1.foo( <span class="number">2</span> );</span><br><span class="line"><span class="built_in">console</span>.log( obj1.a ); <span class="comment">// 2</span></span><br><span class="line">obj1.foo.call( obj2, <span class="number">3</span> ); </span><br><span class="line"><span class="built_in">console</span>.log( obj2.a ); <span class="comment">// 3</span></span><br><span class="line"><span class="keyword">var</span> bar = <span class="keyword">new</span> obj1.foo( <span class="number">4</span> ); </span><br><span class="line"><span class="built_in">console</span>.log( obj1.a ); <span class="comment">// 2 </span></span><br><span class="line"><span class="built_in">console</span>.log( bar.a ); <span class="comment">// 4</span></span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ° new ç»‘å®šæ¯”éšå¼ç»‘å®šä¼˜å…ˆçº§é«˜ã€‚ä½†æ˜¯ new ç»‘å®šå’Œæ˜¾å¼ç»‘å®šè°çš„ä¼˜å…ˆçº§æ›´é«˜å‘¢?</p>
<blockquote>
<p>new å’Œ call/apply æ— æ³•ä¸€èµ·ä½¿ç”¨ï¼Œå› æ­¤æ— æ³•é€šè¿‡ new foo.call(obj1) æ¥ç›´æ¥ è¿›è¡Œæµ‹è¯•ã€‚ä½†æ˜¯æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç¡¬ç»‘å®šæ¥æµ‹è¯•å®ƒä¿©çš„ä¼˜å…ˆçº§ã€‚</p>
<p>è¿™æ˜¯å› ä¸ºå‡½æ•°å†…éƒ¨æœ‰ä¸¤ä¸ªä¸åŒçš„æ–¹æ³•ï¼š<code>[[Call]]</code>å’Œ<code>[[Constructor]]</code>ã€‚ å½“ä½¿ç”¨æ™®é€šå‡½æ•°è°ƒç”¨æ—¶ï¼Œ<code>[[Call]]</code>ä¼šè¢«æ‰§è¡Œã€‚å½“ä½¿ç”¨æ„é€ å‡½æ•°è°ƒç”¨æ—¶ï¼Œ<code>[[Constructor]]</code>ä¼šè¢«æ‰§è¡Œã€‚<code>call</code>ã€<code>apply</code>ã€<code>bind</code>å’Œç®­å¤´å‡½æ•°å†…éƒ¨æ²¡æœ‰<code>[[Constructor]]</code>æ–¹æ³•ã€‚</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">something</span>) </span>&#123; </span><br><span class="line">	<span class="keyword">this</span>.a = something;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj1 = &#123;&#125;;</span><br><span class="line"><span class="keyword">var</span> bar = foo.bind( obj1 ); </span><br><span class="line">bar( <span class="number">2</span> );</span><br><span class="line"><span class="built_in">console</span>.log( obj1.a ); <span class="comment">// 2</span></span><br><span class="line"><span class="keyword">var</span> baz = <span class="keyword">new</span> bar(<span class="number">3</span>); </span><br><span class="line"><span class="built_in">console</span>.log( obj1.a ); <span class="comment">// 2 </span></span><br><span class="line"><span class="built_in">console</span>.log( baz.a ); <span class="comment">// 3</span></span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°newæŠŠbindçš„ç¡¬ç»‘å®šç»™é¡¶æ‰äº†</p>
<p>æ‰€ä»¥new  &gt; ç¡¬ç»‘å®š</p>
<h4 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><blockquote>
<p>new ç»‘å®š &gt; æ˜¾ç¤ºç»‘å®š &gt; éšå¼ç»‘å®š &gt; é»˜è®¤ç»‘å®š</p>
</blockquote>
<h3 id="ç»‘å®šä¾‹å¤–"><a href="#ç»‘å®šä¾‹å¤–" class="headerlink" title="ç»‘å®šä¾‹å¤–"></a>ç»‘å®šä¾‹å¤–</h3><h4 id="è¢«å¿½ç•¥çš„this"><a href="#è¢«å¿½ç•¥çš„this" class="headerlink" title="è¢«å¿½ç•¥çš„this"></a>è¢«å¿½ç•¥çš„this</h4><p>æŠŠ<code>null</code>æˆ–è€…<code>undefined</code>ä½œä¸º<code>this</code>çš„ç»‘å®šå¯¹è±¡ä¼ å…¥<code>call</code>ã€<code>apply</code>æˆ–è€…<code>bind</code>ï¼Œè¿™äº›å€¼åœ¨è°ƒç”¨æ—¶ä¼šè¢«å¿½ç•¥ï¼Œå®é™…åº”ç”¨çš„æ˜¯é»˜è®¤è§„åˆ™ã€‚</p>
<p>ä¸‹é¢ä¸¤ç§æƒ…å†µä¸‹ä¼šä¼ å…¥<code>null</code></p>
<ul>
<li>ä½¿ç”¨<code>apply(..)</code>æ¥â€œå±•å¼€â€ä¸€ä¸ªæ•°ç»„ï¼Œå¹¶å½“ä½œå‚æ•°ä¼ å…¥ä¸€ä¸ªå‡½æ•°</li>
<li><code>bind(..)</code>å¯ä»¥å¯¹å‚æ•°è¿›è¡ŒæŸ¯é‡ŒåŒ–ï¼ˆé¢„å…ˆè®¾ç½®ä¸€äº›å‚æ•°ï¼‰</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log( <span class="string">"a:"</span> + a + <span class="string">"ï¼Œb:"</span> + b );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŠŠæ•°ç»„â€å±•å¼€â€œæˆå‚æ•°</span></span><br><span class="line">foo.apply( <span class="literal">null</span>, [<span class="number">2</span>, <span class="number">3</span>] ); <span class="comment">// a:2ï¼Œb:3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨bind(..)è¿›è¡ŒæŸ¯é‡ŒåŒ–</span></span><br><span class="line"><span class="keyword">var</span> bar = foo.bind( <span class="literal">null</span>, <span class="number">2</span> );</span><br><span class="line">bar( <span class="number">3</span> ); <span class="comment">// a:2ï¼Œb:3</span></span><br></pre></td></tr></table></figure>

<p>æ€»æ˜¯ä¼ å…¥<code>null</code>æ¥å¿½ç•¥thisç»‘å®šå¯èƒ½äº§ç”Ÿä¸€äº›å‰¯ä½œç”¨ã€‚å¦‚æœæŸä¸ªå‡½æ•°ç¡®å®ä½¿ç”¨äº†thisï¼Œé‚£é»˜è®¤ç»‘å®šè§„åˆ™ä¼šæŠŠthisç»‘å®šåˆ°å…¨å±€å¯¹è±¡ä¸­ã€‚</p>
<blockquote>
<p>æ›´å®‰å…¨çš„this</p>
</blockquote>
<p>å®‰å…¨çš„åšæ³•å°±æ˜¯ä¼ å…¥ä¸€ä¸ªç‰¹æ®Šçš„å¯¹è±¡ï¼ˆç©ºå¯¹è±¡ï¼‰ï¼ŒæŠŠthisç»‘å®šåˆ°è¿™ä¸ªå¯¹è±¡ä¸ä¼šå¯¹ä½ çš„ç¨‹åºäº§ç”Ÿä»»ä½•å‰¯ä½œç”¨ã€‚</p>
<p>JSä¸­åˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡æœ€ç®€å•çš„æ–¹æ³•æ˜¯<strong><code>Object.create(null)</code></strong>ï¼Œè¿™ä¸ªå’Œ<code>{}</code>å¾ˆåƒï¼Œä½†æ˜¯å¹¶ä¸ä¼šåˆ›å»º<code>Object.prototype</code>è¿™ä¸ªå§”æ‰˜ï¼Œæ‰€ä»¥æ¯”<code>{}</code>æ›´ç©ºã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log( <span class="string">"a:"</span> + a + <span class="string">"ï¼Œb:"</span> + b );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æˆ‘ä»¬çš„ç©ºå¯¹è±¡</span></span><br><span class="line"><span class="keyword">var</span> Ã¸ = <span class="built_in">Object</span>.create( <span class="literal">null</span> );</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŠŠæ•°ç»„â€å±•å¼€â€œæˆå‚æ•°</span></span><br><span class="line">foo.apply( Ã¸, [<span class="number">2</span>, <span class="number">3</span>] ); <span class="comment">// a:2ï¼Œb:3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨bind(..)è¿›è¡ŒæŸ¯é‡ŒåŒ–</span></span><br><span class="line"><span class="keyword">var</span> bar = foo.bind( Ã¸, <span class="number">2</span> );</span><br><span class="line">bar( <span class="number">3</span> ); <span class="comment">// a:2ï¼Œb:3</span></span><br></pre></td></tr></table></figure>

<h4 id="é—´æ¥å¼•ç”¨"><a href="#é—´æ¥å¼•ç”¨" class="headerlink" title="é—´æ¥å¼•ç”¨"></a>é—´æ¥å¼•ç”¨</h4><p>é—´æ¥å¼•ç”¨ä¸‹ï¼Œè°ƒç”¨è¿™ä¸ªå‡½æ•°ä¼šåº”ç”¨é»˜è®¤ç»‘å®šè§„åˆ™ã€‚é—´æ¥å¼•ç”¨æœ€å®¹æ˜“åœ¨<strong>èµ‹å€¼</strong>æ—¶å‘ç”Ÿã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// p.foo = o.fooçš„è¿”å›å€¼æ˜¯ç›®æ ‡å‡½æ•°çš„å¼•ç”¨ï¼Œæ‰€ä»¥è°ƒç”¨ä½ç½®æ˜¯foo()è€Œä¸æ˜¯p.foo()æˆ–è€…o.foo()</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log( <span class="keyword">this</span>.a );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">2</span>;</span><br><span class="line"><span class="keyword">var</span> o = &#123; <span class="attr">a</span>: <span class="number">3</span>, <span class="attr">foo</span>: foo &#125;;</span><br><span class="line"><span class="keyword">var</span> p = &#123; <span class="attr">a</span>: <span class="number">4</span>&#125;;</span><br><span class="line"></span><br><span class="line">o.foo(); <span class="comment">// 3</span></span><br><span class="line">(p.foo = o.foo)(); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>

<h4 id="è½¯ç»‘å®š"><a href="#è½¯ç»‘å®š" class="headerlink" title="è½¯ç»‘å®š"></a>è½¯ç»‘å®š</h4><ul>
<li>ç¡¬ç»‘å®šå¯ä»¥æŠŠthiså¼ºåˆ¶ç»‘å®šåˆ°æŒ‡å®šçš„å¯¹è±¡ï¼ˆ<code>new</code>é™¤å¤–ï¼‰ï¼Œé˜²æ­¢å‡½æ•°è°ƒç”¨åº”ç”¨é»˜è®¤ç»‘å®šè§„åˆ™ã€‚ä½†æ˜¯ä¼šé™ä½å‡½æ•°çš„çµæ´»æ€§ï¼Œä½¿ç”¨<strong>ç¡¬ç»‘å®šä¹‹åå°±æ— æ³•ä½¿ç”¨éšå¼ç»‘å®šæˆ–è€…æ˜¾å¼ç»‘å®šæ¥ä¿®æ”¹this</strong>ã€‚</li>
<li><strong>å¦‚æœç»™é»˜è®¤ç»‘å®šæŒ‡å®šä¸€ä¸ªå…¨å±€å¯¹è±¡å’Œundefinedä»¥å¤–çš„å€¼</strong>ï¼Œé‚£å°±å¯ä»¥å®ç°å’Œç¡¬ç»‘å®šç›¸åŒçš„æ•ˆæœï¼ŒåŒæ—¶ä¿ç•™éšå¼ç»‘å®šæˆ–è€…æ˜¾ç¤ºç»‘å®šä¿®æ”¹thisçš„èƒ½åŠ›ã€‚</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é»˜è®¤ç»‘å®šè§„åˆ™ï¼Œä¼˜å…ˆçº§æ’æœ€å</span></span><br><span class="line"><span class="comment">// å¦‚æœthisç»‘å®šåˆ°å…¨å±€å¯¹è±¡æˆ–è€…undefinedï¼Œé‚£å°±æŠŠæŒ‡å®šçš„é»˜è®¤å¯¹è±¡objç»‘å®šåˆ°this,å¦åˆ™ä¸ä¼šä¿®æ”¹this</span></span><br><span class="line"><span class="keyword">if</span>(!<span class="built_in">Function</span>.prototype.softBind) &#123;</span><br><span class="line">    <span class="built_in">Function</span>.prototype.softBind = <span class="function"><span class="keyword">function</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> fn = <span class="keyword">this</span>;</span><br><span class="line">        <span class="comment">// æ•è·æ‰€æœ‰curriedå‚æ•°</span></span><br><span class="line">        <span class="keyword">var</span> curried = [].slice.call( <span class="built_in">arguments</span>, <span class="number">1</span> ); </span><br><span class="line">        <span class="keyword">var</span> bound = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> fn.apply(</span><br><span class="line">            	(!<span class="keyword">this</span> || <span class="keyword">this</span> === (<span class="built_in">window</span> || global)) ? </span><br><span class="line">                	obj : <span class="keyword">this</span>,</span><br><span class="line">                curried.concat.apply( curried, <span class="built_in">arguments</span> )</span><br><span class="line">            );</span><br><span class="line">        &#125;;</span><br><span class="line">        bound.prototype = <span class="built_in">Object</span>.create( fn.prototype );</span><br><span class="line">        <span class="keyword">return</span> bound;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨ï¼šè½¯ç»‘å®šç‰ˆæœ¬çš„foo()å¯ä»¥æ‰‹åŠ¨å°†thisç»‘å®šåˆ°obj2æˆ–è€…obj3ä¸Šï¼Œä½†å¦‚æœåº”ç”¨é»˜è®¤ç»‘å®šï¼Œåˆ™ä¼šå°†thisç»‘å®šåˆ°objã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"name:"</span> + <span class="keyword">this</span>.name);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj = &#123; <span class="attr">name</span>: <span class="string">"obj"</span> &#125;,</span><br><span class="line">    obj2 = &#123; <span class="attr">name</span>: <span class="string">"obj2"</span> &#125;,</span><br><span class="line">    obj3 = &#123; <span class="attr">name</span>: <span class="string">"obj3"</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é»˜è®¤ç»‘å®šï¼Œåº”ç”¨è½¯ç»‘å®šï¼Œè½¯ç»‘å®šæŠŠthisç»‘å®šåˆ°é»˜è®¤å¯¹è±¡obj</span></span><br><span class="line"><span class="keyword">var</span> fooOBJ = foo.softBind( obj );</span><br><span class="line">fooOBJ(); <span class="comment">// name: obj </span></span><br><span class="line"></span><br><span class="line"><span class="comment">// éšå¼ç»‘å®šè§„åˆ™</span></span><br><span class="line">obj2.foo = foo.softBind( obj );</span><br><span class="line">obj2.foo(); <span class="comment">// name: obj2 &lt;---- çœ‹ï¼ï¼ï¼</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ˜¾å¼ç»‘å®šè§„åˆ™</span></span><br><span class="line">fooOBJ.call( obj3 ); <span class="comment">// name: obj3 &lt;---- çœ‹ï¼ï¼ï¼</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»‘å®šä¸¢å¤±ï¼Œåº”ç”¨è½¯ç»‘å®š</span></span><br><span class="line">setTimeout( obj2.foo, <span class="number">10</span> ); <span class="comment">// name: obj</span></span><br></pre></td></tr></table></figure>

<h3 id="ç®­å¤´å‡½æ•°"><a href="#ç®­å¤´å‡½æ•°" class="headerlink" title="ç®­å¤´å‡½æ•°"></a>ç®­å¤´å‡½æ•°</h3><p>ES6æ–°å¢ä¸€ç§ç‰¹æ®Šå‡½æ•°ç±»å‹ï¼šç®­å¤´å‡½æ•°ï¼Œç®­å¤´å‡½æ•°æ— æ³•ä½¿ç”¨ä¸Šè¿°å››æ¡è§„åˆ™ï¼Œè€Œæ˜¯æ ¹æ®å¤–å±‚ï¼ˆå‡½æ•°æˆ–è€…å…¨å±€ï¼‰ä½œç”¨åŸŸï¼ˆ<strong>è¯æ³•ä½œç”¨åŸŸ</strong>ï¼‰æ¥å†³å®šthisã€‚</p>
<ul>
<li><code>foo()</code>å†…éƒ¨åˆ›å»ºçš„ç®­å¤´å‡½æ•°ä¼šæ•è·è°ƒç”¨æ—¶<code>foo()</code>çš„thisã€‚ç”±äº<code>foo()</code>çš„thisç»‘å®šåˆ°<code>obj1</code>ï¼Œ<code>bar</code>(å¼•ç”¨ç®­å¤´å‡½æ•°)çš„thisä¹Ÿä¼šç»‘å®šåˆ°<code>obj1</code>ï¼Œ<strong>ç®­å¤´å‡½æ•°çš„ç»‘å®šæ— æ³•è¢«ä¿®æ”¹</strong>(<code>new</code>ä¹Ÿä¸è¡Œ)ã€‚</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// è¿”å›ä¸€ä¸ªç®­å¤´å‡½æ•°</span></span><br><span class="line">    <span class="keyword">return</span> <span class="function">(<span class="params">a</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// thisç»§æ‰¿è‡ªfoo()</span></span><br><span class="line">        <span class="built_in">console</span>.log( <span class="keyword">this</span>.a );</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj1 = &#123;</span><br><span class="line">    a: <span class="number">2</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj2 = &#123;</span><br><span class="line">    a: <span class="number">3</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> bar = foo.call( obj1 );</span><br><span class="line">bar.call( obj2 ); <span class="comment">// 2ï¼Œä¸æ˜¯3ï¼</span></span><br></pre></td></tr></table></figure>



<p>ç®­å¤´å‡½æ•°æœ€å¸¸ç”¨äºå›è°ƒå‡½æ•°ä¸­ï¼Œä¾‹å¦‚äº‹ä»¶å¤„ç†å™¨æˆ–è€…å®šæ—¶å™¨ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// è¿™é‡Œçš„ this åœ¨æ­¤æ³•ä¸Šç»§æ‰¿è‡ª foo()</span></span><br><span class="line">    <span class="built_in">console</span>.log( <span class="keyword">this</span>.a ); &#125;,<span class="number">100</span>);</span><br><span class="line">  &#125;</span><br><span class="line"><span class="keyword">var</span> obj = &#123; </span><br><span class="line">	a:<span class="number">2</span></span><br><span class="line">&#125;;</span><br><span class="line">foo.call( obj ); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>



<p>ES6ä¹‹å‰å’Œç®­å¤´å‡½æ•°ç±»ä¼¼çš„æ¨¡å¼ï¼Œé‡‡ç”¨çš„æ˜¯è¯æ³•ä½œç”¨åŸŸå–ä»£äº†ä¼ ç»Ÿçš„thisæœºåˆ¶ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> self = <span class="keyword">this</span>; <span class="comment">// lexical capture of this</span></span><br><span class="line">    setTimeout( <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log( self.a ); <span class="comment">// selfåªæ˜¯ç»§æ‰¿äº†foo()å‡½æ•°çš„thisç»‘å®š</span></span><br><span class="line">    &#125;, <span class="number">100</span> );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    a: <span class="number">2</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">foo.call(obj); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>

<h2 id="å®ç°callå’Œapply"><a href="#å®ç°callå’Œapply" class="headerlink" title="å®ç°callå’Œapply"></a>å®ç°callå’Œapply</h2><h3 id="äº†è§£callå’Œapply"><a href="#äº†è§£callå’Œapply" class="headerlink" title="äº†è§£callå’Œapply"></a>äº†è§£callå’Œapply</h3><p>ä¸ºä»€ä¹ˆä¼šæœ‰callå’Œapplyï¼Ÿ callå’Œapplyä¸¤ä¸ªæ–¹æ³•çš„ä½œç”¨åŸºæœ¬ç›¸åŒï¼Œå®ƒä»¬éƒ½æ˜¯ä¸ºäº†æ”¹å˜æŸä¸ªå‡½æ•°<strong>æ‰§è¡Œæ—¶çš„ä¸Šä¸‹æ–‡</strong>ï¼ˆcontextï¼‰è€Œå»ºç«‹çš„ï¼Œ ä»–çš„çœŸæ­£å¼ºå¤§ä¹‹å¤„å°±æ˜¯èƒ½å¤Ÿæ‰©å……å‡½æ•°èµ–ä»¥è¿è¡Œçš„ä½œç”¨åŸŸã€‚é€šä¿—ä¸€ç‚¹è®²ï¼Œå°±æ˜¯æ”¹å˜å‡½æ•°ä½“å†…éƒ¨<strong>this çš„æŒ‡å‘</strong>ã€‚</p>
<p>ä¸¾ä¸ªæ —å­ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">window.color &#x3D; &quot;red&quot;;</span><br><span class="line">var o &#x3D; &#123;color: &quot;blue&quot;&#125;;</span><br><span class="line">function sayColor()&#123;</span><br><span class="line">	alert(this.color);</span><br><span class="line">&#125;</span><br><span class="line">sayColor();&#x2F;&#x2F;red</span><br><span class="line">sayColor.call(this);&#x2F;&#x2F;redï¼ŒæŠŠå‡½æ•°ä½“sayColorå†…éƒ¨çš„thisï¼Œç»‘åˆ°å½“å‰ç¯å¢ƒï¼ˆä½œç”¨åŸŸï¼‰(è¿™æ®µä»£ç æ‰€å¤„çš„ç¯å¢ƒ)</span><br><span class="line">sayColor.call(window);&#x2F;&#x2F;redï¼ŒæŠŠå‡½æ•°ä½“sayColorå†…éƒ¨çš„thisï¼Œç»‘åˆ°windowï¼ˆå…¨å±€ä½œç”¨åŸŸï¼‰</span><br><span class="line">sayColor.call(o);&#x2F;&#x2F;blueå¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>



<blockquote>
<p><strong>è§£é‡Šï¼š</strong>ä¸Šé¢çš„æ —å­ï¼Œå¾ˆæ˜æ˜¾å‡½æ•°sayColoræ˜¯åœ¨å…¨å±€ä½œç”¨åŸŸï¼ˆç¯å¢ƒ/windowï¼‰ä¸­è°ƒç”¨çš„ï¼Œè€Œå…¨å±€ä½œç”¨åŸŸä¸­æœ‰ä¸€ä¸ªcolorå±æ€§ï¼Œå€¼ä¸ºâ€redâ€ï¼ŒsayColor.call(this)è¿™ä¸€è¡Œä»£ç å°±æ˜¯è¡¨ç¤º<strong>æŠŠå‡½æ•°ä½“sayColorå†…éƒ¨çš„thisï¼Œç»‘åˆ°å½“å‰ç¯å¢ƒï¼ˆä½œç”¨åŸŸï¼‰</strong>ï¼Œè€ŒsayColor.call(window)è¿™ä¸€è¡Œä»£ç å°±æ˜¯è¡¨ç¤º<strong>æŠŠå‡½æ•°ä½“sayColorå†…éƒ¨çš„thisï¼Œç»‘åˆ°windowï¼ˆå…¨å±€ä½œç”¨åŸŸï¼‰</strong>ï¼Œä¹‹æ‰€ä»¥è¿™ä¸¤è¡Œçš„è¾“å‡ºéƒ½æ˜¯â€redâ€å°±æ˜¯å› ä¸ºä»–å½“å‰ä½œç”¨åŸŸçš„thiså°±æ˜¯windowï¼ˆthis === windowï¼‰ï¼› æœ€åï¼ŒsayColor.call(o)è¿™ä¸€è¡Œä»£ç å°±è¡¨ç¤º<strong>æŠŠå‡½æ•°ä½“sayColorå†…éƒ¨çš„thisï¼Œç»‘åˆ°oè¿™ä¸ªå¯¹è±¡çš„æ‰§è¡Œç¯å¢ƒï¼ˆä¸Šä¸‹æ–‡ï¼‰ä¸­æ¥</strong>ï¼Œä¹Ÿå°±æ˜¯è¯´sayColorå†…éƒ¨çš„thisâ€”â€”&gt;<strong>o</strong></p>
</blockquote>
<h3 id="callå’Œapplyçš„åŒºåˆ«"><a href="#callå’Œapplyçš„åŒºåˆ«" class="headerlink" title="callå’Œapplyçš„åŒºåˆ«"></a>callå’Œapplyçš„åŒºåˆ«</h3><p><code>call()</code> å’Œ <code>apply()</code>çš„åŒºåˆ«åœ¨äºï¼Œ<code>call()</code>æ–¹æ³•æ¥å—çš„æ˜¯<strong>è‹¥å¹²ä¸ªå‚æ•°çš„åˆ—è¡¨</strong>ï¼Œè€Œ<code>apply()</code>æ–¹æ³•æ¥å—çš„æ˜¯<strong>ä¸€ä¸ªåŒ…å«å¤šä¸ªå‚æ•°çš„æ•°ç»„</strong></p>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> func = <span class="function"><span class="keyword">function</span>(<span class="params">arg1, arg2</span>) </span>&#123;</span><br><span class="line">     ...</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">func.call(<span class="keyword">this</span>, arg1, arg2); <span class="comment">// ä½¿ç”¨ callï¼Œå‚æ•°åˆ—è¡¨</span></span><br><span class="line">func.apply(<span class="keyword">this</span>, [arg1, arg2]) <span class="comment">// ä½¿ç”¨ applyï¼Œå‚æ•°æ•°ç»„</span></span><br></pre></td></tr></table></figure>

<h3 id="åº”ç”¨åœºæ™¯"><a href="#åº”ç”¨åœºæ™¯" class="headerlink" title="åº”ç”¨åœºæ™¯"></a>åº”ç”¨åœºæ™¯</h3><p>å…¶å®è¿™äº›åº”ç”¨åœºæ™¯éƒ½æœ‰æ–°çš„æ–¹æ³•å¯ä»¥å¿«é€Ÿè§£å†³ï¼Œ æˆ‘åªæ˜¯æƒ³å‘Šè¯‰å¤§å®¶ä¸€äº›å°çš„çŸ¥è¯†ç‚¹ï¼Œ è€Œä¸”è¿™äº›ä¸œè¥¿è™½ç„¶æœ‰æ–°çš„æ–¹æ³•ä»£æ›¿ï¼Œä½†æ˜¯é¢è¯•çš„æ—¶å€™å¾ˆå¯èƒ½ä¼šè¢«é—®åˆ°ã€‚</p>
<h4 id="åˆå¹¶ä¸¤ä¸ªæ•°ç»„"><a href="#åˆå¹¶ä¸¤ä¸ªæ•°ç»„" class="headerlink" title="åˆå¹¶ä¸¤ä¸ªæ•°ç»„"></a>åˆå¹¶ä¸¤ä¸ªæ•°ç»„</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [<span class="string">'a'</span>, <span class="string">'aa'</span>];</span><br><span class="line"><span class="keyword">var</span> b = [<span class="string">'b'</span>, <span class="string">'bb'</span>];</span><br><span class="line"></span><br><span class="line"><span class="built_in">Array</span>.prototype.push.apply(a, b);</span><br><span class="line"><span class="built_in">console</span>.log(a) <span class="comment">// ['a', 'aa', 'b', 'bb']</span></span><br></pre></td></tr></table></figure>

<p>å…¶å®ç°åœ¨æœ‰<code>concat</code>æ¥ä»£æ›¿äº†ã€‚æˆ–è€…å…¶ä»–å¥‡æ·«æŠ€å·§ã€‚ä½†æ˜¯ï¼Œéƒ½ä¸æ˜¯æˆ‘ä»¬çš„é‡ç‚¹ã€‚</p>
<blockquote>
<p>å½“ç¬¬äºŒä¸ªæ•°ç»„(å¦‚ç¤ºä¾‹ä¸­çš„ b )å¤ªå¤§æ—¶ä¸è¦ä½¿ç”¨è¿™ä¸ªæ–¹æ³•æ¥åˆå¹¶æ•°ç»„ï¼Œå› ä¸º<strong>ä¸€ä¸ªå‡½æ•°èƒ½å¤Ÿæ¥å—çš„å‚æ•°ä¸ªæ•°æ˜¯æœ‰é™åˆ¶</strong>çš„ã€‚ä¸åŒçš„å¼•æ“æœ‰ä¸åŒçš„é™åˆ¶ï¼ŒJSæ ¸å¿ƒé™åˆ¶åœ¨ 65535ï¼Œæœ‰äº›å¼•æ“ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œæœ‰äº›ä¸æŠ›å‡ºå¼‚å¸¸ä½†ä¸¢å¤±å¤šä½™å‚æ•°ã€‚</p>
</blockquote>
<p>é‚£ä¹ˆè¦å¦‚ä½•è§£å†³å‘¢ï¼Ÿ</p>
<p>æˆ‘ä»¬å¯ä»¥æŠŠæ•°ç»„è¿›è¡Œåˆ‡å‰²ã€‚ç„¶ååˆ†æ‰¹æ¬¡çš„è°ƒç”¨ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myConcat</span>(<span class="params">arr1, arr2, max = <span class="number">32768</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr2.length; i += max) &#123;</span><br><span class="line">    <span class="built_in">Array</span>.prototype.push.apply(</span><br><span class="line">    	arr1,</span><br><span class="line">      arr2.slice(i, i + max) <span class="comment">// å°çš„çŸ¥è¯†ç‚¹ï¼Œç¬¬äºŒä¸ªå‚æ•°å¤§äºæ•°ç»„é•¿åº¦å°±ä¸€ç›´å–åˆ°æ•°ç»„çš„æœ«å°¾</span></span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = [<span class="number">-2</span>, <span class="number">-1</span>];</span><br><span class="line"><span class="keyword">var</span> b = [];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">999999</span>; i ++) &#123;</span><br><span class="line">  b.push(i)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Array</span>.prototype.push.apply(a, b) <span class="comment">// Uncaught RangeError: Maximum call stack size exceeded</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">myConcat(a, b)</span><br></pre></td></tr></table></figure>

<h4 id="éªŒè¯æ˜¯å¦æ˜¯æ•°ç»„"><a href="#éªŒè¯æ˜¯å¦æ˜¯æ•°ç»„" class="headerlink" title="éªŒè¯æ˜¯å¦æ˜¯æ•°ç»„"></a>éªŒè¯æ˜¯å¦æ˜¯æ•°ç»„</h4><h4 id=""><a href="#" class="headerlink" title=""></a></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [];</span><br><span class="line"><span class="built_in">Object</span>.prototype.toString.call(arr); <span class="comment">// [object Array]</span></span><br><span class="line"><span class="comment">//æŠŠå‡½æ•°ä½“Object.prototype.toString()æ–¹æ³•å†…éƒ¨çš„thisï¼Œç»‘åˆ°arrçš„æ‰§è¡Œç¯å¢ƒï¼ˆä½œç”¨åŸŸï¼‰å¤åˆ¶ä»£ç </span></span><br></pre></td></tr></table></figure>



<h4 id="åŒæ ·æ˜¯æ£€æµ‹å¯¹è±¡ç±»å‹ï¼Œarr-toString-çš„ç»“æœå’ŒObject-prototype-toString-call-arr-çš„ç»“æœä¸ä¸€æ ·ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆï¼Ÿ"><a href="#åŒæ ·æ˜¯æ£€æµ‹å¯¹è±¡ç±»å‹ï¼Œarr-toString-çš„ç»“æœå’ŒObject-prototype-toString-call-arr-çš„ç»“æœä¸ä¸€æ ·ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆï¼Ÿ" class="headerlink" title="åŒæ ·æ˜¯æ£€æµ‹å¯¹è±¡ç±»å‹ï¼Œarr.toString()çš„ç»“æœå’ŒObject.prototype.toString.call(arr)çš„ç»“æœä¸ä¸€æ ·ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆï¼Ÿ"></a>åŒæ ·æ˜¯æ£€æµ‹å¯¹è±¡ç±»å‹ï¼Œarr.toString()çš„ç»“æœå’ŒObject.prototype.toString.call(arr)çš„ç»“æœä¸ä¸€æ ·ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆï¼Ÿ</h4><blockquote>
<p>è¿™æ˜¯å› ä¸ºtoString()ä¸ºObjectçš„åŸå‹æ–¹æ³•ï¼Œè€ŒArray ï¼Œfunctionç­‰å¼•ç”¨ç±»å‹ä½œä¸ºObjectçš„å®ä¾‹ï¼Œéƒ½é‡å†™äº†toStringæ–¹æ³•ã€‚ä¸åŒçš„å¯¹è±¡ç±»å‹è°ƒç”¨toStringæ–¹æ³•æ—¶ï¼Œæ ¹æ®åŸå‹é“¾çš„çŸ¥è¯†ï¼Œè°ƒç”¨çš„æ˜¯å¯¹åº”çš„<strong>é‡å†™</strong>ä¹‹åçš„toStringæ–¹æ³•ï¼ˆfunctionç±»å‹è¿”å›å†…å®¹ä¸ºå‡½æ•°ä½“çš„å­—ç¬¦ä¸²ï¼ŒArrayç±»å‹è¿”å›å…ƒç´ ç»„æˆçš„å­—ç¬¦ä¸²â€¦..ï¼‰ï¼Œè€Œä¸ä¼šå»è°ƒç”¨Objectä¸ŠåŸå‹toStringæ–¹æ³•ï¼Œæ‰€ä»¥é‡‡ç”¨arr.toString()ä¸èƒ½å¾—åˆ°å…¶å¯¹è±¡ç±»å‹ï¼Œåªèƒ½å°†arrè½¬æ¢ä¸ºå­—ç¬¦ä¸²ç±»å‹ï¼›å› æ­¤ï¼Œåœ¨æƒ³è¦å¾—åˆ°å¯¹è±¡çš„å…·ä½“ç±»å‹æ—¶ï¼Œåº”è¯¥è°ƒç”¨Objectä¸ŠåŸå‹toStringæ–¹æ³•ã€‚</p>
</blockquote>
<h4 id="ç±»æ•°ç»„å¯¹è±¡ï¼ˆArray-like-Objectï¼‰ä½¿ç”¨æ•°ç»„æ–¹æ³•"><a href="#ç±»æ•°ç»„å¯¹è±¡ï¼ˆArray-like-Objectï¼‰ä½¿ç”¨æ•°ç»„æ–¹æ³•" class="headerlink" title="ç±»æ•°ç»„å¯¹è±¡ï¼ˆArray-like Objectï¼‰ä½¿ç”¨æ•°ç»„æ–¹æ³•"></a>ç±»æ•°ç»„å¯¹è±¡ï¼ˆArray-like Objectï¼‰ä½¿ç”¨æ•°ç»„æ–¹æ³•</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> domNodes = <span class="built_in">document</span>.getElementsByTagName(<span class="string">"*"</span>);</span><br><span class="line">domNodes.unshift(<span class="string">"h1"</span>);</span><br><span class="line"><span class="comment">// TypeError: domNodes.unshift is not a function</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> domNodeArrays = <span class="built_in">Array</span>.prototype.slice.call(domNodes);</span><br><span class="line">domNodeArrays.unshift(<span class="string">"h1"</span>); <span class="comment">// 505 ä¸åŒç¯å¢ƒä¸‹æ•°æ®ä¸åŒ</span></span><br><span class="line"><span class="comment">// (505) ["h1", html.gr__hujiang_com, head, meta, ...]</span></span><br></pre></td></tr></table></figure>

<p>ç±»æ•°ç»„å¯¹è±¡æœ‰ä¸‹é¢ä¸¤ä¸ªç‰¹æ€§</p>
<ul>
<li>1ã€å…·æœ‰ï¼šæŒ‡å‘å¯¹è±¡å…ƒç´ çš„æ•°å­—ç´¢å¼•ä¸‹æ ‡å’Œ <code>length</code> å±æ€§</li>
<li>2ã€ä¸å…·æœ‰ï¼šæ¯”å¦‚ <code>push</code> ã€<code>shift</code>ã€ <code>forEach</code> ä»¥åŠ <code>indexOf</code>ç­‰æ•°ç»„å¯¹è±¡å…·æœ‰çš„æ–¹æ³•</li>
</ul>
<p>è¦è¯´æ˜çš„æ˜¯ï¼Œç±»æ•°ç»„å¯¹è±¡æ˜¯ä¸€ä¸ª<strong>å¯¹è±¡</strong>ã€‚JSä¸­å­˜åœ¨ä¸€ç§åä¸º<strong>ç±»æ•°ç»„</strong>çš„å¯¹è±¡ç»“æ„ï¼Œæ¯”å¦‚ <code>arguments</code> å¯¹è±¡ï¼Œè¿˜æœ‰DOM API è¿”å›çš„ <code>NodeList</code> å¯¹è±¡éƒ½å±äºç±»æ•°ç»„å¯¹è±¡ï¼Œç±»æ•°ç»„å¯¹è±¡ä¸èƒ½ä½¿ç”¨ <code>push/pop/shift/unshift</code> ç­‰æ•°ç»„æ–¹æ³•ï¼Œé€šè¿‡ <code>Array.prototype.slice.call</code> è½¬æ¢æˆçœŸæ­£çš„æ•°ç»„ï¼Œå°±å¯ä»¥ä½¿ç”¨ <code>Array</code>ä¸‹æ‰€æœ‰æ–¹æ³•ã€‚</p>
<p><strong>ç±»æ•°ç»„å¯¹è±¡è½¬æ•°ç»„</strong>çš„å…¶ä»–æ–¹æ³•ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸Šé¢ä»£ç ç­‰åŒäº</span></span><br><span class="line"><span class="keyword">var</span> arr = [].slice.call(<span class="built_in">arguments</span>)ï¼›</span><br><span class="line"></span><br><span class="line">ES6:</span><br><span class="line"><span class="keyword">let</span> arr = <span class="built_in">Array</span>.from(<span class="built_in">arguments</span>);</span><br><span class="line"><span class="keyword">let</span> arr = [...arguments];</span><br></pre></td></tr></table></figure>

<p><code>Array.from()</code> å¯ä»¥å°†ä¸¤ç±»å¯¹è±¡è½¬ä¸ºçœŸæ­£çš„æ•°ç»„ï¼š<strong>ç±»æ•°ç»„</strong>å¯¹è±¡å’Œ<strong>å¯éå†</strong>ï¼ˆiterableï¼‰å¯¹è±¡ï¼ˆåŒ…æ‹¬ES6æ–°å¢çš„æ•°æ®ç»“æ„ Set å’Œ Mapï¼‰ã€‚</p>
<h3 id="å®ç°call"><a href="#å®ç°call" class="headerlink" title="å®ç°call"></a>å®ç°call</h3><p>è¿™é‡Œä¼šä½¿ç”¨éšå¼ç»‘å®šæ¥å®ç°ã€‚</p>
<p>å…ˆä¸¢å‡ºæˆ‘ä»¬è¦æµ‹è¯•çš„ä¾‹å­ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.a)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> b = &#123;</span><br><span class="line">  a: <span class="number">2</span></span><br><span class="line">&#125;</span><br><span class="line">f(); <span class="comment">// 1</span></span><br><span class="line">f.call(b) <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>

<p>OK, æˆ‘ä»¬ç°åœ¨å°±æ¥å®ç°ä»¥ä¸‹è‡ªå®šä¹‰çš„callã€‚åº”ç”¨éšå¼ç»‘å®šçš„è¯å°±å¯ä»¥ç›´æ¥ç»‘å®šä¸Šäº†ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.a)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Function</span>.prototype.myCall = <span class="function"><span class="keyword">function</span> (<span class="params">context</span>) </span>&#123;</span><br><span class="line">  context.fn = f;</span><br><span class="line">  context.fn();</span><br><span class="line">  <span class="keyword">delete</span> context.fn;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> b = &#123;</span><br><span class="line">  a: <span class="number">2</span></span><br><span class="line">&#125;</span><br><span class="line">f(); <span class="comment">// 1</span></span><br><span class="line">f.myCall(b) <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>

<p>å¾ˆæ½‡æ´’çš„å®Œæˆäº†ã€‚ä½†æ˜¯å¥½åƒä¸èƒ½æ¥å—å‚æ•°è¯¶ï¼Œæ¥å—å‚æ•°åˆè¦è€ƒè™‘è¾¹ç•Œæƒ…å†µï¼Œæ¯”å¦‚<code>undefined</code>ï¼Œ<code>null</code>ä¹‹ç±»çš„ã€‚è€Œä¸”ï¼ï¼è€Œä¸”ï¼ï¼è€Œä¸”<code>call</code>ä¸ä¼ çš„è¯æ˜¯é»˜è®¤åº”ç”¨<code>window</code>çš„ï¼›</p>
<p>æ‰€ä»¥ä»–æœ‰æˆ‘ä»¬ä¹Ÿè¦æœ‰ï¼å†²ï¼</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.myCall = <span class="function"><span class="keyword">function</span>(<span class="params">context</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// å–å¾—ä¼ å…¥çš„å¯¹è±¡ï¼ˆæ‰§è¡Œä¸Šä¸‹æ–‡ï¼‰ï¼Œæ¯”å¦‚ä¸Šæ–‡çš„fooå¯¹è±¡ï¼Œè¿™é‡Œçš„contextå°±ç›¸å½“äºä¸Šæ–‡çš„foo</span></span><br><span class="line">  <span class="comment">// ä¸ä¼ ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œé»˜è®¤æ˜¯window,</span></span><br><span class="line">  <span class="keyword">var</span> context = context || <span class="built_in">window</span>;</span><br><span class="line">  <span class="comment">// ç»™contextæ·»åŠ ä¸€ä¸ªå±æ€§ï¼Œè¿™æ—¶çš„thisæŒ‡å‘è°ƒç”¨myCallçš„å‡½æ•°ï¼Œæ¯”å¦‚ä¸Šæ–‡çš„barå‡½æ•°</span></span><br><span class="line">  context.fn = <span class="keyword">this</span>;<span class="comment">//è¿™é‡Œçš„context.fnå°±ç›¸å½“äºä¸Šæ–‡çš„barå‡½æ•°</span></span><br><span class="line">  <span class="comment">// é€šè¿‡å±•å¼€è¿ç®—ç¬¦å’Œè§£æ„èµ‹å€¼å–å‡ºcontextåé¢çš„å‚æ•°ï¼Œä¸Šæ–‡çš„ä¾‹å­æ²¡æœ‰ä¼ å…¥å‚æ•°åˆ—è¡¨</span></span><br><span class="line">  <span class="keyword">var</span> args = [...arguments].slice(<span class="number">1</span>);</span><br><span class="line">  <span class="comment">// æ‰§è¡Œå‡½æ•°ï¼ˆç›¸å½“äºä¸Šæ–‡çš„bar(...args)ï¼‰</span></span><br><span class="line">  <span class="keyword">var</span> result = context.fn(...args);</span><br><span class="line">  <span class="comment">// åˆ é™¤å‡½æ•°</span></span><br><span class="line">  <span class="keyword">delete</span> context.fn;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="å®ç°apply"><a href="#å®ç°apply" class="headerlink" title="å®ç°apply"></a>å®ç°apply</h3><p>å› ä¸ºä»–ä»¬ä¸¤å…„å¼Ÿå°±å‚æ•°ä¸ä¸€æ ·æ‰€ä»¥å°±ä¸è§£é‡Šäº†ï¼Œç›´æ¥çœ‹ä»£ç å§ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.myApply = <span class="function"><span class="keyword">function</span>(<span class="params">context</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> context = context || <span class="built_in">window</span>;</span><br><span class="line">      context.fn = <span class="keyword">this</span>;</span><br><span class="line">      <span class="keyword">var</span> result;</span><br><span class="line">      <span class="comment">// åˆ¤æ–­ç¬¬äºŒä¸ªå‚æ•°æ˜¯å¦å­˜åœ¨ï¼Œä¹Ÿå°±æ˜¯contextåé¢æœ‰æ²¡æœ‰ä¸€ä¸ªæ•°ç»„</span></span><br><span class="line">      <span class="comment">// å¦‚æœå­˜åœ¨ï¼Œåˆ™éœ€è¦å±•å¼€ç¬¬äºŒä¸ªå‚æ•°</span></span><br><span class="line">      <span class="keyword">if</span> (<span class="built_in">arguments</span>[<span class="number">1</span>]) &#123;</span><br><span class="line">        result = context.fn(...arguments[<span class="number">1</span>]);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        result = context.fn();</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">delete</span> context.fn;</span><br><span class="line">      <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="å®ç°bind"><a href="#å®ç°bind" class="headerlink" title="å®ç°bind"></a>å®ç°bind</h2><h4 id="äº†è§£bind"><a href="#äº†è§£bind" class="headerlink" title="äº†è§£bind"></a>äº†è§£bind</h4><blockquote>
<p><code>bind() æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œåœ¨</code>bind()<code>è¢«è°ƒç”¨æ—¶ï¼Œè¿™ä¸ªæ–°å‡½æ•°çš„</code>this<code>è¢«æŒ‡å®šä¸º</code>bind()` çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œè€Œå…¶ä½™å‚æ•°å°†ä½œä¸ºæ–°å‡½æ•°çš„å‚æ•°ï¼Œä¾›è°ƒç”¨æ—¶ä½¿ç”¨ã€‚</p>
<p>è¯­æ³•ï¼š<code>fun.bind(thisArg[, arg1[, arg2[, ...]]])</code></p>
<p>MDN</p>
</blockquote>
<h4 id="bindå’Œapplyï¼Œcallä¸¤å…„å¼Ÿçš„åŒºåˆ«"><a href="#bindå’Œapplyï¼Œcallä¸¤å…„å¼Ÿçš„åŒºåˆ«" class="headerlink" title="bindå’Œapplyï¼Œcallä¸¤å…„å¼Ÿçš„åŒºåˆ«"></a>bindå’Œapplyï¼Œcallä¸¤å…„å¼Ÿçš„åŒºåˆ«</h4><p><code>bind</code> æ–¹æ³•ä¸ <code>call / apply</code> æœ€å¤§çš„ä¸åŒå°±æ˜¯å‰è€…è¿”å›ä¸€ä¸ªç»‘å®šä¸Šä¸‹æ–‡çš„<strong>å‡½æ•°</strong>ï¼Œè€Œåä¸¤è€…æ˜¯<strong>ç›´æ¥æ‰§è¡Œ</strong>äº†å‡½æ•°ã€‚</p>
<p>ä¸Šä»£ç ï¼</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> value = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> foo = &#123;</span><br><span class="line">    value: <span class="number">1</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">		value: <span class="keyword">this</span>.value,</span><br><span class="line">		name: name,</span><br><span class="line">		age: age</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">bar.call(foo, <span class="string">"Jack"</span>, <span class="number">20</span>); <span class="comment">// ç›´æ¥æ‰§è¡Œäº†å‡½æ•°</span></span><br><span class="line"><span class="comment">// &#123;value: 1, name: "Jack", age: 20&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> bindFoo1 = bar.bind(foo, <span class="string">"Jack"</span>, <span class="number">20</span>); <span class="comment">// è¿”å›ä¸€ä¸ªå‡½æ•°</span></span><br><span class="line">bindFoo1();</span><br><span class="line"><span class="comment">// &#123;value: 1, name: "Jack", age: 20&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> bindFoo2 = bar.bind(foo, <span class="string">"Jack"</span>); <span class="comment">// è¿”å›ä¸€ä¸ªå‡½æ•°</span></span><br><span class="line">bindFoo2(<span class="number">20</span>);</span><br><span class="line"><span class="comment">// &#123;value: 1, name: "Jack", age: 20&#125;</span></span><br></pre></td></tr></table></figure>

<p>é€šè¿‡ä¸Šè¿°ä»£ç å¯ä»¥çœ‹å‡º<code>bind</code> æœ‰å¦‚ä¸‹ç‰¹æ€§ï¼š</p>
<ul>
<li>1ã€å¯ä»¥æŒ‡å®š<code>this</code></li>
<li>2ã€è¿”å›ä¸€ä¸ªå‡½æ•°</li>
<li>3ã€å¯ä»¥ä¼ å…¥å‚æ•°</li>
<li>4ã€æŸ¯é‡ŒåŒ–</li>
</ul>
<h4 id="å®ç°bind-1"><a href="#å®ç°bind-1" class="headerlink" title="å®ç°bind"></a>å®ç°bind</h4><p>ç›´æ¥å¼€å¹²ï¼</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.myBind = <span class="function"><span class="keyword">function</span> (<span class="params">context</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> that = <span class="keyword">this</span>; <span class="comment">// è¿™é‡Œåˆ©ç”¨çš„é—­åŒ…ä¿å­˜äº†æ­¤æ—¶æ­¤åˆ»çš„thisï¼Œå¦åˆ™åé¢è°ƒç”¨çš„è¯ä¼šéšå¼ä¸¢å¤±</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; </span><br><span class="line">    <span class="keyword">return</span> that.apply(context)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æµ‹è¯•ç”¨ä¾‹</span></span><br><span class="line"><span class="keyword">var</span> value = <span class="number">2</span>;</span><br><span class="line"><span class="keyword">var</span> foo = &#123;</span><br><span class="line">    value: <span class="number">1</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">this</span>.value;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> bindFoo = bar.myBind(foo);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(bindFoo()); <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>

<p>Ok,æ¥ä¸‹æ¥æˆ‘ä»¬å¤„ç†ä¸€ä¸‹å‚æ•°å’ŒæŸ¯é‡ŒåŒ–å§ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.myBind = <span class="function"><span class="keyword">function</span> (<span class="params">context</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// å› ä¸ºå‚æ•°æ˜¯ç±»æ•°ç»„æ²¡æœ‰sliceæ–¹æ³•ï¼Œé€šè¿‡callç»‘å®šthisä¹‹åä½¿ç”¨sliceæ‹·è´æ•°ç»„ï¼Œé™¤äº†ç¬¬ä¸€ä¸ªéœ€è¦ç»‘å®šçš„this ä¹‹å¤–ï¼Œä¸‹é¢ä¼šç”¨åˆ°</span></span><br><span class="line">  <span class="keyword">var</span> args = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>, <span class="number">1</span>)</span><br><span class="line">  <span class="keyword">var</span> that = <span class="keyword">this</span>; <span class="comment">// è¿™é‡Œåˆ©ç”¨çš„é—­åŒ…ä¿å­˜äº†æ­¤æ—¶æ­¤åˆ»çš„thisï¼Œå¦åˆ™åé¢è°ƒç”¨çš„è¯ä¼šéšå¼ä¸¢å¤±</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; </span><br><span class="line">    <span class="comment">// å’Œä¸Šé¢ä¸€æ ·æ‹·è´å‚æ•°</span></span><br><span class="line">    <span class="keyword">var</span> nowArgs = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>)</span><br><span class="line">    <span class="keyword">return</span> that.apply(context, args.concat(nowArgs))</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æµ‹è¯•ç”¨ä¾‹</span></span><br><span class="line"><span class="keyword">var</span> value = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> foo = &#123;</span><br><span class="line">    value: <span class="number">1</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">		value: <span class="keyword">this</span>.value,</span><br><span class="line">		name: name,</span><br><span class="line">		age: age</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> bindFoo = bar.myBind(foo, <span class="string">"Jack"</span>);</span><br><span class="line">bindFoo(<span class="number">20</span>);</span><br><span class="line"><span class="comment">// &#123;value: 1, name: "Jack", age: 20&#125;</span></span><br></pre></td></tr></table></figure>

<p>åˆ°ç°åœ¨å·²ç»å®Œæˆå¤§éƒ¨åˆ†äº†ï¼Œä½†æ˜¯è¿˜æœ‰ä¸€ä¸ªéš¾ç‚¹ï¼Œ<code>bind</code> æœ‰ä»¥ä¸‹ä¸€ä¸ªç‰¹æ€§</p>
<blockquote>
<p>ä¸€ä¸ªç»‘å®šå‡½æ•°ä¹Ÿèƒ½ä½¿ç”¨newæ“ä½œç¬¦åˆ›å»ºå¯¹è±¡ï¼šè¿™ç§è¡Œä¸ºå°±åƒæŠŠåŸå‡½æ•°å½“æˆæ„é€ å™¨ï¼Œæä¾›çš„ this å€¼è¢«å¿½ç•¥ï¼ŒåŒæ—¶è°ƒç”¨æ—¶çš„å‚æ•°è¢«æä¾›ç»™æ¨¡æ‹Ÿå‡½æ•°ã€‚</p>
</blockquote>
<p>ä¸¾ä¾‹è¯´æ˜ï¼šæ­£è§„çš„bind</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> value = <span class="number">2</span>;</span><br><span class="line"><span class="keyword">var</span> foo = &#123;</span><br><span class="line">    value: <span class="number">1</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.habit = <span class="string">'shopping'</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.value);</span><br><span class="line">    <span class="built_in">console</span>.log(name);</span><br><span class="line">    <span class="built_in">console</span>.log(age);</span><br><span class="line">&#125;</span><br><span class="line">bar.prototype.friend = <span class="string">'kevin'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> bindFoo = bar.bind(foo, <span class="string">'Jack'</span>);</span><br><span class="line"><span class="keyword">var</span> obj = <span class="keyword">new</span> bindFoo(<span class="number">20</span>);</span><br><span class="line"><span class="comment">// undefined</span></span><br><span class="line"><span class="comment">// Jack</span></span><br><span class="line"><span class="comment">// 20</span></span><br><span class="line"></span><br><span class="line">obj.habit;</span><br><span class="line"><span class="comment">// shopping</span></span><br><span class="line"></span><br><span class="line">obj.friend;</span><br><span class="line"><span class="comment">// kevin</span></span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢ä¾‹å­ä¸­ï¼Œè¿è¡Œç»“æœ<code>this.value</code> è¾“å‡ºä¸º <code>undefined</code>ï¼Œè¿™ä¸æ˜¯å…¨å±€<code>value</code> ä¹Ÿä¸æ˜¯<code>foo</code>å¯¹è±¡ä¸­çš„<code>value</code>ï¼Œè¿™è¯´æ˜ <code>bind</code> çš„ <code>this</code> å¯¹è±¡å¤±æ•ˆäº†ï¼Œ<code>new</code> çš„å®ç°ä¸­ç”Ÿæˆä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œè¿™ä¸ªæ—¶å€™çš„ <code>this</code>æŒ‡å‘çš„æ˜¯ <code>obj</code>ã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬è¿”å›çš„æ—¶å€™éœ€è¦åˆ¤æ–­ä¸€ä¸‹ä»–æ˜¯ä¸æ˜¯ä½œä¸ºäº†æ„é€ å‡½æ•°è¿”å›ï¼Œå¦‚æœæ˜¯å°±è¿”å›å½“å‰çš„thisï¼Œå¦‚æœä¸æ˜¯å°±ç»‘å®šå½“å‰è¾“å…¥çš„<code>context</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.myBind = <span class="function"><span class="keyword">function</span> (<span class="params">context</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// å› ä¸ºå‚æ•°æ˜¯ç±»æ•°ç»„æ²¡æœ‰sliceæ–¹æ³•ï¼Œé€šè¿‡callç»‘å®šthisä¹‹åä½¿ç”¨sliceæ‹·è´æ•°ç»„ï¼Œé™¤äº†ç¬¬ä¸€ä¸ªéœ€è¦ç»‘å®šçš„this ä¹‹å¤–ï¼Œä¸‹é¢ä¼šç”¨åˆ°</span></span><br><span class="line">  <span class="keyword">var</span> args = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>, <span class="number">1</span>)</span><br><span class="line">  <span class="keyword">var</span> that = <span class="keyword">this</span>; <span class="comment">// è¿™é‡Œåˆ©ç”¨çš„é—­åŒ…ä¿å­˜äº†æ­¤æ—¶æ­¤åˆ»çš„thisï¼Œå¦åˆ™åé¢è°ƒç”¨çš„è¯ä¼šéšå¼ä¸¢å¤±</span></span><br><span class="line">  <span class="keyword">var</span> fnc = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; </span><br><span class="line">    <span class="comment">// å’Œä¸Šé¢ä¸€æ ·æ‹·è´å‚æ•°</span></span><br><span class="line">    <span class="keyword">var</span> nowArgs = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>)</span><br><span class="line">    <span class="comment">//å½“ä½œä¸ºæ„é€ å‡½æ•°æ—¶ï¼Œthis æŒ‡å‘å®ä¾‹ï¼Œæ­¤æ—¶ this instanceof fBound ç»“æœä¸º trueï¼Œå¯ä»¥è®©å®ä¾‹è·å¾—æ¥è‡ªç»‘å®šå‡½æ•°çš„å€¼ï¼Œå³ä¸Šä¾‹ä¸­å®ä¾‹ä¼šå…·æœ‰ habit å±æ€§ã€‚</span></span><br><span class="line"><span class="comment">//å½“ä½œä¸ºæ™®é€šå‡½æ•°æ—¶ï¼Œthis æŒ‡å‘ windowï¼Œæ­¤æ—¶ç»“æœä¸º falseï¼Œå°†ç»‘å®šå‡½æ•°çš„ this æŒ‡å‘ context</span></span><br><span class="line">    <span class="keyword">return</span> that.apply(</span><br><span class="line">      <span class="keyword">this</span> <span class="keyword">instanceof</span> fnc ? <span class="keyword">this</span> : context, </span><br><span class="line">      args.concat(nowArgs)</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// ä¿®æ”¹è¿”å›å‡½æ•°çš„ prototype ä¸ºç»‘å®šå‡½æ•°çš„ prototypeï¼Œå®ä¾‹å°±å¯ä»¥ç»§æ‰¿ç»‘å®šå‡½æ•°çš„åŸå‹ä¸­çš„å€¼ï¼Œå³ä¸Šä¾‹ä¸­ obj å¯ä»¥è·å–åˆ° bar åŸå‹ä¸Šçš„ friendã€‚</span></span><br><span class="line">  fnc.prototype = <span class="keyword">this</span>.prototype</span><br><span class="line">  <span class="keyword">return</span> fnc</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯å…¶å®è¿™æ ·ä¼šæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘å¦‚æœå®ä¾‹ä¿®æ”¹äº†åŸå‹ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥çš„ç»§æ‰¿å°±ä¼šå‡ºç°é—®é¢˜ã€‚</p>
<p>è¿™ä¸ªæ—¶å€™æˆ‘ä»¬éœ€è¦æ‹·è´ä¸€ä¸‹æˆ‘ä»¬åŸå‹ä¸Šé¢çš„å‚æ•°ã€‚ä¼šç”¨åˆ°</p>
<blockquote>
<p>é“æ ¼æ‹‰æ–¯Â·å…‹ç½—å…‹ç¦å¾·åœ¨ 2006 å¹´å†™äº†ä¸€ç¯‡æ–‡ç« ï¼Œé¢˜ä¸º Prototypal Inheritance in JavaScript (JavaScript 10 ä¸­çš„åŸå‹å¼ç»§æ‰¿)ã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œä»–ä»‹ç»äº†ä¸€ç§å®ç°ç»§æ‰¿çš„æ–¹æ³•ï¼Œè¿™ç§æ–¹æ³•å¹¶æ²¡æœ‰ä½¿ç”¨ä¸¥æ ¼æ„ä¹‰ä¸Šçš„ æ„é€ å‡½æ•°ã€‚ä»–çš„æƒ³æ³•æ˜¯å€ŸåŠ©åŸå‹å¯ä»¥åŸºäºå·²æœ‰çš„å¯¹è±¡åˆ›å»ºæ–°å¯¹è±¡ï¼ŒåŒæ—¶è¿˜ä¸å¿…å› æ­¤åˆ›å»ºè‡ªå®šä¹‰ç±»å‹ã€‚ä¸º äº†è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼Œä»–ç»™å‡ºäº†å¦‚ä¸‹å‡½æ•°ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">object</span>(<span class="params">o</span>)</span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">F</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line">  F.prototype = o</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> F</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>çœ‹èµ·æ¥éå¸¸ç®€å•</p>
<p>å…ˆåœ¨<code>object</code>å‡½æ•°å†…éƒ¨åˆ›å»ºä¸€ä¸ªä¸´æ—¶çš„æ„é€ å‡½æ•°<code>F</code>, ç„¶åå°†ä¼ å…¥çš„è¿™ä¸ªå¯¹è±¡<code>o</code>ä½œä¸ºè¿™ä¸ªä¸´æ—¶æ„é€ å‡½æ•°çš„åŸå‹, æœ€åè¿”å›è¿™ä¸ªä¸´æ—¶æ„é€ å‡½æ•°çš„å®ä¾‹. </p>
<p>ç®€å•æ¥è¯´å°±æ˜¯<code>object</code>å¯¹ä¼ å…¥çš„å¯¹è±¡è¿›è¡Œäº†æµ…å¤åˆ¶.</p>
</blockquote>
<p>è¿™å¥è¯åœ¨æˆ‘çš„ã€ŠåŸå‹åŸå‹é“¾å’Œç»§æ‰¿ã€‹é‡Œé¢æœ‰å…·ä½“çš„ä»‹ç»ã€‚æƒ³çœ‹çš„è¯å¯ä»¥ç‚¹å‡»å¤´åƒæŸ¥æ‰¾æ–‡ç« ã€‚</p>
<p>è¿™è¾¹å¯ä»¥ç›´æ¥ä½¿ç”¨ES5çš„ <code>Object.create()</code>æ–¹æ³•ç”Ÿæˆä¸€ä¸ªæ–°å¯¹è±¡</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fBound.prototype = <span class="built_in">Object</span>.create(<span class="keyword">this</span>.prototype);</span><br></pre></td></tr></table></figure>

<p>ä¸è¿‡ <code>bind</code> å’Œ <code>Object.create()</code>éƒ½æ˜¯ES5æ–¹æ³•ï¼Œéƒ¨åˆ†IEæµè§ˆå™¨ï¼ˆIE &lt; 9ï¼‰å¹¶ä¸æ”¯æŒï¼ŒPolyfillä¸­ä¸èƒ½ç”¨ <code>Object.create()</code>å®ç° <code>bind</code>ï¼Œä¸è¿‡åŸç†æ˜¯ä¸€æ ·çš„ã€‚</p>
<p>okã€‚é‚£æˆ‘ä»¬å°±ä¿®æ”¹ä¸€ä¸‹</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.myBind = <span class="function"><span class="keyword">function</span> (<span class="params">context</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// å› ä¸ºå‚æ•°æ˜¯ç±»æ•°ç»„æ²¡æœ‰sliceæ–¹æ³•ï¼Œé€šè¿‡callç»‘å®šthisä¹‹åä½¿ç”¨sliceæ‹·è´æ•°ç»„ï¼Œé™¤äº†ç¬¬ä¸€ä¸ªéœ€è¦ç»‘å®šçš„this ä¹‹å¤–ï¼Œä¸‹é¢ä¼šç”¨åˆ°</span></span><br><span class="line">  <span class="keyword">var</span> args = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>, <span class="number">1</span>)</span><br><span class="line">  <span class="keyword">var</span> that = <span class="keyword">this</span>; <span class="comment">// è¿™é‡Œåˆ©ç”¨çš„é—­åŒ…ä¿å­˜äº†æ­¤æ—¶æ­¤åˆ»çš„thisï¼Œå¦åˆ™åé¢è°ƒç”¨çš„è¯ä¼šéšå¼ä¸¢å¤±</span></span><br><span class="line">  <span class="keyword">var</span> fNOP = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line">  <span class="keyword">var</span> fnc = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; </span><br><span class="line">    <span class="comment">// å’Œä¸Šé¢ä¸€æ ·æ‹·è´å‚æ•°</span></span><br><span class="line">    <span class="keyword">var</span> nowArgs = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>)</span><br><span class="line">    <span class="comment">//å½“ä½œä¸ºæ„é€ å‡½æ•°æ—¶ï¼Œthis æŒ‡å‘å®ä¾‹ï¼Œæ­¤æ—¶ this instanceof fBound ç»“æœä¸º trueï¼Œå¯ä»¥è®©å®ä¾‹è·å¾—æ¥è‡ªç»‘å®šå‡½æ•°çš„å€¼ï¼Œå³ä¸Šä¾‹ä¸­å®ä¾‹ä¼šå…·æœ‰ habit å±æ€§ã€‚</span></span><br><span class="line"><span class="comment">//å½“ä½œä¸ºæ™®é€šå‡½æ•°æ—¶ï¼Œthis æŒ‡å‘ windowï¼Œæ­¤æ—¶ç»“æœä¸º falseï¼Œå°†ç»‘å®šå‡½æ•°çš„ this æŒ‡å‘ context</span></span><br><span class="line">    <span class="keyword">return</span> that.apply(</span><br><span class="line">      <span class="keyword">this</span> <span class="keyword">instanceof</span> fNOP ? <span class="keyword">this</span> : context, </span><br><span class="line">      args.concat(nowArgs)</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// ä¿®æ”¹è¿”å›å‡½æ•°çš„ prototype ä¸ºç»‘å®šå‡½æ•°çš„ prototypeï¼Œå®ä¾‹å°±å¯ä»¥ç»§æ‰¿ç»‘å®šå‡½æ•°çš„åŸå‹ä¸­çš„å€¼ï¼Œå³ä¸Šä¾‹ä¸­ obj å¯ä»¥è·å–åˆ° bar åŸå‹ä¸Šçš„ friendã€‚</span></span><br><span class="line">  fNOP.prototype = <span class="keyword">this</span>.prototype</span><br><span class="line">  fnc.prototype = <span class="keyword">new</span> FNOP()</span><br><span class="line">  <span class="keyword">return</span> fnc</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åˆ°è¿™é‡Œå…¶å®å·²ç»å·®ä¸å¤šäº†ï¼Œçªç„¶æƒ³èµ·æ¥è¿˜æœ‰ä¸€ä¸ªé—®é¢˜æ˜¯è°ƒç”¨ <code>bind</code> çš„ä¸æ˜¯å‡½æ•°ï¼Œè¿™æ—¶å€™éœ€è¦æŠ›å‡ºå¼‚å¸¸ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="keyword">this</span> !== <span class="string">"function"</span>) &#123;</span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">"Function.prototype.bind - what is trying to be bound is not callable"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ‰€ä»¥</p>
<h4 id="é¡¶é…"><a href="#é¡¶é…" class="headerlink" title="é¡¶é…"></a>é¡¶é…</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.myBind = <span class="function"><span class="keyword">function</span> (<span class="params">context</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="keyword">this</span> !== <span class="string">"function"</span>) &#123;</span><br><span class="line">  	<span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">"Function.prototype.bind - what is trying to 	be bound is not callable"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">  <span class="comment">// å› ä¸ºå‚æ•°æ˜¯ç±»æ•°ç»„æ²¡æœ‰sliceæ–¹æ³•ï¼Œé€šè¿‡callç»‘å®šthisä¹‹åä½¿ç”¨sliceæ‹·è´æ•°ç»„ï¼Œé™¤äº†ç¬¬ä¸€ä¸ªéœ€è¦ç»‘å®šçš„this ä¹‹å¤–ï¼Œä¸‹é¢ä¼šç”¨åˆ°</span></span><br><span class="line">  <span class="keyword">var</span> args = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>, <span class="number">1</span>)</span><br><span class="line">  <span class="keyword">var</span> that = <span class="keyword">this</span>; <span class="comment">// è¿™é‡Œåˆ©ç”¨çš„é—­åŒ…ä¿å­˜äº†æ­¤æ—¶æ­¤åˆ»çš„thisï¼Œå¦åˆ™åé¢è°ƒç”¨çš„è¯ä¼šéšå¼ä¸¢å¤±</span></span><br><span class="line">  <span class="keyword">var</span> fNOP = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line">  <span class="keyword">var</span> fnc = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; </span><br><span class="line">    <span class="comment">// å’Œä¸Šé¢ä¸€æ ·æ‹·è´å‚æ•°</span></span><br><span class="line">    <span class="keyword">var</span> nowArgs = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>)</span><br><span class="line">    <span class="comment">//å½“ä½œä¸ºæ„é€ å‡½æ•°æ—¶ï¼Œthis æŒ‡å‘å®ä¾‹ï¼Œæ­¤æ—¶ this instanceof fBound ç»“æœä¸º trueï¼Œå¯ä»¥è®©å®ä¾‹è·å¾—æ¥è‡ªç»‘å®šå‡½æ•°çš„å€¼ï¼Œå³ä¸Šä¾‹ä¸­å®ä¾‹ä¼šå…·æœ‰ habit å±æ€§ã€‚</span></span><br><span class="line"><span class="comment">//å½“ä½œä¸ºæ™®é€šå‡½æ•°æ—¶ï¼Œthis æŒ‡å‘ windowï¼Œæ­¤æ—¶ç»“æœä¸º falseï¼Œå°†ç»‘å®šå‡½æ•°çš„ this æŒ‡å‘ context</span></span><br><span class="line">    <span class="keyword">return</span> that.apply(</span><br><span class="line">      <span class="keyword">this</span> <span class="keyword">instanceof</span> fNOP ? <span class="keyword">this</span> : context, </span><br><span class="line">      args.concat(nowArgs)</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// ä¿®æ”¹è¿”å›å‡½æ•°çš„ prototype ä¸ºç»‘å®šå‡½æ•°çš„ prototypeï¼Œå®ä¾‹å°±å¯ä»¥ç»§æ‰¿ç»‘å®šå‡½æ•°çš„åŸå‹ä¸­çš„å€¼ï¼Œå³ä¸Šä¾‹ä¸­ obj å¯ä»¥è·å–åˆ° bar åŸå‹ä¸Šçš„ friendã€‚</span></span><br><span class="line">  fNOP.prototype = <span class="keyword">this</span>.prototype</span><br><span class="line">  fnc.prototype = <span class="keyword">new</span> FNOP()</span><br><span class="line">  <span class="keyword">return</span> fnc</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2 id="å®ç°new"><a href="#å®ç°new" class="headerlink" title="å®ç°new"></a>å®ç°new</h2><h4 id="äº†è§£new"><a href="#äº†è§£new" class="headerlink" title="äº†è§£new"></a>äº†è§£new</h4><blockquote>
<p><strong>new è¿ç®—ç¬¦</strong>åˆ›å»ºä¸€ä¸ªç”¨æˆ·å®šä¹‰çš„å¯¹è±¡ç±»å‹çš„å®ä¾‹æˆ–å…·æœ‰æ„é€ å‡½æ•°çš„å†…ç½®å¯¹è±¡çš„å®ä¾‹ã€‚ â€”â€”ï¼ˆæ¥è‡ªäºMDNï¼‰</p>
</blockquote>
<p>æˆ‘ä»¬å…ˆè¯•è¯•ç°åœ¨æœ‰çš„newï¼Œä»–æœ‰ä»€ä¹ˆåŠŸèƒ½ï¼Œç„¶åæˆ‘ä»¬æ€»ç»“ä¹‹åï¼Œåœ¨å¼€å§‹å®ç°ã€‚</p>
<p>çœ‹ä¸ªğŸŒ°ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">NEW</span> (<span class="params">a</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.a = a;</span><br><span class="line">&#125;</span><br><span class="line">NEW.prototype.sayA = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.a+<span class="string">'b'</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> A = <span class="keyword">new</span> NEW(<span class="number">1</span>);</span><br><span class="line">A.sayA()</span><br><span class="line">A.a</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°Aæ˜¯NEWçš„ä¸€ä¸ªå®ä¾‹ã€‚ç»§æ‰¿äº†æ„é€ å‡½æ•°ï¼ˆNEWï¼‰çš„å±æ€§å’ŒåŸå‹ä¸Šçš„å±æ€§ï¼ˆsayAï¼‰ã€‚</p>
<blockquote>
<p><strong><code>new</code></strong> å…³é”®å­—ä¼šè¿›è¡Œå¦‚ä¸‹çš„æ“ä½œï¼š</p>
<ol>
<li>åˆ›å»ºä¸€ä¸ªç©ºçš„ç®€å•JavaScriptå¯¹è±¡ï¼ˆå³{}ï¼‰ï¼›</li>
<li>é“¾æ¥è¯¥å¯¹è±¡ï¼ˆå³è®¾ç½®è¯¥å¯¹è±¡çš„æ„é€ å‡½æ•°ï¼‰åˆ°å¦ä¸€ä¸ªå¯¹è±¡ ï¼›</li>
<li>å°†æ­¥éª¤1æ–°åˆ›å»ºçš„å¯¹è±¡ä½œä¸º<code>this</code>çš„ä¸Šä¸‹æ–‡ ï¼›</li>
<li>å¦‚æœè¯¥å‡½æ•°æ²¡æœ‰è¿”å›å¯¹è±¡ï¼Œåˆ™è¿”å›<code>this</code>ã€‚</li>
</ol>
<p>MDN</p>
</blockquote>
<h4 id="å®ç°ä¸€ä¸ªnew"><a href="#å®ç°ä¸€ä¸ªnew" class="headerlink" title="å®ç°ä¸€ä¸ªnew"></a>å®ç°ä¸€ä¸ªnew</h4><p>è¯´å¹²å°±å¹²ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// new æ˜¯å…³é”®è¯ï¼Œä¸å¯ä»¥ç›´æ¥è¦†ç›–ã€‚è¿™é‡Œä½¿ç”¨ create æ¥æ¨¡æ‹Ÿå®ç° new çš„æ•ˆæœã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">create</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 1.</span></span><br><span class="line">  <span class="keyword">var</span> obj = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// è·å–æ„é€ å‡½æ•°</span></span><br><span class="line">  <span class="comment">// å› ä¸ºargumentsæ˜¯ä¸€ä¸ªç±»æ•°ç»„å¯¹è±¡ï¼Œæ²¡æœ‰unshiftæ–¹æ³•ï¼Œæ‰€ä»¥ç”¨äº†callï¼Œæˆ‘ä»¬æ²¡æœ‰newè¿™å…³é”®å­—ï¼Œåªèƒ½æ¨¡æ‹Ÿï¼Œæ‰€ä»¥çš„ä¸€ä¸ªå‚æ•°æˆ‘ä»¬è®¤ä¸ºä»–éœ€è¦ä¼ é€’ä¸€ä¸ªæ„é€ å‡½æ•°ã€‚</span></span><br><span class="line">  <span class="keyword">var</span> Con = [].unshift.call(<span class="built_in">arguments</span>)</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 2.</span></span><br><span class="line">  obj.__proto__ = Con.prototype </span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 3ã€ ç»‘å®šthisã€‚å› ä¸ºä¹‹å‰argumentså·²ç»è¢«æˆ‘ä»¬åˆ é™¤äº†ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œæ‰€ä»¥å‰©ä¸‹çš„å°±æ˜¯æˆ‘ä»¬æ‰€éœ€è¦çš„å‚æ•°äº†ã€‚</span></span><br><span class="line">  Con.apply(obj, <span class="built_in">arguments</span>)</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 4. ç®€é™‹ç‰ˆ</span></span><br><span class="line">  <span class="keyword">return</span> obj</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ„é€ å‡½æ•°è¿”å›å€¼æœ‰å¦‚ä¸‹ä¸‰ç§æƒ…å†µï¼š</p>
<ul>
<li>1ã€è¿”å›ä¸€ä¸ªå¯¹è±¡</li>
<li>2ã€æ²¡æœ‰ <code>return</code>ï¼Œå³è¿”å› <code>undefined</code></li>
<li>3ã€è¿”å›<code>undefined</code> ä»¥å¤–çš„åŸºæœ¬ç±»å‹</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">create</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="comment">// 1ã€è·å¾—æ„é€ å‡½æ•°ï¼ŒåŒæ—¶åˆ é™¤ arguments ä¸­ç¬¬ä¸€ä¸ªå‚æ•°</span></span><br><span class="line">    Con = [].shift.call(<span class="built_in">arguments</span>);</span><br><span class="line">	<span class="comment">// 2ã€åˆ›å»ºä¸€ä¸ªç©ºçš„å¯¹è±¡å¹¶é“¾æ¥åˆ°åŸå‹ï¼Œobj å¯ä»¥è®¿é—®æ„é€ å‡½æ•°åŸå‹ä¸­çš„å±æ€§</span></span><br><span class="line">    <span class="keyword">var</span> obj = <span class="built_in">Object</span>.create(Con.prototype);</span><br><span class="line">	<span class="comment">// 3ã€ç»‘å®š this å®ç°ç»§æ‰¿ï¼Œobj å¯ä»¥è®¿é—®åˆ°æ„é€ å‡½æ•°ä¸­çš„å±æ€§</span></span><br><span class="line">    <span class="keyword">var</span> ret = Con.apply(obj, <span class="built_in">arguments</span>);</span><br><span class="line">	<span class="comment">// 4ã€ä¼˜å…ˆè¿”å›æ„é€ å‡½æ•°è¿”å›çš„å¯¹è±¡</span></span><br><span class="line">	<span class="keyword">return</span> ret <span class="keyword">instanceof</span> <span class="built_in">Object</span> ? ret : obj;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="mailto:undefined">Derrick</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="http://derricktel.github.io/2020/07/16/%E3%80%90%E9%87%8D%E8%AF%86%E5%89%8D%E7%AB%AF%E3%80%91%E5%85%A8%E9%9D%A2%E6%94%BB%E7%A0%B4this/">http://derricktel.github.io/2020/07/16/%E3%80%90%E9%87%8D%E8%AF%86%E5%89%8D%E7%AB%AF%E3%80%91%E5%85%A8%E9%9D%A2%E6%94%BB%E7%A0%B4this/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥è‡ª <a href="http://derricktel.github.io" target="_blank">Derrick</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/JavaScript/">JavaScript</a><a class="post-meta__tags" href="/tags/this/">this</a></div><div class="post_share"><div class="social-share" data-image="/image/cover/web.jpeg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button button--primary button--animated"> <i class="fa fa-qrcode"></i> æ‰“èµ<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/DerrickWechat.png" alt="å¾®ä¿¡"/><div class="post-qr-code__desc">å¾®ä¿¡</div></li><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/DerrickAlipay.jpg" alt="æ”¯ä»˜å¯¶"/><div class="post-qr-code__desc">æ”¯ä»˜å¯¶</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2020/08/10/%E3%80%90%E9%87%8D%E8%AF%86%E5%89%8D%E7%AB%AF%E3%80%91%E4%B8%80%E6%AC%A1%E6%90%9E%E5%AE%9A%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF/"><img class="prev_cover lazyload" data-src="/image/cover/web.jpeg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">ã€é‡è¯†å‰ç«¯ã€‘ä¸€æ¬¡æå®šJavaScriptçš„æ‰§è¡Œæœºåˆ¶</div></div></a></div><div class="next-post pull_right"><a href="/2020/07/15/%E3%80%90%E9%87%8D%E8%AF%86%E5%89%8D%E7%AB%AF%E3%80%91%E9%97%AD%E5%8C%85%E4%B8%8E%E6%A8%A1%E5%9D%97/"><img class="next_cover lazyload" data-src="/image/cover/web.jpeg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">ã€é‡è¯†å‰ç«¯ã€‘é—­åŒ…ä¸æ¨¡å—</div></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> ç›¸å…³æ¨è</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2019/06/19/window-history-back-ç¼“å­˜-è¿”å›ä¸Šçº§é¡µé¢ä¸åˆ·æ–°æ•°æ®/" title="window.history.back(); ç¼“å­˜ è¿”å›ä¸Šçº§é¡µé¢ä¸åˆ·æ–°æ•°æ®"><img class="relatedPosts_cover lazyload"data-src="/image/cover/history.jpeg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2019-06-19</div><div class="relatedPosts_title">window.history.back(); ç¼“å­˜ è¿”å›ä¸Šçº§é¡µé¢ä¸åˆ·æ–°æ•°æ®</div></div></a></div><div class="relatedPosts_item"><a href="/2020/07/15/ã€é‡è¯†å‰ç«¯ã€‘é—­åŒ…ä¸æ¨¡å—/" title="ã€é‡è¯†å‰ç«¯ã€‘é—­åŒ…ä¸æ¨¡å—"><img class="relatedPosts_cover lazyload"data-src="/image/cover/web.jpeg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-07-15</div><div class="relatedPosts_title">ã€é‡è¯†å‰ç«¯ã€‘é—­åŒ…ä¸æ¨¡å—</div></div></a></div><div class="relatedPosts_item"><a href="/2020/08/10/ã€é‡è¯†å‰ç«¯ã€‘ä¸€æ¬¡æå®šäº‹ä»¶å¾ªç¯/" title="ã€é‡è¯†å‰ç«¯ã€‘ä¸€æ¬¡æå®šJavaScriptçš„æ‰§è¡Œæœºåˆ¶"><img class="relatedPosts_cover lazyload"data-src="/image/cover/web.jpeg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-08-10</div><div class="relatedPosts_title">ã€é‡è¯†å‰ç«¯ã€‘ä¸€æ¬¡æå®šJavaScriptçš„æ‰§è¡Œæœºåˆ¶</div></div></a></div><div class="relatedPosts_item"><a href="/2020/07/13/ã€é‡è¯†å‰ç«¯ã€‘åŸå‹åŸå‹é“¾å’Œç»§æ‰¿/" title="ã€é‡è¯†å‰ç«¯ã€‘åŸå‹/åŸå‹é“¾å’Œç»§æ‰¿"><img class="relatedPosts_cover lazyload"data-src="/image/cover/web.jpeg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-07-13</div><div class="relatedPosts_title">ã€é‡è¯†å‰ç«¯ã€‘åŸå‹/åŸå‹é“¾å’Œç»§æ‰¿</div></div></a></div></div><div class="clear_both"></div></div></article></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2020 By Derrick</div><div class="framework-info"><span>é©±åŠ¨ </span><a href="https://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>ä¸»é¢˜ </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="é˜…è¯»æ¨¡å¼"></i><i class="fa fa-plus" id="font_plus" title="æ”¾å¤§å­—ä½“"></i><i class="fa fa-minus" id="font_minus" title="ç¼©å°å­—ä½“"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="ç®€ç¹è½¬æ¢" target="_self">ç¹</a><i class="darkmode fa fa-moon-o" id="darkmode" title="å¤œé—´æ¨¡å¼"></i></div><div id="rightside-config-show"><div id="rightside_config" title="è®¾ç½®"><i class="fa fa-cog" aria-hidden="true"></i></div><i class="fa fa-list-ul close" id="mobile-toc-button" title="ç›®å½•" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="å›åˆ°é¡¶éƒ¨" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async=""></script></body></html>